{"version":3,"sources":["resources/image/subeditor.ico","resources/subtitles/welcom.vtt","resources/image/lihuaMiku.png","resources/image/blackboard.png","model/sub.js","utils/timeFormatter.js","utils/logger.js","services/validateService.js","services/subService.js","services/fileService.js","utils/ffmpegWorker.js","services/videoService.js","services/editorStateService.js","model/editorState.js","components/common/bootstrapToast.jsx","utils/notifier.js","utils/progressor.js","services/httpService.js","utils/translater.js","services/guideService.js","components/header.jsx","components/videoPlayer.jsx","components/common/input.jsx","components/subRow.jsx","components/subHeaderRow.jsx","components/subTable.jsx","components/videoControls.jsx","components/common/rippleButton.jsx","components/tools.jsx","components/waveLine.jsx","components/subEditor.jsx","components/test.jsx","App.js","components/notSupportMobile.jsx","serviceWorker.js","index.js","resources/image/subEditor.png"],"names":["module","exports","Sub","start","end","content","this","Number","toFixed","editing","subService","toTime","timeFormatter","number2Time","number","fixedNum","DT","d2t","time2Number","time","t2d","getTimeLength","startTime","endTime","displayLogOff","config","log","logger","clog","console","timeRegx","schema","Joi","string","regex","required","min","label","max","length","greater","errorSchema","labelSchema","defaultOption","abortEarly","allowUnknown","skipFunctions","validateProperty","name","value","sigleSchema","obj","option","validate","error","validateService","getEditingSubSchema","getEditingErrorSchema","result","errorPaths","details","map","d","push","path","_","uniq","errors2messages","errors","errorMessages","Object","keys","key","validateTime","subArrayKey","sub_storage_key","subArrayBackupKey","sub_storage_backup_key","toNumber","readAsTextPE","resolve","reject","file","reader","FileReader","readAsText","onerror","onload","subFile","a","text","Promise","message","analyseSubPE","subUrl","$video","document","createElement","$track","appendChild","default","kind","src","track","cues","subCues","VTTCues","Array","from","subArray","c","fullSubArray","sub","mapSubToFullModel","createVttSubBlobUrl","vttText","vttBlob","Blob","type","URL","createObjectURL","fStartTime","formateTime","fEndTime","storageSubsPE","isBackup","subs","json","JSON","stringify","localStorage","setItem","e","getParseSubArrayPE","subsJson","getItem","parse","getSubArray","validatedTime","found","match","str","mapSubArray2Text","index","join","downloadFromUrl","url","fileName","aLink","style","display","href","download","body","click","removeChild","createSubArrayUrl","createSubTextArr","readSubFileAsText","createSubArray","saveSubArray","cleanSubArray","removeItem","getSubLength","downloadSubFile","getDefaultSub","defaultStart","defaultEnd","startIsErr","endIsErr","createSubUrlWorker","receiveUrl","workBlob","subUrlWorker","Worker","onmessage","event","data","sortSubArray","sortedArray","sort","pre","next","createSubTextArrFromStorage","readFilePE","readerFnName","readFileData","buffer","Uint8Array","fetchAsBlob","fetch","res","blob","fetchFileU8DataPE","resove","abortController","AbortController","signal","then","getReader","read","done","abort","cancel","buffers","Constructor","constructor","reduce","val","merge","byteLength","set","fileService","fetchFileData","fetchFileAsText","fetchFileU8Data","worker","outputUrl","initFfmpegWorker","msg","MEMFS","revokeObjectURL","File","ffmpegWorker","postMessage","terminateWork","terminate","videoUrl","videoName","subName","Error","test","videoData","subData","ttfData","TOTAL_MEMORY","arguments","videoService","createVideoType","fileType","isFileName","lastIndexOf","substring","videoRegx","videoType","getDefaultPicUrl","defaultPic","getDefaultSubUrl","defaultSub","encodeVideoWithSub","history","top","editorStateService","editorState","pop","unPop","getTop","getHistory","_subArray","WeakMap","_currentTime","EditorState","currentTime","get","BootstrapToast","head","small","dataArray","className","role","aria-live","aria-atomic","border","boxShadow","width","height","xmlns","preserveAspectRatio","focusable","fill","primary","warning","transitions","slide","Slide","zoom","Zoom","flip","Flip","bounce","Bounce","notify","positionStr","typeStr","transition","postionStrUpper","toUpperCase","typeStrUpper","toastConfig","position","toast","POSITION","TYPE","notifier","bootstrapToast","strArray","isActive","toastId","NProgress","configure","minimum","progressor","inc","axios","interceptors","request","use","response","status","httpService","params","axiosConfig","post","baiduTranslateUrl","baiduTranslateParams","searchParams","baiduTranslate","to","salt","Date","getTime","sign","md5","encodeHref","Base64","btoa","timeout","trans_result","o","dst","catch","append","translateDebounce","debounce","leading","trailing","baiduTranslateLanguages","auto","zh","en","cht","yue","wyw","jp","kor","fra","spa","th","ara","ru","pt","de","it","el","nl","pl","bul","est","dan","fin","cs","rom","slo","swe","hu","vie","translateArrSeparator","translate_arr_separator","translater","googleTranslate","lang","query","getBaiduTranslateLangKey","findKey","v","getBaiduTranslateLanguages","translateByLangKey","fromKey","toKey","translateText","createTranslateTextFromStringArr","stringArr","guideService","home","window","location","protocol","host","subEditorPath","trackTest","isMobile","navigator","userAgent","HeaderWrap","styled","header","LogoYa","Header","state","user","handleLogout","reload","title","SubEditorPackage","version","aria-hidden","userName","marginRight","alt","avatarImage","onClick","PureComponent","VideoWrapper","div","VideoPlayer","load","player","initPlayer","props","getElementById","classList","add","canPlay","onVideoCanPlay","notice","remove","pause","onVideoPlayerPausedSwitch","play","playing","onVideoPlaying","fullscreen","$playerContainer","resize","fullscreenCancel","nextProps","nextState","picUrl","id","options","hotkey","video","pic","customType","flvCustom","videoElement","flvjs","isSupported","flvPlayer","createPlayer","hasAudio","attachMediaElement","subtitle","fontSize","bottom","color","contextmenu","indexOf","theme","loop","onLoad","onError","onCanplay","onPause","onPlay","onPlaying","onFullscreen","onFullscreenCancel","Component","InputYinput","input","Input","onChange","disabled","currentTarget","stopPropagation","RowWrap","clickCount","SubRow","rowData","onRowRemove","onRowEdit","onRowClick","onRowCommit","onRowCancel","onRowInsert","editingIndex","editingSub","onInputValueChange","displayIndex","scrollIndex","displayOnEditing","setTimeout","onKeyUp","preventDefault","keyCode","flex","HeaderRowWrap","SubHeaderRow","onDisplayIndexSwitch","subArrayLenIsZero","onInsert","TableWrapper","lihuaMikuPng","SubTable","$tableRef","React","createRef","toastId_validate","toastId_validatePropertys","setState","toast_validate","autoClose","flag","toast_validateProperty","errorMessage","currentId","ids","values","splice","hideProgressBar","handleInputValue","handleRowEdit","handleRowClick","handleRowCommit","onCommit","handleRowCancel","handleRowRemove","onRemove","tableBackGroundColor","$table","backgroundColor","handleDisplayIndexSwitch","boolean","handleRowInsert","scrollToButtom","scrollWrap","getElementsByClassName","scrollTop","scrollHeight","clientHeight","container","containerHeight","containerWidth","ref","headerHeight","gridClassName","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","rowRenderer","rowProps","VideoControlBox","VideoControls","onAction","playerPaused","shtitle","RippleButtonWrapper","RippleButton","bgColor","element","rippleBtnBoxRef","useCallback","node","onmouseenter","ripple","querySelector","offsetWidth","offsetHeight","offsetY","left","offsetX","onmousedown","opacity","onmouseup","setAttribute","ToolsWrapper","require","FileYinput","Tools","languages","languagesKeys","currentLanguageKeyFrom","currentLanguageKeyTo","modalIsOpen","handleLanguageChange","handleTranslate","onAllSubTranslate","handleTranslateBackupReset","onSubArrayBackupReset","handleVideoControlActions","step","onVideoControlAction","handleSubFile","files","updateSubArray","updateSubUrl","vttStr","handleVideoFile","canPlayType","onSwitch","handleSubFileDownload","onDownload","ffmpegEncoding","handleVideoWithSubDownload","confirm","handleFfmpegEncodeStop","handlesubTransform","handleModalClose","handleSubClean","onClean","duration","onDurationChange","k","filter","isOpen","closeTimeoutMS","overlay","right","zIndex","justifyContent","alignItems","background","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","flexFlow","cursor","margin","LineWrapper","WaveLine","onWaveClick","onWaveContextmenu","onSubBlockMove","onSubBlockMoveError","onSubBlockResize","onSubBlockClick","throttleWait","waveColor","alterWaveColor","waveScale","onSubMove","onSubMoveError","ErrorWait","ErrorColor","onSubResize","onSubClick","GlobalStyle","createGlobalStyle","Main","Left","Right","requestAnimationFrameCom","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","SubEditor","WillMemorize","resizeContainer","clientWidth","$main","maxWidth","maxHeight","addResizeListener","timeOutResize","func","wait","clearTimeout","addEventListener","videoControlsShortcutkey","ctrlKey","altKey","undoShortcutkey","bool","shiftKey","editorStateRollBack","addKeyboardListener","removeKeyboardListener","removeEventListener","updateOneState","stateObject","willStorage","storageSubs","willLoadTrack","loadTrack","cleanSubP","firstElementChild","subtitleDiv","p","firstChild","cleanStorageSubs","initSubTable","defaultSubUrl","defaultSubArray","handleSubRemove","handleSubEdit","handleSubClick","playerSeekTo","handleSubCancel","handleSubCommit","handleSubInsert","Math","abs","dSub","handleSubDownload","isSuccess","handlePlayerInit","frameWork","handleCurrentTime","second","action","seek","handleVideoSwitch","switchVideo","handleVideoCanPlay","toLowerCase","handleScrollIndexFrame","findIndex","handlePlayerPaused","paused","handleVideoPlaying","handleWaveClick","handleWaveContextmenu","handleSubBlockMove","originSub","translateSecond","tempSub","toastId_subBlockMoveError","handleSubBlockMoveError","canClose","handleSubBlockResize","handleSubBlockClick","handleDurationChange","handleAllSubTranslate","subTextArr","resultTextArr","translatedSubArray","handleAllSubTranslateDebounce","handleSubArrayBackupReset","backupSubArray","round","createEditorState","arr","prevProps","prevState","editorstate","funcProps","updateCurrentTime","Fragment","Helmet","charSet","subeditor_title","rel","subeditorIco","Test","test_title","controls","srcLang","App","closeOnClick","draggable","TOP_LEFT","component","NotSupportMobileWrapper","NotSupportMobile","Boolean","hostname","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ca21601b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/subeditor.928099fc.ico\";","module.exports = __webpack_public_path__ + \"static/media/welcom.b8b80cac.vtt\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/blackboard.233681a4.png\";","import subService from \"../services/subService\";\n\nclass Sub {\n  //start是秒数 如32秒 startTime是时间轴的形式 如 00:00:32\n  constructor(start, end, content) {\n    // number number string\n    this.start = Number(start.toFixed(3));\n    this.end = Number(end.toFixed(3));\n    this.content = content;\n    this.editing = false;\n  }\n\n  get startTime() {\n    return subService.toTime(this.start);\n  }\n\n  get endTime() {\n    return subService.toTime(this.end);\n  }\n\n  get length() {\n    return Number((this.end - this.start).toFixed(3));\n  }\n}\n\nexport default Sub;\n","import DT from \"duration-time-conversion\";\n// import logger from \"./logger\";\n\nexport function number2Time(number) {\n  const fixedNum = number.toFixed(3);\n  const time = DT.d2t(fixedNum);\n  //   logger.clog(\"转换为时间轴的值：\", time);\n  return time;\n}\n\nexport function time2Number(time) {\n  // logger.clog(time, DT.t2d(time).toFixed(3));\n  return DT.t2d(time).toFixed(3);\n}\n\nexport function getTimeLength(startTime, endTime) {\n  return (DT.t2d(endTime) - DT.t2d(startTime)).toFixed(3);\n}\n\nconst timeFormatter = {\n  number2Time,\n  time2Number,\n  getTimeLength\n};\n\nexport default timeFormatter;\n","import config from \"../config/config.json\";\n\n//当配置项是off时，关闭log。当不为off或者为空时 显示log\nlet displayLogOff = config.log === \"off\" ? true : false;\n\nexport function clog(...rest) {\n  if (displayLogOff) return;\n  console.log(...rest);\n}\n\nconst logger = {\n  clog\n};\n\nexport default logger;\n","import Joi from \"joi-browser\";\nimport _ from \"lodash\";\nimport logger from \"../utils/logger\";\n\n// 00:00:29 或 00:00:29.320\nconst timeRegx = /^\\d+:[0-5][0-9]:[0-5][0-9](\\.[0-9]{1,3})?$/;\n\nexport const schema = {\n  startTime: Joi.string()\n    .regex(timeRegx)\n    .required()\n    .min(8)\n    .label(\"开始时间\"),\n  endTime: Joi.string()\n    .regex(timeRegx)\n    .required()\n    .min(8)\n    .label(\"结束时间\"),\n  content: Joi.string()\n    .required()\n    .max(100)\n    .min(1)\n    .label(\"文本内容\"),\n  start: Joi.number(),\n  end: Joi.number(),\n  length: Joi.number().greater(0)\n};\n\n//错误提示 模版\nconst errorSchema = {\n  startTime: \"格式如 00:00:29.320格式，可以不带小数，最少8个字符\",\n  endTime: \"格式如 00:00:29.320，可以不带小数，最少8个字符\",\n  content: \"需要在1-100个字符之间，不能为空\",\n  start: \"必须为数字\",\n  end: \"必须为数字\",\n  length: \"不能为负值或0，开始时间要大于结束时间\"\n};\n\n//全局 变量 和 变量名 的对应\nconst labelSchema = {\n  startTime: \"开始时间\",\n  endTime: \"结束时间\",\n  content: \"字幕文本内容\",\n  start: \"起始秒数\",\n  end: \"结束秒数\",\n  length: \"时长\"\n};\n\nexport function getEditingSubSchema() {\n  return {\n    startTime: schema.startTime,\n    endTime: schema.endTime,\n    content: schema.content,\n    start: schema.start,\n    end: schema.end,\n    length: schema.length\n  };\n}\n\nexport function getEditingErrorSchema() {\n  return {\n    startTime: errorSchema.startTime,\n    endTime: errorSchema.endTime,\n    content: errorSchema.content,\n    start: errorSchema.start,\n    end: errorSchema.end,\n    length: errorSchema.length\n  };\n}\n\nconst defaultOption = {\n  //配置项 关闭提前中断 收集所有错误\n  abortEarly: false,\n  //允许对象拥有其他的未知属性\n  allowUnknown: true,\n  //忽略具有函数值的未知键\n  skipFunctions: true\n};\n\n//全属性校验\nexport function validate(obj, schema, config) {\n  // https://www.jianshu.com/p/e6e277c1fda2\n  const option = {\n    ...defaultOption,\n    ...config\n  };\n  const result = Joi.validate(obj, schema, option).error;\n  //无错误 暂时返回false 表示通过校验 无错误\n  if (!result) return false;\n  //有错误 则返回一个出错的属性path数组\n  logger.clog(\"editingSub校验结果，出现的错误：\", result);\n  let errorPaths = [];\n  result.details.map(d => errorPaths.push(d.path[0]));\n  //去除重复的值\n  return _.uniq(errorPaths);\n}\n\n//单属性校验\nexport function validateProperty(name, value, sigleSchema, config) {\n  const obj = { [name]: value };\n  const option = {\n    ...defaultOption,\n    abortEarly: true,\n    ...config\n  };\n  const result = Joi.validate(obj, sigleSchema, option).error;\n  //有错误 则返回true\n  return result ? true : false;\n}\n\n//将errors对象 转为errorMessages 可读的数组\nexport function errors2messages(errors) {\n  if (!errors) return [];\n  const keys = Object.keys(errors);\n  const errorMessages = keys.map(key => {\n    return labelSchema[key] + \": \" + errors[key];\n  });\n  if (errorMessages.length === 0) {\n    errorMessages.push(\" \");\n  }\n  //返回消息数组\n  return errorMessages;\n}\n\n//校验time类型 00:00:29.320\nexport function validateTime(time) {\n  //有错误返回true 无错误返回false\n  return validateProperty(\"startTime\", time, {\n    startTime: schema[\"startTime\"]\n  });\n}\n\nconst validateService = {\n  schema,\n  getEditingSubSchema,\n  getEditingErrorSchema,\n  validate,\n  validateProperty,\n  errors2messages,\n  validateTime\n};\n\nexport default validateService;\n","import Sub from \"../model/sub\";\nimport timeFormatter from \"../utils/timeFormatter\";\nimport logger from \"../utils/logger\";\nimport config from \"../config/config.json\";\nimport validateService from \"./validateService\";\n\n//sub数组 存在localstorage的key\nconst subArrayKey = config.sub_storage_key || \"DefaultSubs\";\n//sub数组的备份 存储key\nconst subArrayBackupKey = config.sub_storage_backup_key || \"DefaultSubsBackup\";\n\n//将字幕的秒数 转为 时:分:秒 的时间轴格式\nexport function toTime(number) {\n  return timeFormatter.number2Time(number);\n}\n\n//将时:分:秒 的时间轴格式 转为秒数\nexport function toNumber(time) {\n  return Number(timeFormatter.time2Number(time));\n}\n\n//计算两个time的时长\nexport function getTimeLength(startTime, endTime) {\n  return Number(timeFormatter.getTimeLength(startTime, endTime));\n}\n\n//PromiseExecutor 将字幕文件读取为字符串\nfunction readAsTextPE(resolve, reject, file) {\n  const reader = new FileReader();\n  reader.readAsText(file);\n  //出错时触发\n  reader.onerror = (error) => {\n    reject(error);\n  };\n  //读取完成时 成功或失败 触发\n  reader.onload = () => {\n    //读取失败时 result为null\n    resolve(reader.result);\n  };\n}\n\n//将字幕文件读取为字符串\nexport async function readSubFileAsText(subFile) {\n  let text = \"\";\n  try {\n    text = await new Promise((resolve, reject) =>\n      readAsTextPE(resolve, reject, subFile)\n    );\n  } catch (e) {\n    logger.clog(\"字幕文件读取失败；\", e);\n    e.message = \"字幕文件读取失败；\";\n    throw e;\n  }\n  return text;\n}\n\n//PromiseExecutor 使用track分析vtt字幕 返回完成后的cues对象\nfunction analyseSubPE(resolve, reject, subUrl) {\n  const $video = document.createElement(\"video\");\n  const $track = document.createElement(\"track\");\n  $video.appendChild($track);\n  $track.default = true;\n  $track.kind = \"metadata\";\n  //这里需要执行很长时间\n  $track.src = subUrl;\n  //执行中出错\n  $track.onerror = (error) => {\n    reject(error);\n  };\n  //执行完成后 成功或失败\n  $track.onload = () => {\n    //返回cues对象\n    resolve($track.track.cues);\n  };\n}\n\n//创建字幕数组 参数是一个vtt字幕文件的url\nexport async function createSubArray(subUrl) {\n  let subCues = null;\n  try {\n    subCues = await new Promise((resolve, reject) =>\n      analyseSubPE(resolve, reject, subUrl)\n    );\n  } catch (e) {\n    logger.clog(\"字幕装载失败：\", e);\n    e.message = \"字幕装载失败\";\n    throw e;\n  }\n  const VTTCues = Array.from(subCues || {});\n  logger.clog(\"得到VTTCues数组：\", VTTCues);\n  const subArray = VTTCues.map((c) => {\n    return new Sub(c.startTime, c.endTime, c.text);\n  });\n  const fullSubArray = subArray.map((sub) => mapSubToFullModel(sub));\n  logger.clog(\"得到字幕数组：\", fullSubArray);\n  return fullSubArray;\n}\n\n//创建vtt字幕的Blob对象 方便track分析 参数为vtt格式的字符串 返回该对象的url\nexport function createVttSubBlobUrl(vttText) {\n  const vttBlob = new Blob([vttText], {\n    type: \"text/vtt\",\n  });\n  logger.clog(\"vtt字幕Blob对象\", vttBlob);\n  return URL.createObjectURL(vttBlob);\n}\n\n//规范化 将sub对象的time时间轴类型转为秒数分别拿出来 映射成localstorage的存储模型\nexport function mapSubToFullModel(sub) {\n  //小数点后补零 没有小数点则不补\n  const fStartTime = formateTime(sub.startTime);\n  const fEndTime = formateTime(sub.endTime);\n  return {\n    start: toNumber(fStartTime),\n    startTime: fStartTime,\n    end: toNumber(fEndTime),\n    endTime: fEndTime,\n    length: getTimeLength(fStartTime, fEndTime),\n    content: sub.content,\n  };\n}\n\n//PromiseExecutor 将字幕数组存入localStorage\nfunction storageSubsPE(resolve, reject, subArray, isBackup = false) {\n  try {\n    const subs = subArray.map((sub) => mapSubToFullModel(sub));\n    const json = JSON.stringify(subs);\n    //是否是备份\n    isBackup\n      ? localStorage.setItem(subArrayBackupKey, json)\n      : localStorage.setItem(subArrayKey, json);\n    resolve(json);\n  } catch (e) {\n    logger.clog(\"subs存入local时出错\", e);\n    reject(e);\n  }\n}\n\n//把sub数组存入localstorage\nexport function saveSubArray(subArray, isBackup = false) {\n  //将sub对象的秒数转为time时间轴类型 并存入localStorage\n  return new Promise((resolve, reject) =>\n    storageSubsPE(resolve, reject, subArray, isBackup)\n  );\n}\n\n//把sub数组从localstorage中删除\nexport function cleanSubArray() {\n  localStorage.removeItem(subArrayKey);\n}\n\n//PromiseExecutor 从localStorage中读取sub数组 可能会解析出错以及得到null 这里对null返回空数组\nfunction getParseSubArrayPE(resolve, reject, isBackup = false) {\n  const key = isBackup ? subArrayBackupKey : subArrayKey;\n  const subsJson = localStorage.getItem(key);\n  try {\n    const subArray = JSON.parse(subsJson);\n    resolve(subArray || []);\n  } catch (e) {\n    logger.clog(\"读取local后，Json解析出错\", e);\n    reject(e);\n  }\n}\n\n//从localStorage中读取sub数组 如果是备份 则读取备份的数组\nexport function getSubArray(isBackup = false) {\n  return new Promise((resolve, reject) =>\n    getParseSubArrayPE(resolve, reject, isBackup)\n  );\n}\n\n//处理开始时间 和 结束时间的 格式， 需要一个已经受过输入校验的time\nfunction formateTime(validatedTime) {\n  //针对开始和结束时间 小数点后补零 正则表达式捕获\n  const timeRegx = /^(\\d+:[0-5][0-9]:[0-5][0-9])(\\.[0-9]{1,3})?$/;\n  const found = validatedTime.match(timeRegx);\n  //有小数点\n  if (found && found[2]) {\n    let str = found[2];\n    while (str.length < 4) {\n      str += \"0\";\n    }\n    return found[1] + str;\n  }\n  //无小数点\n  if (found && found[1]) {\n    return found[1];\n  }\n  //未找到 说明time不符合规范 暂时这么处理\n  return \"00:00:00\";\n}\n\n//得到字幕的时间长度\nexport function getSubLength(sub) {\n  //需要先校验startTime和endTime的格式是否正确\n  const schema = {\n    startTime: validateService.schema[\"startTime\"],\n    endTime: validateService.schema[\"endTime\"],\n  };\n  const error = validateService.validate(sub, schema, { abortEarly: true });\n  if (error) {\n    return sub.length;\n  } else {\n    return getTimeLength(formateTime(sub.startTime), formateTime(sub.endTime));\n  }\n}\n\n//将字幕数组 转为 vtt格式的字符串， 即text文本\nexport function mapSubArray2Text(subArray) {\n  // subArray的格式必须符合存储规范\n  const vttCueStrArray = subArray.map(\n    (sub, index) =>\n      `${index + 1}\n${sub.startTime} --> ${sub.endTime}\n${sub.content}\n`\n  );\n  const vttText = \"WEBVTT\\n\\n\" + vttCueStrArray.join(\"\\n\");\n  logger.clog(vttText);\n  return vttText;\n}\n\n//通过url 下载文件\nexport function downloadFromUrl(url, fileName) {\n  //创建一个a标签\n  const aLink = document.createElement(\"a\");\n  //设为不可见\n  aLink.style.display = \"none\";\n  //将a标签的href设为url\n  aLink.href = url;\n  //a标签的download属性 设置文件名 ，浏览器将自动检测正确的文件类型\n  aLink.download = fileName;\n  //放入body里\n  document.body.appendChild(aLink);\n  //点击a标签\n  aLink.click();\n  //从body中移除a标签\n  document.body.removeChild(aLink);\n}\n\n//加工出字幕数组的url\nexport function createSubArrayUrl(subArray) {\n  if (!subArray || subArray.length === 0) return \"\";\n  //将数组转为vtt格式的字符串\n  const vttText = mapSubArray2Text(subArray);\n  //由字符串 转为vtt Blob文件对象 然后创建url\n  return createVttSubBlobUrl(vttText);\n}\n\n//下载编辑好的字幕文件 从存储中读取\nexport async function downloadSubFile() {\n  try {\n    //从存储中拿到字幕数组\n    const subArray = await getSubArray();\n    //当读取到的subArray是null 或者为空数组时 返回false\n    if (!subArray || subArray.length === 0) return false;\n    //加工出字幕数组的url\n    const url = createSubArrayUrl(subArray);\n    //设置文件名 通过url 下载字幕文件\n    downloadFromUrl(url, \"字幕.vtt\");\n    //返回true 表示下载事件响应成功\n    return true;\n  } catch (e) {\n    logger.clog(\"下载字幕出错：\", e);\n    //下载失败 抛出异常\n    throw e;\n  }\n}\n\n//返回一个默认的初始字幕 给定开始和结束时间 时长根据条件变化\nexport function getDefaultSub(startTime, endTime) {\n  logger.clog(\"插入参数：\", startTime, endTime, typeof (startTime + endTime));\n  //默认文本\n  const defaultContent = \"默认文本\";\n  //默认的开始 结束 的秒数\n  let defaultStart = 0;\n  let defaultEnd = 0.001;\n  //当发现传入的两个参数都是Number时\n  if (typeof (startTime + endTime) === \"number\") {\n    defaultStart = Number(startTime.toFixed(3));\n    defaultEnd = Number(endTime.toFixed(3));\n    return new Sub(defaultStart, defaultEnd, defaultContent);\n  }\n  //不是number，则为字符串 校验传入的 时间轴类型\n  const startIsErr = validateService.validateTime(startTime);\n  const endIsErr = validateService.validateTime(endTime);\n  //如果通过校验\n  if (!startIsErr && !endIsErr) {\n    //格式化后 转为秒数\n    defaultStart = toNumber(formateTime(startTime));\n    defaultEnd = toNumber(formateTime(endTime));\n  }\n  //不是number 可能通过校验\n  return new Sub(defaultStart, defaultEnd, defaultContent);\n}\n\n// 交给worker前 需要将字幕数组转为规范模式\n//把subArray加工成url的worker 的工作内容 封装为blob\nfunction getSubToUrlWorkBlob() {\n  const workContent = `this.addEventListener('message', function (e) {\n    //转为文本\n    // subArray的格式必须符合存储规范\n    const subArray = e.data;\n    const vttCueStrArray = subArray.map(\n    (sub, index) =>\n      \\`\\${index + 1}\n\\${sub.startTime} --> \\${sub.endTime}\n\\${sub.content}\n\\`\n  );\n    const vttText = \"WEBVTT\\\\n\\\\n\" + vttCueStrArray.join(\"\\\\n\");\n    const vttBlob = new Blob([vttText], {\n      type: \"text/vtt\"\n    });\n    const subUrl = URL.createObjectURL(vttBlob);\n    this.postMessage(subUrl);\n  }, false);`;\n  return new Blob([workContent]);\n}\n\n//创建一个worker （进程） ， 用于加工出subArray的 url\nexport function createSubUrlWorker(receiveUrl) {\n  const workBlob = getSubToUrlWorkBlob();\n  const subUrlWorker = new Worker(URL.createObjectURL(workBlob));\n  //设置 收到worker回复时的处理\n  subUrlWorker.onmessage = (event) => {\n    //subUrlworker 回复的为最新的字幕url\n    const subUrl = event.data;\n    //接收worker回复的url\n    receiveUrl(subUrl);\n  };\n  return subUrlWorker;\n}\n\n//将字幕按照开始时间排序\nexport function sortSubArray(subArray) {\n  const sortedArray = [...subArray];\n  sortedArray.sort((pre, next) => {\n    return pre.start - next.start;\n  });\n  return sortedArray;\n}\n\n//将传入的字幕数组，转为字符串数组\nexport function createSubTextArr(subArray) {\n  //fullMode的subArray 当读取到的subArray是null 或者为空数组时 返回空数组\n  if (!subArray || subArray.length === 0) return [];\n  const subTextArr = subArray.map((sub) => sub.content);\n  return subTextArr;\n}\n\n//将存储的字幕数组，转为字符串数组\nexport async function createSubTextArrFromStorage() {\n  //从存储中拿到字幕数组\n  const subArray = await getSubArray();\n  return createSubTextArr(subArray);\n}\n\nconst subService = {\n  readSubFileAsText,\n  createSubArray,\n  createVttSubBlobUrl,\n  mapSubToFullModel,\n  saveSubArray,\n  cleanSubArray,\n  getSubArray,\n  getSubLength,\n  mapSubArray2Text,\n  createSubArrayUrl,\n  downloadFromUrl,\n  downloadSubFile,\n  getDefaultSub,\n  toTime,\n  toNumber,\n  getTimeLength,\n  createSubUrlWorker,\n  sortSubArray,\n  createSubTextArr,\n  createSubTextArrFromStorage,\n};\n\nexport default subService;\n","//PromiseExecutor 将文件读取为ArrayBuffer\nfunction readFilePE(resolve, reject, file, readerFnName) {\n  const reader = new FileReader();\n  // reader.readAsArrayBuffer(file);\n  // reader.\n  reader[readerFnName](file);\n  //出错时\n  reader.onerror = (e) => {\n    reject(e);\n  };\n  //读取完成时 成功/失败\n  reader.onload = () => {\n    //失败时 rs为null\n    resolve(reader.result);\n  };\n}\n\nexport async function readFileData(file) {\n  let buffer = 0;\n  try {\n    buffer = await new Promise((resolve, reject) =>\n    readFilePE(resolve, reject, file, \"readAsArrayBuffer\")\n    );\n  } catch (e) {\n    console.log(\"文件读取失败\", e);\n  }\n  return new Uint8Array(buffer);\n}\n\nexport async function fetchAsBlob(url) {\n  const res = await fetch(url);\n  return await res.blob();\n}\n\nexport async function fetchFileData(url) {\n  const blob = await fetchAsBlob(url);\n  console.log(\"fetched blob:\", blob);\n  return await readFileData(blob);\n}\n\n//合并 比如：传入两个unit8数组\nexport function merge(...buffers) {\n  //获取第一个unit数组的构造函数\n  const Constructor = buffers[0].constructor;\n  return buffers.reduce((pre, val) => {\n    //新建一个数组 长度为两个数组的长度和\n    const merge = new Constructor((pre.byteLength | 0) + (val.byteLength | 0));\n    merge.set(pre, 0);\n    merge.set(val, pre.byteLength | 0);\n    return merge;\n  }, new Constructor());\n}\n\nfunction fetchFileU8DataPE(resove, reject, url) {\n  let abortController = new AbortController();\n  let reader = null;\n  fetch(url, { signal: abortController.signal }).then((res) => {\n    //如果res.body是流\n    if (res.body && typeof res.body.getReader === \"function\") {\n      //获取 ReadableStream 的 reader , ReadableStream接口呈现了一个可读取的二进制流操作 Fetch 通过Response的属性 body提供了一个具体的 ReadableStream 对象。\n      reader = res.body.getReader();\n      // 8位无符号整型数组 Uint8Array与可读流ReadableStream 的协同用法。\n      let data = new Uint8Array();\n      //使用reader读取二进制数据  \"done\"是一个布尔型，\"value\"是一个Unit8Array\n      reader.read().then(function read({ done, value }) {\n        if (done) {\n          abortController.abort();\n          reader.cancel();\n          abortController = null;\n          reader = null;\n          resove(data);\n          return;\n        }\n        //合并两个unit8数组 (累加data\n        data = merge(data, value);\n        //递归\n        return reader.read().then(read);\n      });\n    } else {\n      reject(\"res.body不是流\");\n    }\n  });\n}\n\nexport async function fetchFileU8Data(url) {\n  let data = new Uint8Array();\n  try {\n    data = await new Promise((resolve, reject) =>\n      fetchFileU8DataPE(resolve, reject, url)\n    );\n  } catch (e) {\n    console.log(\"文件读取失败\", e);\n  }\n  return data;\n}\n\nexport async function fetchFileAsText(url) {\n  const blob = await fetchAsBlob(url);\n  console.log(\"fetched blob:\", blob);\n  let text = \"\";\n  try {\n    text = await new Promise((resolve, reject) =>\n    readFilePE(resolve, reject, blob, \"readAsText\")\n    );\n  } catch (e) {\n    console.log(\"文件读取失败\", e);\n  }\n  return text;\n}\n\n//通过url 下载文件给用户\nexport function downloadFromUrl(url, fileName) {\n  //创建一个a标签\n  const aLink = document.createElement(\"a\");\n  //设为不可见\n  aLink.style.display = \"none\";\n  //将a标签的href设为url\n  aLink.href = url;\n  //a标签的download属性 设置文件名 ，浏览器将自动检测正确的文件类型\n  aLink.download = fileName;\n  //放入body里\n  document.body.appendChild(aLink);\n  //点击a标签\n  aLink.click();\n  //从body中移除a标签\n  document.body.removeChild(aLink);\n}\n\nconst fileService = {\n  readFileData,\n  fetchFileData,\n  fetchFileAsText,\n  fetchFileU8Data,\n  downloadFromUrl\n};\n\nexport default fileService;\n","import fileService from \"../services/fileService\";\n\n//ffmpeg的worker\nlet worker = new Worker(\"/ffmpeg-worker-mp4.js\");\nlet outputUrl = \"\";\ninitFfmpegWorker(worker);\n\n//配置worker\nfunction initFfmpegWorker(worker) {\n  worker.onmessage = function (e) {\n    const msg = e.data;\n    switch (msg.type) {\n      case \"ready\":\n        console.log(\"shFFmpegWorker ready\");\n        break;\n      case \"stdout\":\n        console.log(msg.data);\n        break;\n      case \"stderr\":\n        console.log(msg.data);\n        break;\n      case \"done\":\n        console.log(\"shFFmpegWorker works done\", msg.data);\n        const res = msg.data.MEMFS[0];\n        const { name, data } = res;\n        //释放上一个url\n        URL.revokeObjectURL(outputUrl);\n        outputUrl = URL.createObjectURL(new File([data.buffer], name));\n        fileService.downloadFromUrl(outputUrl, name);\n        break;\n      default:\n        return;\n    }\n  };\n}\n\n//终止worker\nexport function terminateWork() {\n  worker.terminate();\n  worker = new Worker(\"/ffmpeg-worker-mp4.js\");\n  //将worker初始化\n  initFfmpegWorker(worker);\n}\n\nexport function postMessage(message) {\n  if (!worker) return;\n  worker.postMessage(message);\n}\n\nconst ffmpegWorker = {\n  postMessage,\n  terminateWork,\n};\n\nexport default ffmpegWorker;\n","import logger from \"../utils/logger\";\nimport ffmpegWorker from \"../utils/ffmpegWorker\"\nimport defaultPic from \"../resources/image/subEditor.png\";\nimport defaultSub from \"../resources/subtitles/welcom.vtt\";\nimport fileService from \"./fileService\";\n\nexport function createVideoType(fileType, isFileName = false) {\n  if (typeof fileType !== \"string\") return \"\";\n  //如果是filename\n  if (isFileName) {\n    const fileName = fileType;\n    const index = fileName.lastIndexOf(\".\");\n    const type = fileName.substring(index + 1);\n    return type === \"flv\" ? \"flvCustom\" : type;\n  }\n  //video/x-flv video/mp4\n  const videoRegx = /^video\\/(mp4|x-(flv))+$/;\n  const found = fileType.match(videoRegx);\n  logger.clog(\"匹配视频类型\", found);\n  const videoType =\n    found && found[2] ? found[2] + \"Custom\" : found ? found[1] : \"\";\n  logger.clog(\"匹配和拼接的结果\", videoType);\n  return videoType;\n}\n\n//返回默认的视频封面\nexport function getDefaultPicUrl() {\n  return defaultPic;\n}\n\n//默认字幕的地址\nexport function getDefaultSubUrl() {\n  return defaultSub;\n}\n\n//内封字幕 使用ffmpeg的subtitle视频滤镜 fileName: name.mp4 name.vtt\nexport async function encodeVideoWithSub(videoUrl, videoName, subUrl, subName) {\n  if (!videoUrl || !subUrl) {\n    throw new Error(\"视频或字幕地址为空\");\n  }\n  if (/\\.flv$/.test(videoName)) {\n    throw new Error(\"暂不支持flv格式的编码\");\n  }\n  const videoData = await fileService.fetchFileData(videoUrl);\n  const subData = await fileService.fetchFileData(subUrl);\n  const ttfData = await fileService.fetchFileData(\"/default.ttf\");\n  ffmpegWorker.postMessage({\n    type: \"run\",\n    TOTAL_MEMORY: 1024 * 1024 * 1024,\n    arguments: [\n      \"-hide_banner\",\n      \"-y\",\n      \"-i\",\n      videoName,\n      \"-vf\",\n      `subtitles=${subName}`,\n      `output-${videoName}`,\n    ],\n    MEMFS: [\n      { name: videoName, data: videoData },\n      { name: subName, data: subData },\n      { name: \"default.ttf\", data: ttfData },\n    ],\n  });\n}\n\nconst videoService = {\n  createVideoType,\n  getDefaultPicUrl,\n  getDefaultSubUrl,\n  encodeVideoWithSub,\n};\n\nexport default videoService;\n","const history = [];\nlet top = -1;\n\nexport function push(editorState) {\n  top++;\n  if (top < history.length) {\n    history[top] = editorState;\n    history.length = top + 1;\n    return history.length;\n  } else {\n    return history.push(editorState);\n  }\n}\n\nexport function pop() {\n  if (top >= 1) return history[--top];\n  throw new Error(\"已到栈底\");\n}\n\nexport function unPop() {\n  if (top + 1 < history.length) {\n    top++;\n    return history[top];\n  } else throw new Error(\"已到栈顶\");\n}\n\nexport function getTop() {\n  return top;\n}\n\nexport function getHistory() {\n  return history;\n}\n\nconst editorStateService = {\n  push,\n  pop,\n  unPop,\n  getTop,\n  getHistory,\n};\n\nexport default editorStateService;\n","const _subArray = new WeakMap();\nconst _currentTime = new WeakMap();\n\nclass EditorState {\n  constructor(subArray, currentTime) {\n    _subArray.set(this, subArray);\n    _currentTime.set(this, currentTime);\n  }\n\n  get subArray() {\n    return _subArray.get(this);\n  }\n\n  get currentTime() {\n    return _currentTime.get(this);\n  }\n}\n\nexport default EditorState;\n","import React from \"react\";\n\nconst BootstrapToast = ({ head, small, dataArray, type }) => {\n  const typeList = {\n    primary: \"#007aff\",\n    warning: \"#ff8300\"\n  };\n  return (\n    <div\n      className=\"toast show\"\n      role=\"alert\"\n      aria-live=\"assertive\"\n      aria-atomic=\"true\"\n      style={{\n        border: \"none\",\n        boxShadow: \"none\"\n      }}\n    >\n      <div className=\"toast-header\">\n        <svg\n          className=\"rounded mr-2\"\n          width=\"15\"\n          height=\"15\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          preserveAspectRatio=\"xMidYMid slice\"\n          focusable=\"false\"\n          role=\"img\"\n        >\n          <rect width=\"100%\" height=\"100%\" fill={typeList[type]}></rect>\n        </svg>\n        <strong className=\"mr-auto\">{head}</strong>\n        <small>{small || '提示'}</small>\n      </div>\n      <div className=\"toast-body\">\n        <ul className=\"list-group list-group-flush\">\n          {dataArray.map(value => (\n            <li className=\"list-group-item\" key={value}>\n              {value}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default BootstrapToast;\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Slide, Zoom, Flip, Bounce } from \"react-toastify\";\nimport BootstrapToast from \"../components/common/bootstrapToast\";\n\nexport const transitions = {\n  slide: Slide,\n  zoom: Zoom,\n  flip: Flip,\n  bounce: Bounce\n};\n\nexport function notify(\n  content,\n  positionStr = \"top_left\",\n  typeStr = \"DEFAULT\",\n  config = null,\n  transition = \"bounce\"\n) {\n  const postionStrUpper = (positionStr + \"\").toUpperCase();\n  const typeStrUpper = (typeStr + \"\").toUpperCase();\n  const toastConfig = {\n    position: toast.POSITION[postionStrUpper],\n    type: toast.TYPE[typeStrUpper],\n    // hideProgressBar: true,\n    transition: transitions[transition],\n    ...config\n  };\n  return toast(content, toastConfig);\n}\n\n//bootstrap样式的toast 需要一个字符串数组\nexport function bootstrapToast(\n  strArray,\n  type = \"warning\",\n  position = \"top_left\",\n  config,\n  transition = \"zoom\"\n) {\n  return notify(\n    <BootstrapToast head=\"请检查输入格式\" dataArray={strArray} type={type} />,\n    position,\n    \"default\",\n    config,\n    transition\n  );\n}\n\n//对应id的toast正在工作 则返回true 否则返回false\nexport function isActive(toastId) {\n  return toast.isActive(toastId);\n}\n\n//关闭一个提示\nexport function done(toastId) {\n  return toast.done(toastId);\n}\n\nconst notifier = {\n  notify,\n  bootstrapToast,\n  isActive,\n  done\n};\n\nexport default notifier;\n","import NProgress from \"nprogress\";\n\n//默认配置\nconst defaultConfig = {\n  minimum: 0.1\n};\n//初始化默认配置\nNProgress.configure(defaultConfig);\n\nfunction start(number) {\n  return number ? NProgress.start().set(number) : NProgress.start();\n}\n\nfunction set(number) {\n  return number && NProgress.set(number);\n}\n\nfunction inc(number) {\n  return number && NProgress.inc(number);\n}\n\nfunction done() {\n  NProgress.done();\n}\n\nconst progressor = {\n  start,\n  set,\n  inc,\n  done\n};\n\nexport default progressor;\n","import axios from \"axios\";\nimport progressor from \"../utils/progressor\";\n\n//https://github.com/axios/axios\n\n//请求拦截器\naxios.interceptors.request.use(\n  (config) => {\n    progressor.start();\n    return config;\n  },\n  (error) => {\n    progressor.done();\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\naxios.interceptors.response.use(\n  (res) => {\n    progressor.done();\n    return res;\n  },\n  (error) => {\n    progressor.done();\n    console.log(\"请求出错\", error, error.response.status);\n    return Promise.reject(error);\n  }\n);\n\n/**\n * http get\n * @param {String} url\n * @param {Object} params 一个简单对象 或者 一个 URLSearchParams对象\n * @param {Object} config headers等配置\n */\nexport function get(url, params = {}, config = {}) {\n  const axiosConfig = { params, ...config };\n  return axios.get(url, axiosConfig);\n}\n\n/**\n *\n * @param {String} url\n * @param {*} data\n * @param {Object} config\n */\nexport function post(url, data = {}, config = {}) {\n  return axios.post(url, data, config);\n}\n\nconst httpService = {\n  get,\n  post,\n};\n\nexport default httpService;\n","import httpService from \"../services/httpService\";\nimport md5 from \"js-md5\";\nimport _ from \"lodash\";\nimport config from \"../config/config.json\";\nimport { Base64 } from \"js-base64\";\n\n//非正式 不稳定\nexport function googleTranslate(lang, query) {\n  const url = new URL(\"https://translate.googleapis.com/translate_a/single\");\n  url.searchParams.append(\"client\", \"gtx\");\n  url.searchParams.append(\"sl\", \"auto\");\n  url.searchParams.append(\"dt\", \"t\");\n  url.searchParams.append(\"tl\", lang);\n  url.searchParams.append(\"q\", query);\n  // console.log(url.href);\n  httpService\n    .get(\n      \"https://translate.googleapis.com/translate_a/single\",\n      url.searchParams\n    )\n    .then((res) => {\n      console.log(\"谷歌翻译\", res);\n    });\n}\n\n//百度翻译 配置\nconst baiduTranslateUrl = new URL(\n  \"https://fanyi-api.baidu.com/api/trans/vip/translate\"\n);\nconst baiduTranslateAppid = \"20180619000178085\";\nconst baiduTranslateKey = \"ZEg5rb06NeW4wNjslD6F\";\nconst baiduTranslateParams = baiduTranslateUrl.searchParams;\nbaiduTranslateParams.append(\"appid\", baiduTranslateAppid);\n\n//百度翻译 函数 返回字符串，如果翻译结果为空 则返回空字符串\nexport function baiduTranslate(from, to, text) {\n  console.log(\"百度翻译\");\n  const salt = new Date().getTime();\n  const sign = md5(`${baiduTranslateAppid}${text}${salt}${baiduTranslateKey}`);\n  baiduTranslateParams.set(\"salt\", salt);\n  baiduTranslateParams.set(\"sign\", sign);\n  baiduTranslateParams.set(\"from\", from);\n  baiduTranslateParams.set(\"to\", to);\n  baiduTranslateParams.set(\"q\", text);\n\n  // const encodeHref = Base64.encodeURI(url.href);这个方法编码出的base64结尾没有=\n  const encodeHref = Base64.btoa(baiduTranslateUrl.href);\n  return httpService\n    .get(\n      `https://shproxy.herokuapp.com/shProxyApi/v1/get?url=${encodeHref}`,\n      {},\n      {\n        timeout: 60000,\n      }\n    )\n    .then((res) => {\n      console.log(\"百度翻译请求结果：\", res);\n      if (!res.data || !res.data.trans_result) {\n        //抛出异常\n        throw new Error(\"翻译出错\");\n      }\n      //无结果时 返回空数组\n      const resultTextArr =\n        (res.data.trans_result && res.data.trans_result.map((o) => o.dst)) ||\n        [];\n      return resultTextArr;\n    })\n    .catch((e) => {\n      //抛出异常\n      throw new Error(e);\n    });\n}\n\n//翻译\nexport function translate(from, to, text) {\n  //这里用的是百度翻译 如果以后要换翻译服务商 注意translateByLangKey函数里用的是百度的语言key列表\n  return baiduTranslate(from, to, text);\n}\n\n//限制调用 (首次立即调用，其后2秒内不会再次调用)\nexport const translateDebounce = _.debounce(translate, 2000, {\n  leading: true,\n  trailing: false,\n});\n\n//百度翻译 目标语言列表 (Object)\nconst baiduTranslateLanguages = {\n  auto: \"自动检测\",\n  zh: \"中文\",\n  en: \"英语\",\n  cht: \"繁体中文\",\n  yue: \"粤语\",\n  wyw: \"文言文\",\n  jp: \"日语\",\n  kor: \"韩语\",\n  fra: \"法语\",\n  spa: \"西班牙语\",\n  th: \"泰语\",\n  ara: \"阿拉伯语\",\n  ru: \"俄语\",\n  pt: \"葡萄牙语\",\n  de: \"德语\",\n  it: \"意大利语\",\n  el: \"希腊语\",\n  nl: \"荷兰语\",\n  pl: \"波兰语\",\n  bul: \"保加利亚语\",\n  est: \"爱沙尼亚语\",\n  dan: \"丹麦语\",\n  fin: \"芬兰语\",\n  cs: \"捷克语\",\n  rom: \"罗马尼亚语\",\n  slo: \"斯洛文尼亚语\",\n  swe: \"瑞典语\",\n  hu: \"匈牙利语\",\n  vie: \"越南语\",\n};\n\nexport function getBaiduTranslateLanguages() {\n  return baiduTranslateLanguages;\n}\n\n//返回与值对应的key\nexport function getBaiduTranslateLangKey(value) {\n  const key = _.findKey(baiduTranslateLanguages, (v) => v === value);\n  console.log(key);\n}\n\nconst translateArrSeparator = config.translate_arr_separator;\n//将文本数组 组成 以 translateArrSeparator(\\n) 分隔的一串文本\nexport function createTranslateTextFromStringArr(stringArr) {\n  if (!stringArr || stringArr.length === 0) return \"\";\n  return stringArr.join(translateArrSeparator);\n}\n\n//传入key值\nexport function translateByLangKey(fromKey, toKey, translateText) {\n  if (!baiduTranslateLanguages[fromKey] || !baiduTranslateLanguages[toKey])\n    return \"\";\n  //执行翻译 防止频繁点击\n  return translateDebounce(fromKey, toKey, translateText);\n}\n\nconst translater = {\n  googleTranslate,\n  baiduTranslate,\n  getBaiduTranslateLangKey,\n  getBaiduTranslateLanguages,\n  translateByLangKey,\n  translateDebounce,\n  createTranslateTextFromStringArr,\n};\n\nexport default translater;\n","const subEditorPath = \"/\";\nconst trackTest = \"/test\";\n// http://localhost:2020\nconst home = `${window.location.protocol}//${window.location.host}/`;\n\nexport function isMobile() {\n  console.log(\"用户agent：\", window.navigator.userAgent);\n  return (\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      window.navigator.userAgent\n    ) && !/Googlebot/i.test(window.navigator.userAgent)\n  );\n}\n\nconst guideService = {\n  home,\n  subEditorPath,\n  trackTest,\n  isMobile,\n};\n\nexport default guideService;\n","import React, { PureComponent } from \"react\";\nimport styled from \"styled-components\";\nimport guideService from \"../services/guideService\";\nimport SubEditorPackage from \"../../package.json\";\n\nconst HeaderWrap = styled.header`\n  //导航栏固定50px\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: hsla(0, 0%, 100%, 0.8);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n  .band {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    padding-left: 30px;\n    flex-grow: 6;\n  }\n\n  .body {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-grow: 1;\n\n    .buttons {\n      height: 100%;\n      display: flex;\n      align-items: center;\n    }\n\n    .links {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 40px;\n      i {\n        margin-right: 5px;\n      }\n      a {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 18px;\n        font-weight: 600;\n        padding: 0 10px 0 10px;\n\n        &:hover {\n          color: #66cccc;\n          //   text-decoration: underline;\n        }\n      }\n    }\n\n    .users {\n      height: 100%;\n      padding-right: 20px;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 20px;\n      .avatar {\n        border-radius: 50%;\n        height: 40px;\n        border: 1px solid #ddd;\n        padding: 4px;\n        display: block;\n      }\n      span {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n      }\n      span:hover {\n        color: #66cccc;\n      }\n    }\n  }\n`;\n\nconst LogoYa = styled.a`\n  text-decoration: none;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 400;\n  color: #66cccc;\n\n  :hover {\n    text-decoration: none;\n    color: #66cccc;\n  }\n\n  .version {\n    font-size: 12px;\n    font-weight: 600;\n    margin-left: 20px;\n    opacity: 0.4;\n    font-style: italic;\n    color: #262a3e;\n  }\n`;\n\nclass Header extends PureComponent {\n  state = {\n    user: {},\n  };\n\n  async componentDidMount() {}\n\n  handleLogout = async () => {\n    //刷新页面\n    document.location.reload();\n  };\n\n  render() {\n    return (\n      <HeaderWrap>\n        <div className=\"band\">\n          <LogoYa href={guideService.subEditorPath} title=\"Copyright © 2020 SH\">\n            SubEditor\n            <span className=\"version\">version {SubEditorPackage.version}</span>\n          </LogoYa>\n        </div>\n\n        <div className=\"body\">\n          <div className=\"links\">\n            <a href=\"https://github.com/Shirtiny/SubEditor\" title=\"前往Github\">\n              <i className=\"fa fa-github\" aria-hidden=\"true\"></i>Github\n            </a>\n          </div>\n          <div className=\"users\">\n            <a\n              href=\"/\"\n              title={this.state.user.userName || \"未登录\"}\n              style={{ marginRight: \"10px\" }}\n            >\n              <img\n                className=\"avatar\"\n                alt=\"avatar\"\n                src={\n                  this.state.user.avatarImage ||\n                  `${guideService.home}subEditorLogo.png`\n                }\n              />\n            </a>\n            {this.state.user.userName && (\n              <span onClick={this.handleLogout} title=\"退出登录\">\n                注销\n              </span>\n            )}\n          </div>\n        </div>\n      </HeaderWrap>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport DPlayer from \"react-dplayer\";\nimport flvjs from \"flv.js\";\nimport logger from \"../utils/logger\";\n\nconst VideoWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  max-height: 55vh;\n  justify-content: center;\n  align-items: center;\n  padding: 15px;\n  // border-bottom: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n\n  .dplayer {\n    // max-width: 50vw;\n    // max-height: 50vh;\n  }\n\n  .defaultSize {\n    max-width: 50vw;\n    max-height: 50vh;\n  }\n\n  .dplayer_disable {\n    pointer-events: none;\n  }\n\n  .playerBorder {\n    border: 4px solid #529393;\n    border-radius: 0.5em;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n  }\n\n  .hiddenSubs {\n    ::cue {\n      opacity: 0;\n    }\n  }\n`;\n\nclass VideoPlayer extends Component {\n  //组件是否需要更新 可以使用PureComponent来代替手写shouldComponentUpdate 它会自动浅比较前后的props有没有变化 这里不需要，因为VideoPlayer的props并不需要变化\n  shouldComponentUpdate(nextProps, nextState) {\n    return false;\n  }\n\n  //设置播放器\n  load = (player) => {\n    const { initPlayer } = this.props;\n    initPlayer(player);\n  };\n\n  error = () => {\n    const $playerContainer = document.getElementById(\"player\");\n    //错误时 将播放器设为默认大小  无法点击\n    $playerContainer.classList.add(\"dplayer_DefaultSize\", \"dplayer_disable\");\n  };\n\n  //视频可以播放\n  canPlay = () => {\n    const { player, onVideoCanPlay } = this.props;\n    //提示可播放 不然会有加载失败的提示残留\n    player.notice(\"√\", 1500, 0.8);\n    //将subArray 交给worker生成subUrl\n    onVideoCanPlay();\n    const $playerContainer = document.getElementById(\"player\");\n    //可以播放时 移除 无法点击\n    $playerContainer.classList.remove(\"dplayer_disable\");\n  };\n\n  //暂停时\n  pause = () => {\n    console.log(\"播放器暂停\");\n    const { onVideoPlayerPausedSwitch } = this.props;\n    onVideoPlayerPausedSwitch(true);\n  };\n\n  //播放时\n  play = () => {\n    console.log(\"播放器播放\");\n    const { onVideoPlayerPausedSwitch } = this.props;\n    onVideoPlayerPausedSwitch(false);\n  };\n\n  //播放中\n  playing = () => {\n    const { onVideoPlaying } = this.props;\n    onVideoPlaying();\n  };\n\n  //全屏时\n  fullscreen = () => {\n    const $playerContainer = document.getElementById(\"player\");\n    $playerContainer.classList.remove(\"playerBorder\");\n    $playerContainer.style.resize = \"\";\n  };\n\n  //全屏取消时\n  fullscreenCancel = () => {\n    const $playerContainer = document.getElementById(\"player\");\n    $playerContainer.classList.add(\"playerBorder\");\n    $playerContainer.style.resize = \"both\";\n  };\n\n  render() {\n    const { videoUrl, picUrl, subUrl } = this.props;\n    return (\n      <VideoWrapper id=\"playerBox\">\n        <DPlayer\n          id=\"player\"\n          className={`playerBorder dplayer_disable ${videoUrl ? \"\" : \"defaultSize\"}`}\n          style={{ resize: \"both\" }}\n          options={{\n            hotkey: false,\n            video: {\n              url: videoUrl,\n              pic: picUrl,\n              customType: {\n                flvCustom: function (videoElement, player) {\n                  logger.clog(\"支持flv\");\n                  if (flvjs.isSupported()) {\n                    const flvPlayer = flvjs.createPlayer({\n                      type: \"flv\",\n                      url: videoElement.src,\n                      hasAudio: true,\n                    });\n                    flvPlayer.attachMediaElement(videoElement);\n                    flvPlayer.load();\n                  }\n                },\n              },\n            },\n            subtitle: {\n              url: subUrl,\n              type: \"webvtt\",\n              fontSize: \"25px\",\n              bottom: \"3%\",\n              color: \"rgb(37, 211, 211)\",\n            },\n            contextmenu: [\n              {\n                text: \"SubEditor\",\n                // link: \"https://github.com/DIYgod/DPlayer\",\n              },\n              {\n                text: \"使内容的高度适应于宽度\",\n                click: (player) => {\n                  const $playerContainer = document.getElementById(\"player\");\n                  $playerContainer.style.height = \"\";\n                },\n              },\n              {\n                text: \"默认宽度和高度\",\n                click: (player) => {\n                  const $playerContainer = document.getElementById(\"player\");\n                  $playerContainer.style.height = \"\";\n                  $playerContainer.style.width = \"90%\";\n                },\n              },\n              {\n                text: \"chrome字幕隐藏/显示\",\n                click: (player) => {\n                  const video = player.video;\n                  const index = video.className.indexOf(\"hiddenSubs\");\n                  if (index > 0) {\n                    video.classList.remove(\"hiddenSubs\");\n                  } else {\n                    video.classList.add(\"hiddenSubs\");\n                  }\n                },\n              },\n            ],\n            theme: \"#ccc\",\n            loop: true,\n          }}\n          onLoad={this.load}\n          onError={this.error}\n          onCanplay={this.canPlay}\n          onPause={this.pause}\n          onPlay={this.play}\n          onPlaying={this.playing}\n          onFullscreen={this.fullscreen}\n          onFullscreenCancel={this.fullscreenCancel}\n        />\n      </VideoWrapper>\n    );\n  }\n}\n\nexport default VideoPlayer;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst InputYinput = styled.input`\n  font-size: 14px;\n  color: #495057;\n  background-color: #fff;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  background-clip: padding-box;\n\n  height: calc(1.5em + 0.5rem + 2px);\n  padding: 0.25rem 0.25rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem;\n\n  &.input_success {\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\n    }\n  }\n  &.input_error {\n    border-color: #dc3545;\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(232, 43, 43, 0.3);\n    }\n  }\n`;\n\nconst Input = ({\n  className,\n  type,\n  name,\n  value,\n  onChange,\n  disabled,\n  style,\n  errors,\n}) => {\n  return (\n    <InputYinput\n      disabled={disabled}\n      className={[...className, errors[name] ? \"input_error\" : \"input_success\"]}\n      type={type}\n      value={value}\n      onChange={(event) => onChange(name, event.currentTarget.value)}\n      style={{ ...style }}\n      onClick={(e) => {\n        e.stopPropagation();\n      }}\n    />\n  );\n};\n\nexport default Input;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Input from \"./common/input\";\n\nconst RowWrap = styled.div`\n  .rowClasses {\n    background-color: #f2f2f2;\n    // border-bottom: 1px solid rgb(36, 41, 45);\n    min-width: 650px;\n    transition: all 0.15s ease;\n\n    //取消浏览器的双击选中\n    -moz-user-select: none; /*火狐*/\n    -webkit-user-select: none; /*webkit浏览器*/\n    -ms-user-select: none; /*IE10*/\n    -khtml-user-select: none; /*早期浏览器*/\n    user-select: none;\n\n    &.odd {\n      background-color: #fff;\n    }\n\n    &.highlight {\n      background-color: #2196f3;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    &.illegal {\n      background-color: #c75123;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    .rowT {\n      padding: 10px 5px;\n      text-align: center;\n    }\n\n    &: hover {\n      background-color: #529393;\n      color: #fff;\n      //字稍微大些\n      font-size: 14px;\n    }\n\n    &.onEditing {\n      background-color: #66cccc;\n\n      //编辑时返回隐藏 非编辑状态返回显示\n      .display_onEditing {\n        display: block !important;\n      }\n      .hidden_onEditing {\n        display: none !important;\n      }\n    }\n\n    .editing_default_hidden {\n      //默认隐藏\n      display: none;\n      width: 100%;\n      height: 100%;\n    }\n\n    .operation {\n      display: flex;\n      justify-content: center;\n\n      i {\n        width: 25px;\n        cursor: pointer;\n        font-size: 16px;\n        &: hover {\n          //图标粗些\n          font-weight: 600;\n          // color: #ccc;\n          color: #82a8b7;\n          &.deleteIcon {\n            color: #f5f239;\n          }\n        }\n      }\n    }\n  }\n\n  .lineBox {\n    display: none;\n    height: 0;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    bottom: 0px;\n    border-bottom: 0px dashed #529393;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    transition: color, border-color 0.3s ease-in-out;\n    &:hover {\n      display: block;\n      bottom: -5px;\n      border-bottom: 10px solid #02c0ff;\n      .insertBtn {\n        color: #02c0ff !important;\n        bottom: 10px;\n      }\n    }\n  }\n\n  .insertBtn {\n    position: absolute;\n    right: 4px;\n    width: 20px;\n    height: 20px;\n    bottom: 15px;\n  }\n\n  //当scroll滚到当前row row的动画\n  .scrollToRowAnimation {\n    animation: scrollToRowAnimation 3s;\n    //播放次数无限制\n    // animation-iteration-count: infinite;\n  }\n\n  .scrollIndexBackColor {\n    transition: background-color 0.5s ease-in;\n    background-color: #04e8e8 !important;\n    &:hover {\n      color: black;\n    }\n  }\n`;\n//单击次数 用来区分双击和单击 解决onDoubleClick时触发onclick的问题\nlet clickCount = 0;\n\nconst SubRow = ({\n  index,\n  style,\n  className,\n  rowData: sub,\n  onRowRemove,\n  onRowEdit,\n  onRowClick,\n  onRowCommit,\n  onRowCancel,\n  onRowInsert,\n  editingIndex,\n  editingSub,\n  errors,\n  onInputValueChange,\n  displayIndex,\n  scrollIndex,\n}) => {\n  const hiddenOnEditing = \"hidden_onEditing\";\n  const displayOnEditing = [\"editing_default_hidden\", \"display_onEditing\"].join(\n    \" \"\n  );\n  //取消浏览器的双击选中 使用了css代替\n  // document.onselectstart = function() {\n  //   return false;\n  // };\n  return (\n    <RowWrap>\n      <div\n        key={index}\n        style={style}\n        className={[\n          className,\n          \"rowClasses\",\n          index % 2 ? \"odd\" : \"\",\n          editingIndex === index ? \"onEditing\" : \"\",\n          scrollIndex === index ? \"scrollIndexBackColor\" : \"\",\n        ].join(\" \")}\n        onClick={() => {\n          clickCount += 1;\n          setTimeout(() => {\n            if (clickCount === 1) {\n              onRowClick(sub);\n            } else if (clickCount === 2) {\n              onRowEdit(sub);\n            }\n            //重置count\n            clickCount = 0;\n          }, 200);\n        }}\n        onKeyUp={(e) => {\n          e.preventDefault();\n          //阻止事件进一步传播\n          e.stopPropagation();\n          switch (e.keyCode) {\n            //回车 提交\n            case 13:\n              onRowCommit(sub);\n              break;\n            //Esc 取消编辑\n            case 27:\n              onRowCancel();\n              break;\n            default:\n              return;\n          }\n        }}\n      >\n        {/* 操作按钮 */}\n        <div className=\"rowT operation\" style={{ width: 90 }}>\n          <i\n            onClick={(e) => {\n              e.stopPropagation();\n              onRowEdit(sub);\n            }}\n            className={`fa fa-pencil ${hiddenOnEditing}`}\n            title=\"编辑\"\n          ></i>\n          <i\n            onClick={(e) => {\n              e.stopPropagation();\n              onRowCommit(sub);\n            }}\n            className={`fa fa-check-circle-o ${displayOnEditing}`}\n            title=\"保存\"\n          ></i>\n          <i\n            className=\"fa fa-times deleteIcon\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onRowRemove(sub, index);\n            }}\n            title=\"删除\"\n          ></i>\n        </div>\n        {/* 开始时间 */}\n        <div className=\"rowT\" style={{ width: 100 }}>\n          <span className={`${hiddenOnEditing}`}>{sub.startTime}</span>\n          <Input\n            className={[displayOnEditing]}\n            type=\"text\"\n            name=\"startTime\"\n            value={editingSub.startTime}\n            onChange={onInputValueChange}\n            errors={errors}\n          />\n        </div>\n        {/* 结束时间 */}\n        <div className=\"rowT\" style={{ width: 100 }}>\n          <span className={`${hiddenOnEditing}`}>{sub.endTime}</span>\n          <Input\n            className={[displayOnEditing]}\n            type=\"text\"\n            name=\"endTime\"\n            value={editingSub.endTime}\n            onChange={onInputValueChange}\n            errors={errors}\n          />\n        </div>\n        {/* 时长 */}\n        <div className=\"rowT\" style={{ width: 100 }}>\n          <span className={`${hiddenOnEditing}`}>{sub.length}</span>\n          <span className={`${displayOnEditing}`}>{editingSub.length}</span>\n        </div>\n        {/* 文本内容 */}\n        <div className=\"rowT\" style={{ flex: 1 }}>\n          <span className={`${hiddenOnEditing}`}>{sub.content}</span>\n          <Input\n            className={[displayOnEditing]}\n            type=\"text\"\n            name=\"content\"\n            value={editingSub.content}\n            onChange={onInputValueChange}\n            errors={errors}\n          />\n        </div>\n        {/* 序号 ， 取消按钮 ， 插入按钮*/}\n        <div className=\"rowT operation\" style={{ width: 50 }}>\n          <span\n            style={{ display: displayIndex ? \"block\" : \"none\" }}\n            className={`${hiddenOnEditing}`}\n          >\n            {index}\n          </span>\n          <i\n            onClick={(e) => {\n              //阻止事件传播 （阻止传给父元素\n              e.stopPropagation();\n              onRowCancel(sub);\n            }}\n            className={`fa fa-reply ${displayOnEditing}`}\n            title=\"取消编辑\"\n          ></i>\n          <div\n            className={`${hiddenOnEditing} lineBox `}\n            style={{ display: displayIndex ? \"none\" : \"block\" }}\n          >\n            <i\n              className={`fa fa-plus-square  insertBtn`}\n              title=\"插入字幕\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onRowInsert(sub);\n              }}\n            ></i>\n          </div>\n        </div>\n      </div>\n    </RowWrap>\n  );\n};\n\nexport default SubRow;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst HeaderRowWrap = styled.div`\n  background: #c0d9d9;\n  display: flex;\n  min-width: 650px;\n\n  .rowT {\n    padding: 10px 5px;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    text-align: center;\n    text-transform: none;\n  }\n\n  .buttonLike {\n    position: relative;\n    background: #ffffff;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 30px;\n    // margin-right: 10px;\n    padding: 9px 16px;\n    border-style: none;\n    border-radius: 10px;\n    overflow: hidden;\n    transition: all 200ms linear 0s;\n\n    i {\n      margin-right: 5px;\n    }\n  }\n\n  .switchButton {\n    cursor: pointer;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n      span {\n        display: block;\n      }\n    }\n  }\n\n  .stayButton {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    cursor: pointer;\n    span {\n      position: relative;\n      top: 4px;\n    }\n    transition: all 0.3s ease;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n    }\n  }\n`;\n\nconst SubHeaderRow = props => {\n  const {\n    displayIndex,\n    onDisplayIndexSwitch,\n    subArrayLenIsZero,\n    onInsert\n  } = props;\n  return (\n    <HeaderRowWrap>\n      <div className=\"rowT\" style={{ width: 100 }}>\n        <div className=\"buttonLike\">\n          <span style={{ display: subArrayLenIsZero ? \"none\" : \"block\" }}>\n            <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>编辑\n          </span>\n          <div\n            onClick={() => onInsert()}\n            className=\"stayButton\"\n            style={{ display: subArrayLenIsZero ? \"block\" : \"none\" }}\n          >\n            <span>\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>新建\n            </span>\n          </div>\n        </div>\n      </div>\n      <div className=\"rowT\" style={{ width: 100 }}>\n        <span className=\"buttonLike\">\n          <i className=\"fa fa-step-backward\" aria-hidden=\"true\"></i>\n          开始\n        </span>\n      </div>\n      <div className=\"rowT\" style={{ width: 100 }}>\n        <span className=\"buttonLike\">\n          <i className=\"fa fa-step-forward\" aria-hidden=\"true\"></i>\n          结束\n        </span>\n      </div>\n      <div className=\"rowT\" style={{ width: 100 }}>\n        <span className=\"buttonLike\">\n          <i className=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n          时长\n        </span>\n      </div>\n      <div className=\"rowT\" style={{ flex: 1 }}>\n        <span className=\"buttonLike \">\n          <i className=\"fa fa-text-width\" aria-hidden=\"true\"></i>内容\n        </span>\n      </div>\n      <div className=\"rowT\" style={{ width: 50 }}>\n        <div\n          className=\"buttonLike switchButton\"\n          onClick={() => onDisplayIndexSwitch(!displayIndex)}\n        >\n          <span\n            style={{ display: displayIndex ? \"block\" : \"none\" }}\n            className=\" fa fa-sort-amount-asc\"\n            title=\"切换到功能\"\n          ></span>\n          <span\n            style={{ display: displayIndex ? \"none\" : \"block\" }}\n            className=\" fa fa-sliders\"\n            title=\"切换到序号\"\n          ></span>\n        </div>\n      </div>\n    </HeaderRowWrap>\n  );\n};\n\nexport default SubHeaderRow;\n","import React, { PureComponent } from \"react\";\nimport { Table } from \"react-virtualized\";\nimport styled from \"styled-components\";\nimport SubRow from \"./subRow\";\nimport SubHeaderRow from \"./subHeaderRow\";\nimport subService from \"../services/subService\";\nimport validateService from \"../services/validateService\";\nimport logger from \"../utils/logger\";\nimport notifier from \"../utils/notifier\";\nimport lihuaMikuPng from \"../resources/image/lihuaMiku.png\";\n\nconst TableWrapper = styled.div`\n  height: 100%;\n  .ReactVirtualized__Table {\n    font-size: 12px;\n    background: #e3eeee;\n    // background: #c0d9d9; root背景色\n\n    .ReactVirtualized__Table__Grid {\n      outline: none;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n      border-radius: 0.5rem;\n      min-width: 650px;\n      background-color: #e3eeee;\n      background-image: url(${lihuaMikuPng});\n      background-repeat: no-repeat;\n      background-position: 98% 98%;\n\n      .ReactVirtualized__Grid__innerScrollContainer {\n        min-width: 650px;\n      }\n    }\n\n    .gridScrollWrap {\n      overflow: hidden !important;\n      :hover {\n        overflow-y: scroll !important;\n\n        // fireFox\n        scrollbar-color: #6fd1d8 #fff;\n        // scrollbar-color: light;\n        scrollbar-width: thin;\n        // scrollbar-width: none;\n\n        //Safari and Chrome\n        ::-webkit-scrollbar {\n          // display: none;\n          width: 5px; /*高宽分别对应横竖滚动条的尺寸*/\n        }\n        ::-webkit-scrollbar-thumb {\n          /*滚动条里面小方块*/\n          border-radius: 10px;\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          background: #6fd1d8;\n          height: 10px;\n        }\n\n        ::-webkit-scrollbar-track {\n          /*滚动条里面轨道*/\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          border-radius: 10px;\n          background: #fff;\n        }\n      }\n    }\n\n    .input,\n    .textarea {\n      border: none;\n      padding: 5px;\n      min-height: 30px;\n      font-size: 12px;\n      text-align: center;\n      background-color: #3a3a3a;\n    }\n\n    .textarea {\n      resize: vertical;\n    }\n\n    p {\n      line-height: 1.5;\n      margin: 0;\n    }\n  }\n`;\n\n//PureComponent要注意它是浅比较 https://react.docschina.org/docs/optimizing-performance.html\nclass SubTable extends PureComponent {\n  //没用到\n  $tableRef = React.createRef();\n\n  state = {\n    //正在编辑的字幕序号\n    editingIndex: -1,\n    //当前正在编辑的字幕信息\n    editingSub: {\n      start: 0,\n      startTime: \"\",\n      end: 0,\n      endTime: \"\",\n      length: 0,\n      content: \"\",\n    },\n    errors: {},\n    //是否显示index true：显示序号  false: 显示插入按钮\n    displayIndex: true,\n  };\n\n  //校验规则\n  schema = {};\n\n  //错误信息模版\n  errorSchema = {};\n\n  //toastId 全属性校验 提交时提示\n  toastId_validate = null;\n\n  //toastId 单属性校验 输入时提示\n  toastId_validatePropertys = {\n    startTime: null,\n    endTime: null,\n    content: null,\n  };\n\n  componentDidMount() {\n    //初始化校验规则 、 错误信息模版 、变量名\n    this.schema = validateService.getEditingSubSchema();\n    this.errorSchema = validateService.getEditingErrorSchema();\n  }\n\n  componentDidUpdate() {\n    // this.scrollToButtom();\n  }\n\n  //使用PureComponent 来代替手写shouldComponentUpdate\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return true;\n  // }\n\n  //全表单校验\n  validate = () => {\n    //执行校验\n    const errorPaths = validateService.validate(\n      this.state.editingSub,\n      this.schema\n    );\n    //定义错误对象\n    let errors = {};\n    //如果数据格式的校验有错误\n    if (errorPaths) {\n      errorPaths.map((path) => (errors[path] = this.errorSchema[path]));\n    }\n    //特殊校验\n    // ...\n    //无错误 返回false 表示通过校验 无错误对象\n    if (Object.keys(errors).length === 0) {\n      //更新state为空\n      this.setState({ errors: {} });\n      return false;\n    } else {\n      //更新state\n      this.setState({ errors });\n      //返回错误对象\n      return errors;\n    }\n  };\n\n  //全校验提示\n  toast_validate = (errorMessages) => {\n    //关闭之前的提示\n    notifier.done(this.toastId_validate);\n    this.toastId_validate = notifier.bootstrapToast(\n      errorMessages,\n      \"warning\",\n      \"top_left\",\n      { autoClose: 10000 },\n      \"flip\"\n    );\n  };\n\n  //单属性校验\n  validateProperty = (name, value) => {\n    const schema = {\n      [name]: this.schema[name],\n    };\n    // 校验无错返回false 有错返回true\n    const flag = validateService.validateProperty(name, value, schema);\n    //拿到原errors的值\n    let errors = { ...this.state.errors };\n    // 有错  添加或修改errors的属性 返回新建errors, 无错 删除errors的属性 返回false\n    if (flag) {\n      errors[name] = this.errorSchema[name];\n      //更新 state\n      this.setState({ errors });\n      //返回错误对象\n      let error = { [name]: this.errorSchema[name] };\n      return error;\n    } else {\n      //无错 则清掉原state里errors对象的相应属性\n      delete errors[name];\n      //更新 state\n      this.setState({ errors });\n      //返回false\n      return false;\n    }\n  };\n\n  // 单属性校验提示\n  toast_validateProperty = (name, errorMessage) => {\n    //把除了自己以外的单属性提示关闭\n    //先得到自己的id\n    const currentId = this.toastId_validatePropertys[name];\n    //得到对象内所有属性的值 返回数组\n    const ids = Object.values(this.toastId_validatePropertys);\n    //把currentId从 ids数组中删除\n    const index = ids.indexOf(currentId);\n    ids.splice(index, 1);\n    //关闭 ids数组的所有值\n    ids.map((id) => notifier.done(id));\n    //当 currentId 没有在工作时 弹出新的提示\n    if (!notifier.isActive(currentId)) {\n      this.toastId_validatePropertys[name] = notifier.notify(\n        errorMessage.length > 0 && errorMessage[0],\n        \"bottom_left\",\n        \"default\",\n        {\n          hideProgressBar: true,\n          autoClose: 5000,\n        },\n        \"flip\"\n      );\n    }\n  };\n\n  //得到input的值 更新state.editingSub\n  handleInputValue = (name, value) => {\n    const editingSub = { ...this.state.editingSub };\n    editingSub[name] = value;\n    //单属性错误校验\n    const error = this.validateProperty(name, value);\n    //有错 则提示\n    if (error) {\n      let errorMessage = validateService.errors2messages(error);\n      this.toast_validateProperty(name, errorMessage);\n    } else {\n      //无错 则关闭提示\n      notifier.done(this.toastId_validatePropertys[name]);\n      //更新长度\n      editingSub.length = subService.getSubLength(editingSub);\n    }\n    //更新state\n    this.setState({ editingSub }, () => {\n      // logger.clog(\"更新input：\", name, value, this.state.editingSub);\n    });\n  };\n\n  //在编辑时 回显表单数据 校验数据以更新errors\n  handleRowEdit = (sub) => {\n    const { subArray } = this.props;\n    const editingSub = subService.mapSubToFullModel(sub);\n    this.setState({ editingSub }, () => {\n      //校验数据 更新errors\n      this.validate();\n      logger.clog(\"表单回显：\", this.state.editingSub);\n    });\n    // onEdit(sub);\n    const editingIndex = subArray.indexOf(sub);\n    this.setState({ editingIndex });\n  };\n\n  handleRowClick = (sub) => {\n    const { onClick } = this.props;\n    onClick(sub);\n  };\n\n  //提交前\n  handleRowCommit = (sub) => {\n    const { onCommit } = this.props;\n    //校验全表单数据\n    const errors = this.validate();\n    //有错误 则不提交\n    if (errors) {\n      const errorMessages = validateService.errors2messages(errors);\n      //打出提示\n      this.toast_validate(errorMessages);\n      return;\n    } else {\n      //无错 则关闭提示\n      notifier.done(this.toast_validate);\n      //取消编辑状态\n      this.handleRowCancel();\n      //提交 传入原sub 和 填写的sub， 传值前将填写的sub格式化\n      onCommit(sub, subService.mapSubToFullModel(this.state.editingSub));\n    }\n  };\n\n  handleRowRemove = (sub, index) => {\n    const { onRemove } = this.props;\n    if (index === this.state.editingIndex) this.handleRowCancel();\n    onRemove(sub);\n  };\n\n  //取消编辑\n  handleRowCancel = () => {\n    const editingIndex = -1;\n    this.setState({ editingIndex });\n  };\n\n  //改变table的背景色 ，ps： table被header 和 grid覆盖\n  tableBackGroundColor = (subArray) => {\n    const color = subArray && subArray.length === 0 ? \"#e3eeee\" : \"#c0d9d9\";\n    let $table = document.getElementById(\"vSubTable\");\n    if ($table) {\n      $table.style.backgroundColor = color;\n    }\n  };\n\n  //序号显示 的切换\n  handleDisplayIndexSwitch = (boolean) => {\n    const displayIndex = boolean ? true : false;\n    this.setState({ displayIndex });\n  };\n\n  //插入\n  handleRowInsert = (sub) => {\n    const { onInsert } = this.props;\n    onInsert(sub);\n  };\n\n  //将grid的滚动条 滚到底部\n  scrollToButtom = () => {\n    //移动滚条到底部 固定移动一格更好？\n    const scrollWrap = document.getElementsByClassName(\"gridScrollWrap\")[0];\n    let scrollTop = scrollWrap.scrollTop;\n    let scrollHeight = scrollWrap.scrollHeight;\n    let clientHeight = scrollWrap.clientHeight;\n    console.log(\n      scrollWrap,\n      \"scrollHeight:\",\n      scrollHeight,\n      \";scrollTop:\",\n      scrollTop,\n      \";clientHeight:\",\n      clientHeight,\n      \";scrollHeight - scrollTop - clientHeight:\",\n      scrollHeight - scrollTop - clientHeight\n    );\n    //开始移动\n    scrollWrap.scrollTop =\n      scrollWrap.scrollTop + (scrollHeight - scrollTop - clientHeight);\n  };\n\n  render() {\n    const { subArray, scrollIndex, container, onInsert } = this.props;\n    const { containerHeight, containerWidth } = container;\n    //table背景色 无内容时为银色 有内容和root背景一样\n    this.tableBackGroundColor(subArray);\n    return (\n      <TableWrapper\n        onKeyUp={(e) => {\n          e.preventDefault();\n          //阻止事件进一步传播\n          e.stopPropagation();\n          switch (e.keyCode) {\n            //Esc 取消编辑\n            case 27:\n              this.handleRowCancel();\n              break;\n            default:\n              return;\n          }\n        }}\n      >\n        <Table\n          id=\"vSubTable\"\n          ref={this.$tableRef}\n          headerHeight={55}\n          width={containerWidth / 2}\n          height={containerHeight}\n          gridClassName={\"gridScrollWrap\"}\n          rowHeight={60}\n          scrollToIndex={scrollIndex}\n          rowCount={subArray.length}\n          rowGetter={({ index }) => subArray[index]}\n          headerRowRenderer={() => (\n            <SubHeaderRow\n              {...this.state}\n              subArrayLenIsZero={subArray && subArray.length === 0}\n              onInsert={onInsert}\n              onDisplayIndexSwitch={this.handleDisplayIndexSwitch}\n            />\n          )}\n          rowRenderer={(rowProps) => (\n            <SubRow\n              {...rowProps}\n              onRowRemove={this.handleRowRemove}\n              onRowEdit={this.handleRowEdit}\n              onRowClick={this.handleRowClick}\n              onRowCommit={this.handleRowCommit}\n              onRowCancel={this.handleRowCancel}\n              onRowInsert={this.handleRowInsert}\n              onInputValueChange={this.handleInputValue}\n              {...this.state}\n              scrollIndex={scrollIndex}\n            />\n          )}\n        ></Table>\n      </TableWrapper>\n    );\n  }\n}\n\nexport default SubTable;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst VideoControlBox = styled.div`\n  display: flex;\n  margin-bottom: 15px;\n  justify-content: space-around;\n\n  i {\n    position: relative;\n  }\n  .controlIcon {\n    color: #529393;\n    transition: color 0.2s ease;\n    &:hover {\n      color: #66cccc;\n    }\n  }\n`;\n\nconst VideoControls = ({ onAction, playerPaused }) => {\n  return (\n    <VideoControlBox>\n      <i\n        className=\"fa fa-fast-backward controlIcon shToolTip\"\n        shtitle=\"ctrl alt ← 回退10秒\"\n        onClick={() => onAction(-10)}\n      ></i>\n      <i\n        className=\"fa fa-backward controlIcon shToolTip\"\n        shtitle=\"ctrl ← 回退1秒\"\n        onClick={() => onAction(-1)}\n      ></i>\n      <i\n        className=\"fa fa-step-backward controlIcon shToolTip\"\n        shtitle=\"← 回退0.1秒\"\n        onClick={() => onAction(-0.1)}\n      ></i>\n      {!playerPaused ? (\n        <i\n          className=\"fa fa-pause controlIcon shToolTip\"\n          shtitle=\"space 暂停\"\n          onClick={() => onAction()}\n        ></i>\n      ) : (\n        <i\n          className=\"fa fa-play controlIcon shToolTip\"\n          shtitle=\"space 播放\"\n          onClick={() => onAction()}\n        ></i>\n      )}\n      <i\n        className=\"fa fa-step-forward controlIcon shToolTip\"\n        shtitle=\"→ 前进0.1秒\"\n        onClick={() => onAction(0.1)}\n      ></i>\n      <i\n        className=\"fa fa-forward controlIcon shToolTip\"\n        shtitle=\"ctrl → 前进1秒\"\n        onClick={() => onAction(1)}\n      ></i>\n      <i\n        className=\"fa fa-fast-forward controlIcon shToolTip\"\n        shtitle=\"ctrl alt → 前进10秒\"\n        onClick={() => onAction(10)}\n      ></i>\n    </VideoControlBox>\n  );\n};\n\nexport default VideoControls;\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nconst RippleButtonWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  user-select: none;\n  position: relative;\n  border-radius: 10px;\n  color: white;\n  cursor: pointer;\n  box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n\n  .rippleSpan {\n    display: block;\n    position: absolute;\n    border-radius: 100%;\n    background: rgba(255, 255, 255, 0.5);\n    transform: scale(0);\n  }\n\n  .rippleAnimation {\n    animation: ripple 0.5s ease-in;\n  }\n\n  .btnMouseDown {\n    opacity: 0.5;\n  }\n`;\n\nconst RippleButton = ({\n  disabled,\n  height,\n  width,\n  bgColor,\n  label,\n  color,\n  onClick,\n  title,\n  className,\n  element,\n}) => {\n  const rippleBtnBoxRef = useCallback(\n    (node) => {\n      if (node !== null && !disabled) {\n        //鼠标进入\n        node.onmouseenter = function (event) {\n          let ripple = node.querySelector(\".rippleSpan\");\n          ripple.classList.add(\"rippleAnimation\");\n          ripple.style.width = this.offsetWidth + \"px\";\n          ripple.style.height = this.offsetWidth + \"px\";\n          ripple.style.top = -(this.offsetHeight - event.offsetY) + \"px\";\n          ripple.style.left = -(this.offsetWidth / 2 - event.offsetX) + \"px\";\n          setTimeout(function () {\n            ripple.classList.remove(\"rippleAnimation\");\n          }, 500);\n        };\n        //鼠标点下\n        node.onmousedown = function (e) {\n          this.style.opacity = 0.7;\n          this.style.boxShadow = \"0px 0px 0px rgba(0, 0, 0, 0.2)\";\n        };\n        //鼠标松开\n        node.onmouseup = function (e) {\n          this.style.opacity = \"\";\n          this.style.boxShadow = \"\";\n        };\n        //设置属性\n        node.setAttribute(\"shtitle\", title);\n      }\n    },\n    [disabled,title]\n  );\n\n  return (\n    <RippleButtonWrapper\n      ref={rippleBtnBoxRef}\n      onClick={onClick}\n      style={{\n        width,\n        height,\n        color,\n        backgroundColor: bgColor,\n      }}\n      className={`${className} ${title && \"shToolTip\"}`}\n    >\n      <span className=\"rippleSpan\"></span>\n      {label}\n      {element}\n    </RippleButtonWrapper>\n  );\n};\n\nexport default RippleButton;\n","import React, { PureComponent } from \"react\";\nimport styled from \"styled-components\";\nimport progressor from \"../utils/progressor\";\nimport notifier from \"../utils/notifier\";\nimport subService from \"../services/subService\";\nimport translater from \"../utils/translater\";\nimport logger from \"../utils/logger\";\nimport ffmpegWorker from \"../utils/ffmpegWorker\";\nimport VideoControls from \"./videoControls\";\nimport RippleButton from \"./common/rippleButton\";\nimport videoService from \"../services/videoService\";\nimport ReactModal from \"react-modal\";\n\nconst ToolsWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  padding: 15px 0 15px 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  // backgroud-color: #c0d9d9;\n\n  .toolsContainerBox {\n    display: flex;\n    flex: 1;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n    background-color: #e3eeeef2;\n    padding: 15px;\n    overflow-y: hidden;\n    :hover {\n      // overflow-x: scroll;\n      overflow-y: visible;\n    }\n  }\n\n  .leftBox {\n    flex: 1;\n    display: flex;\n    background: url(${require(\"../resources/image/blackboard.png\")}) no-repeat;\n    background-size: 47%;\n    background-position: 85% center;\n\n    .controlBox {\n      width: 200px;\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-end;\n    }\n  }\n\n  .toolsBox {\n    flex: 1;\n    min-height: 150px;\n    border: 1px dashed #529393;\n    border-radius: 6px 6px;\n    display: flex;\n    flex-direction: column;\n\n    .shRow {\n      display: flex;\n    }\n\n    .shRowHeader {\n      width: 100px;\n      display: flex;\n      padding: 5px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .shRowBody {\n      flex: 1;\n      display: flex;\n      padding: 0 30px 0 30px;\n      justify-content: space-between;\n      align-items: center;\n      flex-direction: row;\n\n      .toolsBtn {\n        // margin-right: 15px;\n        z-index: 1;\n        // pointer-events: none;\n      }\n    }\n\n    //select样式\n    .toolsSelect {\n      user-select: none;\n      border: none;\n      background: none;\n      appearance: none;\n      -webkit-appearance: none;\n      -ms-appearance: none;\n      -moz-appearance: none;\n      -o-appearance: none;\n      outline: none;\n      text-align: center; //文字对齐方式\n      text-align-last: center;\n      height: 35px;\n      width: 90px;\n      border-radius: 5px;\n      background: linear-gradient(150deg, #00dfea, #66cccc);\n      color: white;\n      cursor: pointer;\n      box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n      overflow: hidden;\n      // margin-right: 10px;\n      option {\n        color: black;\n        background: #ffffff;\n      }\n    }\n  }\n\n  //滑块样式\n  input[type=\"range\"] {\n    appearance: none;\n    height: 3px;\n    width: 200px;\n    outline: none;\n    background-color: #529393;\n    border-radius: 10px;\n  }\n  //firefox去input range 的outline\n  input[type=\"range\"]::-moz-focus-outer {\n    border: 0;\n  }\n\n  //chorme\n  input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    outline: none;\n    height: 15px;\n    width: 15px;\n    background: #ffffff;\n    border-radius: 50%;\n  }\n`;\n\n//利用了绝对定位 绝对定位可以让元素脱离正常的文档流，实现更灵活的布局方式\nconst FileYinput = styled.input`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: auto;\n  cursor: pointer;\n`;\n\nclass Tools extends PureComponent {\n  //语言列表\n  languages = translater.getBaiduTranslateLanguages();\n  languagesKeys = Object.keys(this.languages);\n\n  state = {\n    currentLanguageKeyFrom: \"auto\",\n    // 不能为auto\n    currentLanguageKeyTo: \"zh\",\n    //视频文件名\n    videoName: \"\",\n    //字幕文件名 暂时固定为 subtitle.vtt\n    subName: \"subtitle.vtt\",\n    modalIsOpen: false,\n  };\n\n  handleLanguageChange = (name, value) => {\n    this.setState({ [name]: value });\n  };\n\n  handleTranslate = () => {\n    const { onAllSubTranslate } = this.props;\n    const { currentLanguageKeyFrom, currentLanguageKeyTo } = this.state;\n    onAllSubTranslate(currentLanguageKeyFrom, currentLanguageKeyTo);\n  };\n\n  handleTranslateBackupReset = () => {\n    const { onSubArrayBackupReset } = this.props;\n    onSubArrayBackupReset();\n  };\n\n  handleVideoControlActions = (step) => {\n    const { onVideoControlAction } = this.props;\n    onVideoControlAction(step);\n  };\n\n  handleSubFile = async (e) => {\n    progressor.start();\n    const file = e.currentTarget.files[0];\n    // chrome vtt文件的file.type 为空串？\n    if (!/\\.vtt$/i.test(file.name)) {\n      progressor.done();\n      notifier.notify(\n        `暂只支持vtt格式的字幕文件，其他格式将在后续更新中加入`,\n        \"top_center\",\n        \"warning\"\n      );\n      return;\n    }\n    const { updateSubArray, updateSubUrl } = this.props;\n    try {\n      const vttStr = await subService.readSubFileAsText(file);\n      //开一个预览字幕的提示\n      notifier.notify(<p>{vttStr}</p>, \"top_center\", \"default\", {\n        autoClose: false,\n        className: \"textReader\",\n      });\n      const subUrl = subService.createVttSubBlobUrl(vttStr);\n      updateSubUrl(subUrl, true);\n      //从url中读取字幕数组\n      const subArray = await subService.createSubArray(subUrl);\n      updateSubArray(subArray, true);\n    } catch (e) {\n      notifier.notify(`<Header>${e.message}`, \"top_center\", \"warning\");\n    }\n    progressor.done();\n  };\n\n  //拿到上传的视频\n  handleVideoFile = (e) => {\n    progressor.start();\n    const file = e.currentTarget.files[0];\n    // maybe video/mp4 video/x-flv\n    const $video = document.createElement(\"video\");\n    logger.clog(\n      \"创建元素：\",\n      $video,\n      file,\n      file.type,\n      $video.canPlayType(file.type)\n    );\n    //如果文件不能被web播放器播放，并且不是.flv后缀\n    if (\n      $video.canPlayType(file.type) !== \"maybe\" &&\n      !/\\.flv$/i.test(file.name)\n    ) {\n      progressor.done();\n      notifier.notify(\n        `无法播放该文件，播放器明确支持mp4、flv格式的视频`,\n        \"top_center\",\n        \"warning\"\n      );\n      return;\n    }\n    //更新视频文件名\n    this.setState({ videoName: file.name });\n    const videoUrl = URL.createObjectURL(file);\n    logger.clog(\"视频url\", videoUrl);\n    const { onSwitch } = this.props;\n    onSwitch(file.type || file.name, !file.type, videoUrl);\n    progressor.done();\n  };\n\n  //下载字幕\n  handleSubFileDownload = () => {\n    const { onDownload } = this.props;\n    onDownload();\n  };\n\n  //标识正在进行编码工作\n  ffmpegEncoding = false;\n\n  //下载内封字幕的视频\n  handleVideoWithSubDownload = async () => {\n    //确认框\n    const isConfirm = window.confirm(\n      \"把字幕与视频合并后输出，将把整个视频重新编码，这会花费很长时间，是否继续？\"\n    );\n    if (isConfirm) {\n      //停止上一个worker\n      this.handleFfmpegEncodeStop();\n      const { videoUrl, subUrl } = this.props;\n      try {\n        //加await才能捕获异步的异常\n        await videoService.encodeVideoWithSub(\n          videoUrl,\n          this.state.videoName,\n          subUrl,\n          this.state.subName\n        );\n      } catch (e) {\n        console.error(e);\n        notifier.notify(e.message);\n        return;\n      }\n      notifier.notify(\n        \"视频编码开始，此功能仍在测试中，暂无进度条，可f12查看控制台信息。由于是在浏览器内js执行，并且是单worker，所以速度极慢，建议仅下载字幕文件，在本地合并视频与字幕。\"\n      );\n      this.ffmpegEncoding = true;\n    }\n  };\n\n  //字幕格式转换\n  handlesubTransform = () => {\n    this.setState({ modalIsOpen: true });\n  };\n\n  //关闭modal\n  handleModalClose = () => {\n    this.setState({ modalIsOpen: false });\n  };\n\n  //停止编码视频\n  handleFfmpegEncodeStop = () => {\n    if (!this.ffmpegEncoding) return;\n    ffmpegWorker.terminateWork();\n    this.ffmpegEncoding = false;\n    notifier.notify(\"已停止进行中的编码工作\");\n  };\n\n  //清空字幕\n  handleSubClean = () => {\n    const { onClean } = this.props;\n    onClean();\n  };\n\n  render() {\n    const { duration, playerPaused, onDurationChange } = this.props;\n    const {\n      currentLanguageKeyFrom,\n      currentLanguageKeyTo,\n      modalIsOpen,\n    } = this.state;\n    return (\n      <ToolsWrapper>\n        <div className=\"toolsContainerBox\">\n          <div className=\"leftBox\">\n            <div className=\"controlBox\">\n              <VideoControls\n                onAction={this.handleVideoControlActions}\n                playerPaused={playerPaused}\n              />\n              <input\n                type=\"range\"\n                title={`时间轴：${duration}`}\n                value={duration}\n                min=\"10\"\n                max=\"20\"\n                step=\"1\"\n                onChange={(e) => {\n                  onDurationChange(Number(e.currentTarget.value));\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"toolsBox\">\n            <div className=\"shRow\">\n              <div className=\"shRowHeader\">\n                <RippleButton\n                  disabled={true}\n                  label=\"常规\"\n                  width=\"50px\"\n                  height=\"40px\"\n                  color=\"gray\"\n                  bgColor=\"white\"\n                />\n              </div>\n              <div className=\"shRowBody\">\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={\n                    <i className=\"fa fa-folder-open\" aria-hidden=\"true\"></i>\n                  }\n                  element={\n                    <FileYinput\n                      type=\"file\"\n                      name=\"file\"\n                      onChange={this.handleSubFile}\n                    />\n                  }\n                  title=\"打开本地字幕\"\n                  color=\"white\"\n                  bgColor=\"#529393\"\n                />\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={\n                    <i className=\"fa fa-play-circle\" aria-hidden=\"true\"></i>\n                  }\n                  element={\n                    <FileYinput\n                      className=\"uploadVideo\"\n                      type=\"file\"\n                      name=\"file\"\n                      onChange={this.handleVideoFile}\n                    />\n                  }\n                  color=\"white\"\n                  bgColor=\"#529393\"\n                  title=\"打开本地视频\"\n                  onClick={() => console.log(\"click\")}\n                />\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={\n                    <i className=\"fa fa-cloud-download\" aria-hidden=\"true\"></i>\n                  }\n                  color=\"white\"\n                  bgColor=\"#529393\"\n                  title=\"下载字幕\"\n                  onClick={this.handleSubFileDownload}\n                />\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={<i className=\"fa fa-trash\" aria-hidden=\"true\"></i>}\n                  color=\"white\"\n                  bgColor=\"#ec6464\"\n                  title=\"清空字幕\"\n                  onClick={this.handleSubClean}\n                />\n              </div>\n            </div>\n            <div className=\"shRow\">\n              <div className=\"shRowHeader\">\n                <RippleButton\n                  disabled={true}\n                  label=\"翻译\"\n                  width=\"50px\"\n                  height=\"40px\"\n                  color=\"gray\"\n                  bgColor=\"white\"\n                />\n              </div>\n              <div className=\"shRowBody\">\n                <select\n                  className=\"toolsSelect\"\n                  name=\"currentLanguageKeyFrom\"\n                  value={currentLanguageKeyFrom}\n                  title=\"当前语言\"\n                  onChange={(e) =>\n                    this.handleLanguageChange(\n                      e.currentTarget.name,\n                      e.currentTarget.value\n                    )\n                  }\n                >\n                  {this.languagesKeys.map((k) => (\n                    <option key={k} value={k}>\n                      {this.languages[k]}\n                    </option>\n                  ))}\n                </select>\n\n                <select\n                  className=\"toolsSelect\"\n                  name=\"currentLanguageKeyTo\"\n                  value={currentLanguageKeyTo}\n                  title=\"翻译至\"\n                  onChange={(e) =>\n                    this.handleLanguageChange(\n                      e.currentTarget.name,\n                      e.currentTarget.value\n                    )\n                  }\n                >\n                  {this.languagesKeys\n                    //to Key 的值 不能让用户选为auto\n                    .filter((v) => v !== \"auto\")\n                    .map((k) => (\n                      <option key={k} value={k}>\n                        {this.languages[k]}\n                      </option>\n                    ))}\n                </select>\n\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"35px\"\n                  height=\"35px\"\n                  label={\n                    <i\n                      style={{ fontSize: \"16px\" }}\n                      className=\"fa fa-globe\"\n                      aria-hidden=\"true\"\n                    ></i>\n                  }\n                  color=\"white\"\n                  bgColor=\"#66cccc\"\n                  title=\"点击翻译 (请给它些休息时间)\"\n                  onClick={this.handleTranslate}\n                />\n\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"35px\"\n                  height=\"35px\"\n                  label={\n                    <i\n                      style={{ fontSize: \"16px\" }}\n                      className=\"fa fa-undo\"\n                      aria-hidden=\"true\"\n                    ></i>\n                  }\n                  color=\"white\"\n                  bgColor=\"#00dfea\"\n                  title=\"回退至上次翻译前的版本\"\n                  onClick={this.handleTranslateBackupReset}\n                />\n              </div>\n            </div>\n            <div className=\"shRow\">\n              <div className=\"shRowHeader\">\n                <RippleButton\n                  disabled={true}\n                  label=\"编码\"\n                  width=\"50px\"\n                  height=\"40px\"\n                  color=\"gray\"\n                  bgColor=\"white\"\n                />\n              </div>\n              <div className=\"shRowBody\">\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={<i className=\"fa fa-download\" aria-hidden=\"true\"></i>}\n                  color=\"white\"\n                  bgColor=\"#529393\"\n                  title=\"将字幕内封到视频，并下载\"\n                  onClick={this.handleVideoWithSubDownload}\n                />\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={\n                    <i className=\"fa fa-retweet fa-spin\" aria-hidden=\"true\"></i>\n                  }\n                  color=\"white\"\n                  bgColor=\"#529393\"\n                  title=\"字幕格式转换\"\n                  onClick={this.handlesubTransform}\n                />\n                <RippleButton\n                  className=\"toolsBtn\"\n                  width=\"45px\"\n                  height=\"35px\"\n                  label={<i className=\"fa fa-ban\" aria-hidden=\"true\"></i>}\n                  color=\"white\"\n                  bgColor=\"#ec6464\"\n                  title=\"停止编码\"\n                  onClick={this.handleFfmpegEncodeStop}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <ReactModal\n          isOpen={modalIsOpen}\n          closeTimeoutMS={300}\n          style={{\n            overlay: {\n              position: \"fixed\",\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: \"rgba(102, 204, 204, 0.75)\",\n              zIndex: 999,\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            },\n            content: {\n              position: \"relative\",\n              height: \"40vh\",\n              width: \"40vw\",\n              border: \"1px solid #ccc\",\n              background: \"#fff\",\n              overflow: \"auto\",\n              WebkitOverflowScrolling: \"touch\",\n              borderRadius: \"4px\",\n              outline: \"none\",\n              padding: \"20px\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              flexFlow: \"column nowrap\",\n            },\n          }}\n        >\n          <div>功能开发中</div>\n          <div\n            onClick={this.handleModalClose}\n            className=\"shToolTip\"\n            shtitle=\"关闭提示\"\n            style={{\n              display: \"flex\",\n              position: \"relative\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              cursor: \"pointer\",\n              width: 50,\n              height: 40,\n              outline: \"none\",\n              border: \"none\",\n              backgroundColor: \"#66cccc\",\n              boxShadow: \"1px 2px 5px rgb(0,0,0,0.3)\",\n              borderRadius: \"5px 5px\",\n              fontSize: 14,\n              margin: 10,\n            }}\n          >\n            Close\n          </div>\n        </ReactModal>\n      </ToolsWrapper>\n    );\n  }\n}\n\nexport default Tools;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ShWave } from \"shwave\";\n\nconst LineWrapper = styled.div`\n  //底部时间轴 固定150px\n  height: 150px;\n  position: relative;\n  display: flex;\n  width: 100%;\n  background-color: #c0d9d9;\n  // border-top: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.3);\n`;\n\nconst WaveLine = ({\n  currentTime,\n  videoUrl,\n  onWaveClick,\n  onWaveContextmenu,\n  subArray,\n  onSubBlockMove,\n  onSubBlockMoveError,\n  onSubBlockResize,\n  onSubBlockClick,\n  duration\n}) => {\n  return (\n    <LineWrapper>\n      <ShWave\n        duration={duration}\n        backgroundColor=\"#529393\"\n        currentTime={currentTime}\n        throttleWait={1}\n        url={videoUrl}\n        waveColor=\"#fbf8f86b\"\n        alterWaveColor=\"#57e3e3\"\n        waveScale={0.8}\n        click={onWaveClick}\n        contextmenu={onWaveContextmenu}\n        subArray={subArray}\n        onSubMove={onSubBlockMove}\n        onSubMoveError={onSubBlockMoveError}\n        ErrorWait={1050}\n        ErrorColor=\"#f09b50d9\"\n        onSubResize={onSubBlockResize}\n        onSubClick={onSubBlockClick}\n      />\n    </LineWrapper>\n  );\n};\n\nexport default WaveLine;\n","import React, { Component } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport _ from \"lodash\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport subeditorIco from \"../resources/image/subeditor.ico\";\nimport subService from \"../services/subService\";\nimport videoService from \"../services/videoService\";\nimport editorStateService from \"../services/editorStateService\";\nimport config from \"../config/config.json\";\n// import SubEditorPackage from \"../../package.json\";\nimport EditorState from \"../model/editorState\";\nimport logger from \"../utils/logger\";\nimport notifier from \"../utils/notifier\";\nimport translater from \"../utils/translater\";\nimport Header from \"./header\";\nimport VideoPlayer from \"./videoPlayer\";\nimport SubTable from \"./subTable\";\nimport Tools from \"./tools\";\nimport WaveLine from \"./waveLine\";\n\nconst GlobalStyle = createGlobalStyle`\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100vh;\n        overflow: auto;\n        min-width: 1300px;\n        min-height: 800px;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        // color: #ccc; 白字\n        background: #C0D9D9;\n        // background: #66CCCC;\n        // overflow-y: scroll;\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n\nconst Main = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\nconst Right = styled.div`\n  flex: 1;\n  padding-top: 5px;\n`;\n\nconst requestAnimationFrameCom =\n  window.requestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.msRequestAnimationFrame;\n\n//导航栏50px 底部时间轴150px\nclass SubEditor extends Component {\n  state = {\n    // https://sh-rep.oss-cn-hongkong.aliyuncs.com/mll.mp4   /friday.mp4\n    videoUrl: \"\",\n    subUrl: \"\",\n    subArray: [],\n    picUrl: videoService.getDefaultPicUrl(),\n    //容器 装着SubTab 和 VideoPlayer\n    container: {\n      containerHeight: 10,\n      containerWidth: 10,\n    },\n    //字幕表滚动到的index\n    scrollIndex: -1,\n    //播放器\n    player: null,\n    //当前时间\n    currentTime: 0,\n    //时间轴长度\n    duration: 15,\n    //播放器是否暂停\n    playerPaused: true,\n  };\n\n  //用来加工字幕url的worker\n  subUrlWorker = null;\n\n  //组件装载并渲染完成后\n  componentDidMount() {\n    //首次调整container的宽高\n    this.resizeContainer();\n    //添加resize的事件监听\n    this.addResizeListener();\n    //添加视频控制组件的键盘监听\n    this.addKeyboardListener();\n    //初始化字幕表\n    this.initSubTable();\n    //设置 收到worker回复时的处理\n    this.subUrlWorker = subService.createSubUrlWorker((subUrl) => {\n      //拿到url后 更新并装载\n      this.updateSubUrl(subUrl, true);\n    });\n  }\n\n  //是否记录当前状态\n  WillMemorize = true;\n\n  //组件更新后 在这里记录状态\n  componentDidUpdate(prevProps, prevState) {\n    //如果需要记录 并且state的subArray与之前的地址不同\n    if (this.WillMemorize && prevState.subArray !== this.state.subArray) {\n      const editorstate = this.createEditorState();\n      editorStateService.push(editorstate);\n      const history = editorStateService.getHistory();\n      console.log(history.length, history);\n    }\n  }\n\n  //卸载组件前\n  componentWillUnmount() {\n    //移除添加的事件监听 不然页面切换多了会可能卡顿 ??\n    // window.removeEventListener(\"resize\", this.resizeContainer);\n    // logger.clog(\"移除resize事件监听\");\n    this.removeKeyboardListener();\n  }\n\n  //调整container的宽高\n  resizeContainer = () => {\n    //减去导航栏的50 底部时间轴的150\n    const containerHeight = document.body.clientHeight - 200;\n    const containerWidth = document.body.clientWidth;\n    const $main = document.querySelector(\"#mainContainer\");\n    $main.style.maxWidth = `${containerWidth}px;`;\n    $main.style.maxHeight = `${containerHeight}px;`;\n    logger.clog(\"更新container的宽高\", containerWidth, containerHeight);\n    this.setState({ container: { containerHeight, containerWidth } });\n  };\n\n  //添加resize事件监听\n  addResizeListener = () => {\n    //把this.resizeContainer的引用作为参数 传到匿名函数内的setTimeout内\n    function debounce(func, wait) {\n      let timeout;\n      return () => {\n        clearTimeout(timeout);\n        timeout = setTimeout(func, wait);\n      };\n    }\n    //300ms内只执行一次的调整\n    const timeOutResize = debounce(this.resizeContainer, 300);\n    //添加resize事件监听 窗口大小变化时自动执行this.resizeContainer\n    window.addEventListener(\"resize\", timeOutResize);\n    logger.clog(\"添加resize事件监听\");\n  };\n\n  //工具栏videoControl的快捷键\n  videoControlsShortcutkey = (e) => {\n    //对ctrl、alt键的up不处理\n    if (e.keyCode === 17 || e.keyCode === 18) return;\n    let step;\n    switch (e.keyCode) {\n      // Left（左箭头）\n      case 37:\n        step = -0.1;\n        if (e.ctrlKey) step = -1;\n        if (e.ctrlKey && e.altKey) step = -10;\n        break;\n      // Right（右箭头）\n      case 39:\n        step = 0.1;\n        if (e.ctrlKey) step = 1;\n        if (e.ctrlKey && e.altKey) step = 10;\n        break;\n      //Space（空格键）\n      case 32:\n        // step保持默认undifined即可\n        break;\n      default:\n        return;\n    }\n    //阻止默认行为\n    e.preventDefault();\n    this.handleVideoControlActions(step);\n  };\n\n  //撤销快捷键\n  undoShortcutkey = (e) => {\n    let bool;\n    switch (e.keyCode) {\n      case 90:\n        if (e.ctrlKey) bool = true;\n        if (e.ctrlKey && e.shiftKey) bool = false;\n        break;\n      default:\n        return;\n    }\n    if (typeof bool === \"undefined\") return;\n    //阻止默认行为\n    e.preventDefault();\n    this.editorStateRollBack(bool);\n  };\n\n  //添加键盘事件监听\n  addKeyboardListener = () => {\n    window.addEventListener(\"keyup\", this.videoControlsShortcutkey);\n    window.addEventListener(\"keyup\", this.undoShortcutkey);\n  };\n\n  //移除键盘事件监听\n  removeKeyboardListener = () => {\n    window.removeEventListener(\"keyup\", this.videoControlsShortcutkey);\n    window.removeEventListener(\"keyup\", this.undoShortcutkey);\n  };\n\n  //更新一个属性 供子组件回调\n  updateOneState = (stateObject) => {\n    this.setState(stateObject);\n    logger.clog(\"更新state：\", stateObject);\n  };\n\n  /**@description 更新字幕数组\n   * @param {array} subArray 字幕数组\n   * @param {boolean} willStorage 是否存储\n   */\n  updateSubArray = (subArray, willStorage = false) => {\n    // 将字幕数组转为规范模式\n    subArray.map((sub) => subService.mapSubToFullModel(sub));\n    //排序\n    const sortedArray = subService.sortSubArray(subArray);\n    //重置scrollIndex (需要先重置scrollIndex 再更新数组 更新数组会使wavleLine重新计算scrollIndex)\n    this.setState({ scrollIndex: -1 });\n    //更新subArray\n    this.setState({ subArray: sortedArray }, () => {\n      // 回调函数 ()=>{}回调函数里的this.state是更新后的state 函数无参\n      //如果不需要存储的更新 则结束\n      if (!willStorage) return;\n      //存储字幕\n      this.storageSubs(this.state.subArray);\n      // 交给worker前 需要将字幕数组转为规范模式 前面已经转过了\n      this.subUrlWorker.postMessage(this.state.subArray);\n    });\n  };\n\n  /**@description 更新字幕url\n   * @param {string} subUrl 字幕url\n   * @param {boolean} willLoadTrack 是否载入字幕给track\n   */\n  updateSubUrl = (subUrl, willLoadTrack = false) => {\n    //释放上一个url资源\n    URL.revokeObjectURL(this.state.subUrl);\n    this.setState({ subUrl }, () => {\n      //如果需要载入字幕\n      if (willLoadTrack) {\n        logger.clog(\"装载：\", this.state.subUrl);\n        //装载字幕\n        this.loadTrack(this.state.subUrl);\n      }\n    });\n  };\n\n  //为播放器装载字幕\n  loadTrack = (subUrl) => {\n    //清除播放器中已经渲染的p标签字幕 只会渲染一行\n    this.cleanSubP();\n    if (!this.state.player || !this.state.player.video) return;\n    //没找到dbplayer切换字幕的函数\n    const track = this.state.player.video.firstElementChild;\n    track.default = true;\n    track.kind = \"subtitles\";\n    track.src = subUrl;\n  };\n\n  //清除播放器残留的字幕 已经被渲染在p标签里的字幕 只会渲染一行 也只有一行\n  cleanSubP = () => {\n    const subtitleDiv = document.getElementsByClassName(\"dplayer-subtitle\")[0];\n    const p = subtitleDiv.firstChild;\n    if (p) {\n      subtitleDiv.removeChild(p);\n      logger.clog(\"清除字幕残留\", p);\n    }\n  };\n\n  //存储字幕数组到本地 指明是否是备份\n  storageSubs = (subArray, isBackup = false) => {\n    subService.saveSubArray(subArray, isBackup);\n  };\n\n  //清空存储里的字幕 不含备份\n  cleanStorageSubs = () => {\n    subService.cleanSubArray();\n    logger.clog(\"清空存储的字幕，不含备份\");\n  };\n\n  //初始化字幕表\n  initSubTable = async () => {\n    try {\n      const subArray = await subService.getSubArray();\n      //初始字幕\n      if (!subArray || subArray.length === 0) {\n        const defaultSubUrl = videoService.getDefaultSubUrl();\n        this.updateSubUrl(defaultSubUrl, true);\n        const defaultSubArray = await subService.createSubArray(defaultSubUrl);\n        this.updateSubArray(defaultSubArray);\n        return;\n      }\n      //不需要存储\n      this.updateSubArray(subArray);\n      const subUrl = subService.createSubArrayUrl(subArray);\n      //更新记录的字幕url 并载入字幕 这样就不需要在初始化数组的时候 再去存一遍了\n      this.updateSubUrl(subUrl, true);\n    } catch (e) {\n      console.log(e);\n      notifier.notify(\"读取字幕失败，请尝试清除缓存\", \"top_center\", \"info\");\n    }\n  };\n\n  //删除一行字幕\n  handleSubRemove = (sub) => {\n    const subArray = [...this.state.subArray];\n    const index = subArray.indexOf(sub);\n    subArray.splice(index, 1);\n    //更新state 并存储 每次存储都会更新url\n    this.updateSubArray(subArray, true);\n    logger.clog(\"删除\", sub, index);\n  };\n\n  //旧 编辑时 待改 编辑状态应当在subtable\n  handleSubEdit = (sub) => {\n    //将数组内每个sub的editing重置\n    const subArray = this.state.subArray.map((sub) => {\n      return {\n        ...sub,\n        startTime: sub.startTime,\n        endTime: sub.endTime,\n        length: sub.length,\n        editing: false,\n      };\n    });\n    const index = this.state.subArray.indexOf(sub);\n    subArray[index].editing = true;\n    this.updateSubArray(subArray);\n    logger.clog(\"handleEdit\", sub, index);\n  };\n\n  //点击时\n  handleSubClick = (sub) => {\n    if (!sub || !sub.start) return;\n    const time = sub.start;\n    //暂停视频 然后跳转到对应time\n    this.playerSeekTo(time);\n  };\n\n  //旧  取消时\n  handleSubCancel = (sub) => {\n    //取消编辑状态\n    const subArray = [...this.state.subArray];\n    const index = subArray.indexOf(sub);\n    subArray[index].editing = false;\n    this.updateSubArray(subArray);\n  };\n\n  //提交时\n  handleSubCommit = (sub, editingSub) => {\n    const subArray = [...this.state.subArray];\n    //找到原sub的index\n    const index = subArray.indexOf(sub);\n    //覆盖原来的sub\n    subArray[index] = editingSub;\n    //提交\n    //更新state 并存储 如果存储 则会更新url\n    this.updateSubArray(subArray, true);\n    logger.clog(\"提交：\", sub, editingSub, subArray);\n  };\n\n  //插入默认字幕\n  handleSubInsert = (sub) => {\n    // 要对字幕排序\n    //起始时间 有参考的sub 就是 sub的结束时间 +0.001 ， 没有sub 就是0\n    let start = sub ? sub.end + 0.001 : 0;\n    //复制字幕数组\n    const subArray = [...this.state.subArray];\n    //如果sub为空 index为-1\n    let index = subArray.indexOf(sub);\n    //sub的下一个sub对象 next\n    const next = subArray[index + 1];\n    //结束时间 有next元素就是next元素的起始时间 -0.001 ， 没有next 就是起始时间+5\n    let end = next ? Math.abs(next.start - 0.001) : start + 5;\n    //判断得到的时长是否合理\n    if (Number((end - start).toFixed(3)) < 0.001) {\n      notifier.notify(\"空间不足，前后字幕相隔至少需要0.03秒\");\n      return;\n    }\n    //根据开始和结束时间 获得一个默认字幕\n    const dSub = subService.getDefaultSub(Number(start), Number(end));\n    //将字幕插入到指定位置\n    subArray.splice(index + 1, 0, dSub);\n    //更新\n    this.updateSubArray(subArray);\n    //将滚条滚到刚刚的位置\n    const scrollIndex = index + 1;\n    this.setState({ scrollIndex });\n    logger.clog(\"插入：\", dSub);\n  };\n\n  //下载字幕\n  handleSubDownload = async () => {\n    try {\n      const isSuccess = await subService.downloadSubFile();\n      logger.clog(isSuccess);\n      if (!isSuccess) notifier.notify(\"无字幕文件，请先制作您的字幕。\");\n    } catch (e) {\n      notifier.notify(\"下载出错\", \"top_center\", \"warning\");\n    }\n  };\n\n  //清空字幕 删除存储的字幕 清空内存里的字幕\n  handleSubClean = () => {\n    //确认框\n    const isConfirm = window.confirm(\"是否要删除所有字幕？\");\n    if (isConfirm) {\n      //从存储中移除\n      this.cleanStorageSubs();\n      //字幕url置空 并载入给track（每次更新 都会释放上一个url资源\n      this.updateSubUrl(\"\", true);\n      //重置为空数组\n      const subArray = [];\n      this.updateSubArray(subArray);\n    }\n  };\n\n  //初始化视频播放器对象 设置高频更新当前时间\n  handlePlayerInit = (player) => {\n    logger.clog(\"初始化播放器\");\n    this.setState({ player });\n    //1秒60帧 根据屏幕刷新虑有所变化，time为时间戳 ，每一帧的工作内容为：\n    const frameWork = () => {\n      const { video } = player;\n      //更新当前时间\n      this.handleCurrentTime(video.currentTime);\n      requestAnimationFrameCom(frameWork);\n    };\n    //启动时间更新\n    requestAnimationFrameCom(frameWork);\n  };\n\n  //视频seek\n  playerSeekTo = (second, action = \"pause\") => {\n    const player = this.state.player;\n    if (!player || !player.video) return;\n    const duration = player.video.duration;\n    player[action]();\n    //不能超过视频总时长\n    const time = second > duration ? duration : second;\n    player.seek(time);\n  };\n\n  //切换视频\n  handleVideoSwitch = (fileType, isFileName, videoUrl) => {\n    const videoType = videoService.createVideoType(fileType, isFileName);\n    //释放前一个视频资源\n    URL.revokeObjectURL(this.state.videoUrl);\n    //更新视频url\n    this.setState({ videoUrl });\n    this.state.player.switchVideo({\n      url: videoUrl,\n      type: videoType,\n    });\n  };\n\n  //视频可播放时 视频准备就绪后\n  handleVideoCanPlay = () => {\n    logger.clog(\"视频已经就绪\");\n    const isChrome = navigator.userAgent.toLowerCase().indexOf(\"chrome\") > 0;\n    //如果是chrome 则把字幕改为透明 避免双字幕\n    if (isChrome) {\n      const subtitleDiv = document.getElementsByClassName(\n        \"dplayer-subtitle\"\n      )[0];\n      if (subtitleDiv) {\n        subtitleDiv.style.opacity = 0;\n      }\n    }\n  };\n\n  //处理scrollIndex的高频率更新\n  handleScrollIndexFrame = (index) => {\n    if (this.state.scrollIndex === index) return;\n    this.setState({ scrollIndex: index });\n  };\n\n  //更新当前时间 如果和当前保存的当前时间相等 则不更新\n  handleCurrentTime = (currentTime) => {\n    if (this.state.currentTime === currentTime) return;\n    this.setState({ currentTime }, () => {\n      //更新ScrollIndex （高頻率\n      //对于空数组，findIndex是不会执行的 沒找到则返回-1\n      const index = this.state.subArray.findIndex(\n        (sub) => sub.start <= currentTime && sub.end > currentTime\n      );\n      if (index === -1) return;\n      this.handleScrollIndexFrame(index);\n    });\n  };\n\n  //更新播放器暂停状态\n  handlePlayerPaused = (playerPaused) => {\n    const player = this.state.player;\n    if (player && player.video) {\n      playerPaused = player.video.paused;\n    }\n    this.setState({ playerPaused });\n  };\n\n  //在视频开始播放进行时\n  handleVideoPlaying = () => {};\n\n  //底部waveLine左键单击时 url为空时 不会执行\n  handleWaveClick = (time, event) => {\n    //暂停视频 然后跳转到对应time\n    this.playerSeekTo(time);\n  };\n\n  //底部waveLine右键单击时 url为空时 不会执行\n  handleWaveContextmenu = (time, event) => {\n    //播放视频 然后跳转到对应time\n    this.playerSeekTo(time, \"play\");\n  };\n\n  //当timeLine的字幕块移动时\n  handleSubBlockMove = (originSub, translateSecond) => {\n    //这里是浅拷贝 数组内元素的引用并没有变化\n    const subArray = [...this.state.subArray];\n    const index = subArray.indexOf(originSub);\n    const sub = subArray[index];\n    const start = Number(Number(sub.start + translateSecond).toFixed(3));\n    const end = Number(Number(sub.end + translateSecond).toFixed(3));\n    //非法值 则不更新subArray\n    if (start < 0 || end <= 0) return;\n    //这里的拷贝是因为 如startTime可能为只读属性\n    const tempSub = { ...sub };\n    tempSub.startTime = subService.toTime(start);\n    tempSub.endTime = subService.toTime(end);\n    //这里返回了一个新的对象 改变了subArray[index]的内存地址 因为subTable使用的PureComponent是浅比较 所以必须要改数组内元素的内存地址\n    subArray[index] = subService.mapSubToFullModel(tempSub);\n    this.updateSubArray(subArray, true);\n  };\n\n  //字幕块移动的错误提示id\n  toastId_subBlockMoveError = null;\n  //当字幕块移动有警告时\n  handleSubBlockMoveError = () => {\n    if (!notifier.isActive(this.toastId_subBlockMoveError)) {\n      this.toastId_subBlockMoveError = notifier.notify(\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <div>无效的位置，松开鼠标以修复</div>\n        </div>,\n        \"bottom_left\",\n        \"warning\",\n        {\n          hideProgressBar: true,\n          autoClose: 1000,\n          canClose: true,\n        },\n        \"flip\"\n      );\n    }\n  };\n\n  //字幕块resize 改变字幕长度时\n  handleSubBlockResize = (originSub, translateSecond, type) => {\n    //这里是浅拷贝 数组内元素的引用并没有变化\n    const subArray = [...this.state.subArray];\n    const index = subArray.indexOf(originSub);\n    const sub = subArray[index];\n    //这里的拷贝是因为 如startTime可能为只读属性\n    const tempSub = { ...sub };\n    let start = null;\n    let end = 0;\n    if (type === \"start\") {\n      start = Number(Number(sub.start + translateSecond).toFixed(3));\n      //非法值 则不更新subArray\n      if (start === null || start < 0) return;\n      tempSub.startTime = subService.toTime(start);\n    } else {\n      end = Number(Number(sub.end + translateSecond).toFixed(3));\n      //非法值 则不更新subArray\n      if (end <= 0 || end <= sub.start) return;\n      tempSub.endTime = subService.toTime(end);\n    }\n    subArray[index] = subService.mapSubToFullModel(tempSub);\n    this.updateSubArray(subArray, true);\n  };\n\n  //字幕块点击事件\n  handleSubBlockClick = (sub) => {\n    const subArray = [...this.state.subArray];\n    const scrollIndex = subArray.indexOf(sub);\n    this.setState({ scrollIndex });\n  };\n\n  //当duration调整时\n  handleDurationChange = (duration) => {\n    this.setState({ duration });\n  };\n\n  //翻译全部字幕 使用时 调下面那个去抖版本\n  handleAllSubTranslate = async (fromKey, toKey) => {\n    //从存储中拿到字幕数组\n    const subArray = await subService.getSubArray();\n    //从存储中拿到字幕文本数组\n    const subTextArr = subService.createSubTextArr(subArray);\n    const translateText = translater.createTranslateTextFromStringArr(\n      subTextArr\n    );\n    //提示\n    notifier.notify(\n      \"翻译请求正准备发送，由于代理服务器位于美国，可能比较慢，请耐心等待...(翻译功能内置间隔为 2秒，超时为1分钟\",\n      \"top_center\"\n    );\n    //翻译内容为空或者出错时 返回空字符串\n    let resultTextArr = [];\n    try {\n      resultTextArr = await translater.translateByLangKey(\n        fromKey,\n        toKey,\n        translateText\n      );\n    } catch (error) {\n      console.log(error);\n      //提示\n      notifier.notify(`翻译失败,${error.message}`, \"top_center\", \"warning\");\n      return;\n    }\n    console.log(\"得到的翻译文本数组：\", resultTextArr);\n    //翻译出错 或结果为空时\n    if (!resultTextArr || resultTextArr === []) {\n      return notifier.notify(\"翻译结果为空\", \"top_center\", \"warning\");\n    }\n\n    //翻译成功 翻译结果的数组长度，与原字幕数组长度不一致时，结束\n    if (resultTextArr !== [] && resultTextArr.length !== subArray.length) {\n      return notifier.notify(\n        \"未应用翻译结果，翻译前请不要在字幕里出现换行，也可能是原文本无需翻译\",\n        \"top_center\",\n        \"warning\"\n      );\n    }\n\n    //得到翻译后的字幕数组 使用map，然后对每个字幕对象拷贝 这样来实现深拷贝\n    const translatedSubArray = subArray.map((sub, index) => ({\n      ...sub,\n      content: resultTextArr[index],\n    }));\n    //备份存储 翻译前的原数组\n    this.storageSubs(subArray, true);\n    //更新为 翻译后的数组 并存储\n    this.updateSubArray(translatedSubArray, true);\n    //提示\n    notifier.notify(\"翻译完成\", \"top_center\");\n  };\n\n  //翻译全部字幕 Debounce版\n  handleAllSubTranslateDebounce = _.debounce(this.handleAllSubTranslate, 2000, {\n    leading: true,\n    trailing: false,\n  });\n\n  //从存储中读取备份的字幕数组 并更新 但不存储\n  handleSubArrayBackupReset = async () => {\n    const backupSubArray = await subService.getSubArray(true);\n    if (backupSubArray.length === 0) {\n      //提示\n      notifier.notify(\"无备份\", \"top_center\");\n      return;\n    }\n    this.updateSubArray(backupSubArray, false);\n    //提示\n    notifier.notify(\n      \"已回退到备份的版本，如果想将它保存为正式版本，请进行一次提交或删除。如果不想使用此版本，刷新浏览器即可。\",\n      \"top_center\"\n    );\n  };\n\n  //工具栏 videoControl\n  handleVideoControlActions = (step) => {\n    const player = this.state.player;\n    if (!player || !player.video) return;\n    if (step && typeof step === \"number\") {\n      const currentTime = this.state.currentTime;\n      const time = Math.round((currentTime + step) * 10) / 10;\n      this.playerSeekTo(time);\n    } else {\n      if (!player.video.duration) return;\n      const { paused } = player.video;\n      paused ? player.play() : player.pause();\n    }\n  };\n\n  //创建当前的编辑器状态对象副本\n  createEditorState = () => {\n    const { subArray, currentTime } = this.state;\n    const arr = [...subArray].map((sub) => ({\n      ...sub,\n      startTime: sub.startTime,\n      endTime: sub.endTime,\n      length: sub.length,\n    }));\n    return new EditorState(arr, currentTime);\n  };\n\n  //状态回滚 true向上回滚 false向下回滚\n  editorStateRollBack = (bool = true) => {\n    const { pop, unPop } = editorStateService;\n    let state;\n    try {\n      bool ? (state = pop()) : (state = unPop());\n    } catch (e) {\n      console.error(e);\n    }\n    if (typeof state === \"undefined\") return;\n    //标识此次更新不需要记录\n    this.WillMemorize = false;\n    //开始回滚\n    this.updateSubArray(state.subArray, true);\n    this.playerSeekTo(state.currentTime);\n    //回滚完成 重置标识\n    this.WillMemorize = true;\n  };\n\n  render() {\n    const {\n      videoUrl,\n      subUrl,\n      subArray,\n      picUrl,\n      container,\n      scrollIndex,\n      player,\n      currentTime,\n      duration,\n      playerPaused,\n    } = this.state;\n    const funcProps = {\n      updateOneState: this.updateOneState,\n      updateSubArray: this.updateSubArray,\n      updateSubUrl: this.updateSubUrl,\n      storageSubs: this.storageSubs,\n      cleanStorageSubs: this.cleanStorageSubs,\n      onDownload: this.handleSubDownload,\n      onClean: this.handleSubClean,\n      onRemove: this.handleSubRemove,\n      // onEdit: this.handleSubEdit,\n      onClick: this.handleSubClick,\n      onCommit: this.handleSubCommit,\n      // onCancel: this.handleSubCancel,\n      onInsert: this.handleSubInsert,\n      onSwitch: this.handleVideoSwitch,\n      initPlayer: this.handlePlayerInit,\n      onVideoCanPlay: this.handleVideoCanPlay,\n      updateCurrentTime: this.handleCurrentTime,\n      onVideoPlayerPausedSwitch: this.handlePlayerPaused,\n      onVideoPlaying: this.handleVideoPlaying,\n      onWaveClick: this.handleWaveClick,\n      onWaveContextmenu: this.handleWaveContextmenu,\n      onSubBlockMove: this.handleSubBlockMove,\n      onSubBlockMoveError: this.handleSubBlockMoveError,\n      onSubBlockResize: this.handleSubBlockResize,\n      onSubBlockClick: this.handleSubBlockClick,\n      onDurationChange: this.handleDurationChange,\n      onAllSubTranslate: this.handleAllSubTranslateDebounce,\n      onSubArrayBackupReset: this.handleSubArrayBackupReset,\n      onVideoControlAction: this.handleVideoControlActions,\n    };\n\n    return (\n      <React.Fragment>\n        <Helmet>\n          <meta charSet=\"utf-8\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          {/* <meta name=\"application-name\" content={`${SubEditorPackage.name}`} />\n          <meta\n            name=\"description\"\n            content={`${SubEditorPackage.description}`}\n          />\n          <meta name=\"author\" content={`${SubEditorPackage.author.name}`} />\n          <meta\n            name=\"keywords\"\n            content={`${SubEditorPackage.keywords.join(\",\")}`}\n          />\n          <meta name=\"generator\" content=\"vscode\" />\n          <meta name=\"theme-color\" content=\"#66cccc\" />\n          <meta name=\"google\" content=\"notranslate\" />\n          <meta httpEquiv=\"x-ua-compatible\" content=\"IE=edge\" />\n          <meta name=\"render\" content=\"webkit\" /> */}\n          <title>{config.subeditor_title}</title>\n          <link rel=\"icon\" href={subeditorIco} />\n        </Helmet>\n        <GlobalStyle />\n        <Header {...funcProps} />\n        <Main id=\"mainContainer\">\n          <Left>\n            <VideoPlayer\n              {...funcProps}\n              picUrl={picUrl}\n              videoUrl={videoUrl}\n              subUrl={subUrl}\n              player={player}\n            />\n            <Tools\n              duration={duration}\n              videoUrl={videoUrl}\n              subUrl={subUrl}\n              playerPaused={playerPaused}\n              {...funcProps}\n            />\n          </Left>\n          <Right>\n            <SubTable\n              {...funcProps}\n              container={container}\n              subArray={subArray}\n              scrollIndex={scrollIndex}\n            />\n          </Right>\n        </Main>\n        {/* <Timeline {...funcProps}/> */}\n        <WaveLine\n          {...funcProps}\n          currentTime={currentTime}\n          videoUrl={videoUrl}\n          subArray={subArray}\n          duration={duration}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SubEditor;\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport config from \"../config/config.json\"\nimport guideService from \"../services/guideService\"\n\nconst Test = () => {\n  return (\n    <div className=\"container\">\n      <Helmet>\n        <title>{config.test_title}</title>\n      </Helmet>\n      <video\n        id=\"video\"\n        controls\n        width=\"900px\"\n        src={`${guideService.home}friday.mp4`}\n      >\n        <track\n          default\n          kind=\"subtitles\"\n          srcLang=\"en\"\n          src={`${guideService.home}friday.vtt`}\n        />\n      </video>\n    </div>\n  );\n};\n\nexport default Test;\n","import React, { Component } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { Switch, Route } from \"react-router-dom\";\nimport SubEditor from \"./components/subEditor\";\nimport Test from \"./components/test\";\nimport notifier from \"./utils/notifier\";\nimport guideService from \"./services/guideService\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nclass App extends Component {\n  state = {};\n  render() {\n    notifier.notify(\"hello\", \"top_left\");\n    return (\n      <React.Fragment>\n        <ToastContainer\n          autoClose={3000}\n          closeOnClick={false}\n          draggable={false}\n          position={toast.POSITION.TOP_LEFT}\n          className=\"toastContainerClass\"\n        />\n        <Switch>\n          <Route path={guideService.trackTest} component={Test} />\n          <Route path={guideService.subEditorPath} component={SubEditor} />\n        </Switch>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport styled from \"styled-components\";\nimport config from \"../config/config.json\";\n\nconst NotSupportMobileWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100vw;\n  .messageBox {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-image: url(${require(\"../resources/image/subEditor.png\")});\n    background-position: top center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    .message {\n      font-size: 2em;\n      color: #fff;\n      position: relative;\n      top: -15%;\n      white-space: pre-wrap;\n    }\n  }\n`;\n\nconst NotSupportMobile = () => {\n  return (\n    <NotSupportMobileWrapper>\n      <Helmet>\n        <title>{config.subeditor_title}</title>\n      </Helmet>\n\n      <div className=\"messageBox\">\n        <div className=\"message\">\n          {\"Sorry,\\n暂不支持移动设备，请使用PC端浏览器\"}\n        </div>\n      </div>\n    </NotSupportMobileWrapper>\n  );\n};\n\nexport default NotSupportMobile;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// import { BrowserRouter } from \"react-router-dom\";\n// 为了使用github的pages服务 改用HashRouter\nimport { HashRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport NotSupportMobile from \"./components/notSupportMobile\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport guideService from \"./services/guideService\";\nimport \"./index.css\";\nimport \"normalize.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport \"nprogress/nprogress.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"react-virtualized/styles.css\";\n\nconst isMobile = guideService.isMobile();\n\nReactDOM.render(\n  isMobile ? (\n    <NotSupportMobile />\n  ) : (\n    <HashRouter>\n      <App />\n    </HashRouter>\n  ),\n  document.getElementById(\"root\")\n);\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/subEditor.d0e3de75.png\";"],"sourceRoot":""}
(this["webpackJsonpsub-editor"]=this["webpackJsonpsub-editor"]||[]).push([[0],{133:function(e){e.exports=JSON.parse('{"name":"sub-editor","version":"1.0.2","private":false,"homepage":"./","repository":{"type":"git","url":"https://github.com/Shirtiny/SubEditor"},"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","axios":"^0.19.2","bootstrap":"^4.4.1","duration-time-conversion":"^1.0.1","flv.js":"^1.5.0","font-awesome":"^4.7.0","joi-browser":"^13.4.0","js-base64":"^2.5.2","js-md5":"^0.7.3","lodash":"^4.17.15","normalize.css":"^8.0.1","nprogress":"^0.2.0","react":"^16.13.0","react-dom":"^16.13.0","react-dplayer":"^0.3.3","react-helmet":"^6.0.0","react-i18nify":"^3.1.5","react-router-dom":"^5.1.2","react-scripts":"3.4.0","react-toastify":"^5.5.0","react-virtualized":"^9.21.2","shwave":"^1.7.6","styled-components":"^5.0.1"},"scripts":{"start":"cross-env PORT=2020 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^2.2.0"}}')},144:function(e,n,t){e.exports=t(261)},256:function(e,n,t){},261:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(29),i=t.n(o),l=t(94);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(3),s=t(2),u=t(12),d=t(9),p=t(13),m=t(52),h=t(25),b=t(42),f=t(19),g=t(28),v=t(14),y=t.n(v),x=t(20),w=t(15),S=t(46),k=t.n(S),E=t(16),T=function(){function e(n,t,a){Object(c.a)(this,e),this.start=Number(n.toFixed(3)),this.end=Number(t.toFixed(3)),this.content=a,this.editing=!1}return Object(s.a)(e,[{key:"startTime",get:function(){return me.toTime(this.start)}},{key:"endTime",get:function(){return me.toTime(this.end)}},{key:"length",get:function(){return Number((this.end-this.start).toFixed(3))}}]),e}(),C=t(53),N=t.n(C);var j={number2Time:function(e){var n=e.toFixed(3);return N.a.d2t(n)},time2Number:function(e){return N.a.t2d(e).toFixed(3)},getTimeLength:function(e,n){return(N.a.t2d(n)-N.a.t2d(e)).toFixed(3)}},O=t(32),A="off"===O.log;var _={clog:function(){var e;A||(e=console).log.apply(e,arguments)}},B=t(37),R=t(40),I=t.n(R),U=/^\d+:[0-5][0-9]:[0-5][0-9](\.[0-9]{1,3})?$/,L={startTime:I.a.string().regex(U).required().min(8).label("\u5f00\u59cb\u65f6\u95f4"),endTime:I.a.string().regex(U).required().min(8).label("\u7ed3\u675f\u65f6\u95f4"),content:I.a.string().required().max(100).min(1).label("\u6587\u672c\u5185\u5bb9"),start:I.a.number(),end:I.a.number(),length:I.a.number().greater(0)},P="\u683c\u5f0f\u5982 00:00:29.320\u683c\u5f0f\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",F="\u683c\u5f0f\u5982 00:00:29.320\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",z="\u9700\u8981\u57281-100\u4e2a\u5b57\u7b26\u4e4b\u95f4\uff0c\u4e0d\u80fd\u4e3a\u7a7a",D="\u5fc5\u987b\u4e3a\u6570\u5b57",W="\u5fc5\u987b\u4e3a\u6570\u5b57",M="\u4e0d\u80fd\u4e3a\u8d1f\u503c\u62160\uff0c\u5f00\u59cb\u65f6\u95f4\u8981\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4",V={startTime:"\u5f00\u59cb\u65f6\u95f4",endTime:"\u7ed3\u675f\u65f6\u95f4",content:"\u5b57\u5e55\u6587\u672c\u5185\u5bb9",start:"\u8d77\u59cb\u79d2\u6570",end:"\u7ed3\u675f\u79d2\u6570",length:"\u65f6\u957f"};var H={abortEarly:!1,allowUnknown:!0,skipFunctions:!0};function K(e,n,t,a){var r=Object(B.a)({},e,n),o=Object(f.a)({},H,{abortEarly:!0},a);return!!I.a.validate(r,t,o).error}var q={schema:L,getEditingSubSchema:function(){return{startTime:L.startTime,endTime:L.endTime,content:L.content,start:L.start,end:L.end,length:L.length}},getEditingErrorSchema:function(){return{startTime:P,endTime:F,content:z,start:D,end:W,length:M}},validate:function(e,n,t){var a=Object(f.a)({},H,{},t),r=I.a.validate(e,n,a).error;if(!r)return!1;_.clog("editingSub\u6821\u9a8c\u7ed3\u679c\uff0c\u51fa\u73b0\u7684\u9519\u8bef\uff1a",r);var o=[];return r.details.map((function(e){return o.push(e.path[0])})),k.a.uniq(o)},validateProperty:K,errors2messages:function(e){if(!e)return[];var n=Object.keys(e).map((function(n){return V[n]+": "+e[n]}));return 0===n.length&&n.push(" "),n},validateTime:function(e){return K("startTime",e,{startTime:L.startTime})}},$=O.sub_storage_key||"DefaultSubs",G=O.sub_storage_backup_key||"DefaultSubsBackup";function J(e){return Number(j.time2Number(e))}function Y(e,n){return Number(j.getTimeLength(e,n))}function Z(e,n,t){var a=new FileReader;a.readAsText(t),a.onerror=function(e){n(e)},a.onload=function(){e(a.result)}}function X(){return(X=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,new Promise((function(e,t){return Z(e,t,n)}));case 4:t=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),_.clog("\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0),e.t0.message="\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Q(e,n,t){var a=document.createElement("video"),r=document.createElement("track");a.appendChild(r),r.default=!0,r.kind="metadata",r.src=t,r.onerror=function(e){n(e)},r.onload=function(){e(r.track.cues)}}function ee(){return(ee=Object(x.a)(y.a.mark((function e(n){var t,a,r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,new Promise((function(e,t){return Q(e,t,n)}));case 4:t=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),_.clog("\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25\uff1a",e.t0),e.t0.message="\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25",e.t0;case 12:return a=Array.from(t||{}),_.clog("\u5f97\u5230VTTCues\u6570\u7ec4\uff1a",a),r=a.map((function(e){return new T(e.startTime,e.endTime,e.text)})),o=r.map((function(e){return te(e)})),_.clog("\u5f97\u5230\u5b57\u5e55\u6570\u7ec4\uff1a",o),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ne(e){var n=new Blob([e],{type:"text/vtt"});return _.clog("vtt\u5b57\u5e55Blob\u5bf9\u8c61",n),URL.createObjectURL(n)}function te(e){var n=ie(e.startTime),t=ie(e.endTime);return{start:J(n),startTime:n,end:J(t),endTime:t,length:Y(n,t),content:e.content}}function ae(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var r=t.map((function(e){return te(e)})),o=JSON.stringify(r);a?localStorage.setItem(G,o):localStorage.setItem($,o),e(o)}catch(i){_.clog("subs\u5b58\u5165local\u65f6\u51fa\u9519",i),n(i)}}function re(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t?G:$,r=localStorage.getItem(a);try{var o=JSON.parse(r);e(o||[])}catch(i){_.clog("\u8bfb\u53d6local\u540e\uff0cJson\u89e3\u6790\u51fa\u9519",i),n(i)}}function oe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,t){return re(n,t,e)}))}function ie(e){var n=e.match(/^(\d+:[0-5][0-9]:[0-5][0-9])(\.[0-9]{1,3})?$/);if(n&&n[2]){for(var t=n[2];t.length<4;)t+="0";return n[1]+t}return n&&n[1]?n[1]:"00:00:00"}function le(e){var n="WEBVTT\n\n"+e.map((function(e,n){return"".concat(n+1,"\n").concat(e.startTime," --\x3e ").concat(e.endTime,"\n").concat(e.content,"\n")})).join("\n");return _.clog(n),n}function ce(e,n){var t=document.createElement("a");t.style.display="none",t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function se(e){return e&&0!==e.length?ne(le(e)):""}function ue(){return(ue=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:if((n=e.sent)&&0!==n.length){e.next=6;break}return e.abrupt("return",!1);case 6:return ce(se(n),"\u5b57\u5e55.vtt"),e.abrupt("return",!0);case 11:throw e.prev=11,e.t0=e.catch(0),_.clog("\u4e0b\u8f7d\u5b57\u5e55\u51fa\u9519\uff1a",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function de(e){return e&&0!==e.length?e.map((function(e){return e.content})):[]}function pe(){return(pe=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return n=e.sent,e.abrupt("return",de(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me={readSubFileAsText:function(e){return X.apply(this,arguments)},createSubArray:function(e){return ee.apply(this,arguments)},createVttSubBlobUrl:ne,mapSubToFullModel:te,saveSubArray:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(t,a){return ae(t,a,e,n)}))},cleanSubArray:function(){localStorage.removeItem($)},getSubArray:oe,getSubLength:function(e){var n={startTime:q.schema.startTime,endTime:q.schema.endTime};return q.validate(e,n,{abortEarly:!0})?e.length:Y(ie(e.startTime),ie(e.endTime))},mapSubArray2Text:le,createSubArrayUrl:se,downloadFromUrl:ce,downloadSubFile:function(){return ue.apply(this,arguments)},getDefaultSub:function(e,n){_.clog("\u63d2\u5165\u53c2\u6570\uff1a",e,n,typeof(e+n));var t=0,a=.001;if("number"===typeof(e+n))return t=Number(e.toFixed(3)),a=Number(n.toFixed(3)),new T(t,a,"\u9ed8\u8ba4\u6587\u672c");var r=q.validateTime(e),o=q.validateTime(n);return r||o||(t=J(ie(e)),a=J(ie(n))),new T(t,a,"\u9ed8\u8ba4\u6587\u672c")},toTime:function(e){return j.number2Time(e)},toNumber:J,getTimeLength:Y,createSubUrlWorker:function(e){var n=new Blob(['this.addEventListener(\'message\', function (e) {\n    //\u8f6c\u4e3a\u6587\u672c\n    // subArray\u7684\u683c\u5f0f\u5fc5\u987b\u7b26\u5408\u5b58\u50a8\u89c4\u8303\n    const subArray = e.data;\n    const vttCueStrArray = subArray.map(\n    (sub, index) =>\n      `${index + 1}\n${sub.startTime} --\x3e ${sub.endTime}\n${sub.content}\n`\n  );\n    const vttText = "WEBVTT\\n\\n" + vttCueStrArray.join("\\n");\n    const vttBlob = new Blob([vttText], {\n      type: "text/vtt"\n    });\n    const subUrl = URL.createObjectURL(vttBlob);\n    this.postMessage(subUrl);\n  }, false);']),t=new Worker(URL.createObjectURL(n));return t.onmessage=function(n){var t=n.data;e(t)},t},sortSubArray:function(e){var n=Object(g.a)(e);return n.sort((function(e,n){return e.start-n.start})),n},createSubTextArr:de,createSubTextArrFromStorage:function(){return pe.apply(this,arguments)}},he={home:"".concat(window.location.protocol,"//").concat(window.location.host,"/"),subEditorPath:"/",trackTest:"/test"};var be={createVideoType:function(e){if("string"!==typeof e)return"";var n=e.match(/^video\/(mp4|x-(flv))+$/);_.clog("\u5339\u914d\u89c6\u9891\u7c7b\u578b",n);var t=n&&n[2]?n[2]+"Custom":n?n[1]:"";return _.clog("\u5339\u914d\u548c\u62fc\u63a5\u7684\u7ed3\u679c",t),t},getDefaultPicUrl:function(){return"".concat(he.home,"subEditor.png")},getDefaultSubUrl:function(){return"".concat(he.home,"welcom.vtt")}},fe=function(e){var n=e.head,t=e.small,a=e.dataArray,o=e.type;return r.a.createElement("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{border:"none",boxShadow:"none"}},r.a.createElement("div",{className:"toast-header"},r.a.createElement("svg",{className:"rounded mr-2",width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img"},r.a.createElement("rect",{width:"100%",height:"100%",fill:{primary:"#007aff",warning:"#ff8300"}[o]})),r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,t||"\u63d0\u793a")),r.a.createElement("div",{className:"toast-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e},e)})))))},ge={slide:h.c,zoom:h.e,flip:h.b,bounce:h.a};function ve(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top_left",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bounce",o=(n+"").toUpperCase(),i=(t+"").toUpperCase(),l=Object(f.a)({position:h.f.POSITION[o],type:h.f.TYPE[i],transition:ge[r]},a);return Object(h.f)(e,l)}var ye={notify:ve,bootstrapToast:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top_left",a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zoom";return ve(r.a.createElement(fe,{head:"\u8bf7\u68c0\u67e5\u8f93\u5165\u683c\u5f0f",dataArray:e,type:n}),t,"default",a,o)},isActive:function(e){return h.f.isActive(e)},done:function(e){return h.f.done(e)}},xe=t(95),we=t.n(xe);var Se={get:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(f.a)({params:n},t);return we.a.get(e,a)},post:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return we.a.post(e,n,t)}},ke=t(131),Ee=t.n(ke),Te=t(132);var Ce=new URL("https://fanyi-api.baidu.com/api/trans/vip/translate"),Ne=Ce.searchParams;function je(e,n,t){console.log("\u767e\u5ea6\u7ffb\u8bd1");var a=(new Date).getTime(),r=Ee()("".concat("20180619000178085").concat(t).concat(a).concat("ZEg5rb06NeW4wNjslD6F"));Ne.set("salt",a),Ne.set("sign",r),Ne.set("from",e),Ne.set("to",n),Ne.set("q",t);var o=Te.Base64.btoa(Ce.href);return Se.get("https://shproxy.herokuapp.com/shProxyApi/v1/get?url=".concat(o)).then((function(e){if(console.log("\u767e\u5ea6\u7ffb\u8bd1\u8bf7\u6c42\u7ed3\u679c\uff1a",e),!e.data||!e.data.trans_result)throw new Error("\u7ffb\u8bd1\u51fa\u9519");return e.data.trans_result&&e.data.trans_result.map((function(e){return e.dst}))||[]})).catch((function(e){throw new Error(e)}))}Ne.append("appid","20180619000178085");var Oe=k.a.debounce((function(e,n,t){return je(e,n,t)}),2e3,{leading:!0,trailing:!1}),Ae={auto:"\u81ea\u52a8\u68c0\u6d4b",zh:"\u4e2d\u6587",en:"\u82f1\u8bed",cht:"\u7e41\u4f53\u4e2d\u6587",yue:"\u7ca4\u8bed",wyw:"\u6587\u8a00\u6587",jp:"\u65e5\u8bed",kor:"\u97e9\u8bed",fra:"\u6cd5\u8bed",spa:"\u897f\u73ed\u7259\u8bed",th:"\u6cf0\u8bed",ara:"\u963f\u62c9\u4f2f\u8bed",ru:"\u4fc4\u8bed",pt:"\u8461\u8404\u7259\u8bed",de:"\u5fb7\u8bed",it:"\u610f\u5927\u5229\u8bed",el:"\u5e0c\u814a\u8bed",nl:"\u8377\u5170\u8bed",pl:"\u6ce2\u5170\u8bed",bul:"\u4fdd\u52a0\u5229\u4e9a\u8bed",est:"\u7231\u6c99\u5c3c\u4e9a\u8bed",dan:"\u4e39\u9ea6\u8bed",fin:"\u82ac\u5170\u8bed",cs:"\u6377\u514b\u8bed",rom:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",slo:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",swe:"\u745e\u5178\u8bed",hu:"\u5308\u7259\u5229\u8bed",vie:"\u8d8a\u5357\u8bed"};var _e=O.translate_arr_separator;var Be={googleTranslate:function(e,n){var t=new URL("https://translate.googleapis.com/translate_a/single");t.searchParams.append("client","gtx"),t.searchParams.append("sl","auto"),t.searchParams.append("dt","t"),t.searchParams.append("tl",e),t.searchParams.append("q",n),Se.get("https://translate.googleapis.com/translate_a/single",t.searchParams).then((function(e){console.log("\u8c37\u6b4c\u7ffb\u8bd1",e)}))},baiduTranslate:je,getBaiduTranslateLangKey:function(e){var n=k.a.findKey(Ae,(function(n){return n===e}));console.log(n)},getBaiduTranslateLanguages:function(){return Ae},translateByLangKey:function(e,n,t){return Ae[e]&&Ae[n]?Oe(e,n,t):""},translateDebounce:Oe,createTranslateTextFromStringArr:function(e){return e&&0!==e.length?e.join(_e):""}},Re=t(47),Ie=t.n(Re);Ie.a.configure({minimum:.1});var Ue={start:function(e){return e?Ie.a.start().set(e):Ie.a.start()},set:function(e){return e&&Ie.a.set(e)},inc:function(e){return e&&Ie.a.inc(e)},done:function(){Ie.a.done()}},Le=t(133);function Pe(){var e=Object(w.a)(["\n  text-decoration: none;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 400;\n  color: #66cccc;\n\n  :hover {\n    text-decoration: none;\n    color: #66cccc;\n  }\n\n  .version {\n    font-size: 12px;\n    font-weight: 600;\n    margin-left: 20px;\n    opacity: 0.4;\n    font-style: italic;\n    color: #262a3e;\n  }\n"]);return Pe=function(){return e},e}function Fe(){var e=Object(w.a)(["\n  //\u5bfc\u822a\u680f\u56fa\u5b9a50px\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: hsla(0, 0%, 100%, 0.8);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n  .band {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    padding-left: 30px;\n    flex-grow: 6;\n  }\n\n  .body {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-grow: 1;\n\n    .buttons {\n      height: 100%;\n      display: flex;\n      align-items: center;\n    }\n\n    .links {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 40px;\n      i {\n        margin-right: 5px;\n      }\n      a {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 18px;\n        font-weight: 600;\n        padding: 0 10px 0 10px;\n\n        &:hover {\n          color: #66cccc;\n          //   text-decoration: underline;\n        }\n      }\n    }\n\n    .users {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 20px;\n      .avatar {\n        border-radius: 50%;\n        height: 40px;\n        border: 1px solid #ddd;\n        padding: 4px;\n        display: block;\n      }\n      span {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n      }\n      span:hover {\n        color: #66cccc;\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}var ze=E.b.header(Fe()),De=E.b.a(Pe()),We=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={user:{}},t.handleLogout=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.location.reload();case 1:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(ze,null,r.a.createElement("div",{className:"band"},r.a.createElement(De,{href:he.subEditorPath,title:"Copyright \xa9 2020 SH"},"SubEditor",r.a.createElement("span",{className:"version"},"version ",Le.version))),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"https://github.com/Shirtiny/SubEditor",title:"\u524d\u5f80Github"},r.a.createElement("i",{className:"fa fa-github","aria-hidden":"true"}),"Github")),r.a.createElement("div",{className:"users"},r.a.createElement("a",{href:"http://localhost:2020",title:this.state.user.userName||"\u672a\u767b\u5f55",style:{marginRight:"10px"}},r.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.user.avatarImage||"".concat(he.home,"subEditorLogo.png")})),this.state.user.userName&&r.a.createElement("span",{onClick:this.handleLogout,title:"\u9000\u51fa\u767b\u5f55"},"\u6ce8\u9500"))))}}]),n}(a.PureComponent),Me=t(136),Ve=t.n(Me),He=t(97);function Ke(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70%;\n  padding: 15px;\n  // border-bottom: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n\n  .dplayer_DefaultSize {\n    width: 90%;\n    height: 90%;\n  }\n\n  .dplayer {\n    max-width: 100%;\n    max-height: 100%;\n  }\n\n  .dplayer_disable {\n    pointer-events: none;\n  }\n\n  .playerBorder {\n    border: 4px solid #529393;\n    border-radius: 0.5em;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n  }\n\n  .hiddenSubs {\n    ::cue {\n      opacity: 0;\n    }\n  }\n"]);return Ke=function(){return e},e}var qe=E.b.div(Ke()),$e=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).load=function(e){(0,t.props.initPlayer)(e)},t.error=function(){document.getElementById("player").classList.add("dplayer_DefaultSize","dplayer_disable")},t.canPlay=function(){var e=t.props,n=e.player,a=e.onVideoCanPlay;n.notice("\u221a",1500,.8),a(),document.getElementById("player").classList.remove("dplayer_disable")},t.playing=function(){(0,t.props.onVideoPlaying)()},t.fullscreen=function(){var e=document.getElementById("player");e.classList.remove("playerBorder"),e.style.resize=""},t.fullscreenCancel=function(){var e=document.getElementById("player");e.classList.add("playerBorder"),e.style.resize="both"},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"shouldComponentUpdate",value:function(e,n){return!1}},{key:"render",value:function(){var e=this.props,n=e.videoUrl,t=e.picUrl,a=e.subUrl;return r.a.createElement(qe,{id:"playerBox"},r.a.createElement(Ve.a,{id:"player",className:"playerBorder dplayer_disable "+(t?"":"dplayer_DefaultSize"),style:{resize:"both"},options:{video:{url:n,pic:t,customType:{flvCustom:function(e,n){if(_.clog("\u652f\u6301flv"),He.a.isSupported()){var t=He.a.createPlayer({type:"flv",url:e.src,hasAudio:!0});t.attachMediaElement(e),t.load()}}}},subtitle:{url:a,type:"webvtt",fontSize:"25px",bottom:"3%",color:"rgb(37, 211, 211)"},contextmenu:[{text:"SubEditor"},{text:"\u4f7f\u5185\u5bb9\u7684\u9ad8\u5ea6\u9002\u5e94\u4e8e\u5bbd\u5ea6",click:function(e){document.getElementById("player").style.height=""}},{text:"\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u9ad8\u5ea6",click:function(e){var n=document.getElementById("player");n.style.height="",n.style.width="90%"}},{text:"chrome\u5b57\u5e55\u9690\u85cf/\u663e\u793a",click:function(e){var n=e.video;n.className.indexOf("hiddenSubs")>0?n.classList.remove("hiddenSubs"):n.classList.add("hiddenSubs")}}],theme:"#ccc",loop:!0},onLoad:this.load,onError:this.error,onCanplay:this.canPlay,onPlaying:this.playing,onFullscreen:this.fullscreen,onFullscreenCancel:this.fullscreenCancel}))}}]),n}(a.Component),Ge=t(143);function Je(){var e=Object(w.a)(["\n  font-size: 14px;\n  color: #495057;\n  background-color: #fff;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  background-clip: padding-box;\n\n  height: calc(1.5em + 0.5rem + 2px);\n  padding: 0.25rem 0.25rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem;\n\n  &.input_success {\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\n    }\n  }\n  &.input_error {\n    border-color: #dc3545;\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(232, 43, 43, 0.3);\n    }\n  }\n"]);return Je=function(){return e},e}var Ye=E.b.input(Je()),Ze=function(e){var n=e.className,t=e.type,a=e.name,o=e.value,i=e.onChange,l=e.disabled,c=e.style,s=e.errors;return r.a.createElement(Ye,{disabled:l,className:[].concat(Object(g.a)(n),[s[a]?"input_error":"input_success"]),type:t,value:o,onChange:function(e){return i(a,e.currentTarget.value)},style:Object(f.a)({},c)})};function Xe(){var e=Object(w.a)(["\n  .rowClasses {\n    background-color: #f2f2f2;\n    // border-bottom: 1px solid rgb(36, 41, 45);\n    min-width: 650px;\n    transition: all 0.15s ease;\n\n    //\u53d6\u6d88\u6d4f\u89c8\u5668\u7684\u53cc\u51fb\u9009\u4e2d\n    -moz-user-select: none; /*\u706b\u72d0*/\n    -webkit-user-select: none; /*webkit\u6d4f\u89c8\u5668*/\n    -ms-user-select: none; /*IE10*/\n    -khtml-user-select: none; /*\u65e9\u671f\u6d4f\u89c8\u5668*/\n    user-select: none;\n\n    &.odd {\n      background-color: #fff;\n    }\n\n    &.highlight {\n      background-color: #2196f3;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    &.illegal {\n      background-color: #c75123;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    .rowT {\n      padding: 10px 5px;\n      text-align: center;\n    }\n\n    &: hover {\n      background-color: #529393;\n      color: #fff;\n      //\u5b57\u7a0d\u5fae\u5927\u4e9b\n      font-size: 14px;\n    }\n\n    &.onEditing {\n      background-color: #66cccc;\n\n      //\u7f16\u8f91\u65f6\u8fd4\u56de\u9690\u85cf \u975e\u7f16\u8f91\u72b6\u6001\u8fd4\u56de\u663e\u793a\n      .display_onEditing {\n        display: block !important;\n      }\n      .hidden_onEditing {\n        display: none !important;\n      }\n    }\n\n    .editing_default_hidden {\n      //\u9ed8\u8ba4\u9690\u85cf\n      display: none;\n      width: 100%;\n      height: 100%;\n    }\n\n    .operation {\n      display: flex;\n      justify-content: center;\n\n      i {\n        width: 25px;\n        cursor: pointer;\n        font-size: 16px;\n        &: hover {\n          //\u56fe\u6807\u7c97\u4e9b\n          font-weight: 600;\n          // color: #ccc;\n          color: #82a8b7;\n          &.deleteIcon {\n            color: #f5f239;\n          }\n        }\n      }\n    }\n  }\n\n  .lineBox {\n    display: none;\n    height: 0;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    bottom: 0px;\n    border-bottom: 0px dashed #529393;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    transition: color, border-color 0.3s ease-in-out;\n    &:hover {\n      display: block;\n      bottom: -5px;\n      border-bottom: 10px solid #02c0ff;\n      .insertBtn {\n        color: #02c0ff !important;\n        bottom: 10px;\n      }\n    }\n  }\n\n  .insertBtn {\n    position: absolute;\n    right: 4px;\n    width: 20px;\n    height: 20px;\n    bottom: 15px;\n  }\n\n  //\u5f53scroll\u6eda\u5230\u5f53\u524drow row\u7684\u52a8\u753b\n  .scrollToRowAnimation {\n    animation: scrollToRowAnimation 3s;\n    //\u64ad\u653e\u6b21\u6570\u65e0\u9650\u5236\n    // animation-iteration-count: infinite;\n  }\n\n  .scrollIndexBackColor {\n    transition: background-color 0.5s ease-in;\n    background-color: #04e8e8 !important;\n    &:hover {\n      color: black;\n    }\n  }\n"]);return Xe=function(){return e},e}var Qe=E.b.div(Xe()),en=0,nn=function(e){var n=e.index,t=e.style,a=e.className,o=e.rowData,i=e.onRowRemove,l=e.onRowEdit,c=e.onRowClick,s=e.onRowCommit,u=e.onRowCancel,d=e.onRowInsert,p=e.editingSub,m=e.errors,h=e.onInputValueChange,b=e.displayIndex,f=e.scrollIndex,g=["editing_default_hidden","display_onEditing"].join(" ");return r.a.createElement(Qe,null,r.a.createElement("div",{key:n,style:t,className:[a,"rowClasses",n%2?"odd":"",o.editing?"onEditing":"",f===n?"scrollIndexBackColor":""].join(" "),onClick:function(){en+=1,setTimeout((function(){1===en?c(o):2===en&&l(o),en=0}),200)}},r.a.createElement("div",{className:"rowT operation",style:{width:90}},r.a.createElement("i",{onClick:function(e){e.stopPropagation(),l(o)},className:"fa fa-pencil ".concat("hidden_onEditing"),title:"\u7f16\u8f91"}),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),s(o)},className:"fa fa-check-circle-o ".concat(g),title:"\u4fdd\u5b58"}),r.a.createElement("i",{className:"fa fa-times deleteIcon",onClick:function(e){e.stopPropagation(),i(o)},title:"\u5220\u9664"})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.startTime),r.a.createElement(Ze,{className:[g],type:"text",name:"startTime",value:p.startTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.endTime),r.a.createElement(Ze,{className:[g],type:"text",name:"endTime",value:p.endTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.length),r.a.createElement("span",{className:"".concat(g)},p.length)),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.content),r.a.createElement(Ze,{className:[g],type:"text",name:"content",value:p.content,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT operation",style:{width:50}},r.a.createElement("span",{style:{display:b?"block":"none"},className:"".concat("hidden_onEditing")},n),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),u(o)},className:"fa fa-reply ".concat(g),title:"\u53d6\u6d88\u7f16\u8f91"}),r.a.createElement("div",{className:"".concat("hidden_onEditing"," lineBox "),style:{display:b?"none":"block"}},r.a.createElement("i",{className:"fa fa-plus-square  insertBtn",title:"\u63d2\u5165\u5b57\u5e55",onClick:function(e){e.stopPropagation(),d(o)}})))))};function tn(){var e=Object(w.a)(["\n  background: #c0d9d9;\n  display: flex;\n  min-width: 650px;\n\n  .rowT {\n    padding: 10px 5px;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    text-align: center;\n    text-transform: none;\n  }\n\n  .buttonLike {\n    position: relative;\n    background: #ffffff;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 30px;\n    // margin-right: 10px;\n    padding: 9px 16px;\n    border-style: none;\n    border-radius: 10px;\n    overflow: hidden;\n    transition: all 200ms linear 0s;\n\n    i {\n      margin-right: 5px;\n    }\n  }\n\n  .switchButton {\n    cursor: pointer;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n      span {\n        display: block;\n      }\n    }\n  }\n\n  .stayButton {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    cursor: pointer;\n    span {\n      position: relative;\n      top: 4px;\n    }\n    transition: all 0.3s ease;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n    }\n  }\n"]);return tn=function(){return e},e}var an=E.b.div(tn()),rn=function(e){var n=e.displayIndex,t=e.onDisplayIndexSwitch,a=e.subArrayLenIsZero,o=e.onInsert;return r.a.createElement(an,null,r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("div",{className:"buttonLike"},r.a.createElement("span",{style:{display:a?"none":"block"}},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"}),"\u7f16\u8f91"),r.a.createElement("div",{onClick:function(){return o()},className:"stayButton",style:{display:a?"block":"none"}},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u5efa")))),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-backward","aria-hidden":"true"}),"\u5f00\u59cb")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-forward","aria-hidden":"true"}),"\u7ed3\u675f")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"}),"\u65f6\u957f")),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"buttonLike "},r.a.createElement("i",{className:"fa fa-text-width","aria-hidden":"true"}),"\u5185\u5bb9")),r.a.createElement("div",{className:"rowT",style:{width:50}},r.a.createElement("div",{className:"buttonLike switchButton",onClick:function(){return t(!n)}},r.a.createElement("span",{style:{display:n?"block":"none"},className:" fa fa-sort-amount-asc",title:"\u5207\u6362\u5230\u529f\u80fd"}),r.a.createElement("span",{style:{display:n?"none":"block"},className:" fa fa-sliders",title:"\u5207\u6362\u5230\u5e8f\u53f7"}))))};function on(){var e=Object(w.a)(["\n  .ReactVirtualized__Table {\n    font-size: 12px;\n    background: #e3eeee;\n    // background: #c0d9d9; root\u80cc\u666f\u8272\n\n    .ReactVirtualized__Table__Grid {\n      outline: none;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n      border-radius: 0.5rem;\n      min-width: 650px;\n      background: #e3eeee;\n\n      .ReactVirtualized__Grid__innerScrollContainer {\n        min-width: 650px;\n      }\n    }\n\n    .gridScrollWrap {\n      overflow: hidden !important;\n      :hover {\n        overflow-y: scroll !important;\n\n        // fireFox\n        scrollbar-color: #6fd1d8 #fff;\n        // scrollbar-color: light;\n        scrollbar-width: thin;\n        // scrollbar-width: none;\n\n        //Safari and Chrome\n        ::-webkit-scrollbar {\n          // display: none;\n          width: 5px; /*\u9ad8\u5bbd\u5206\u522b\u5bf9\u5e94\u6a2a\u7ad6\u6eda\u52a8\u6761\u7684\u5c3a\u5bf8*/\n        }\n        ::-webkit-scrollbar-thumb {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u5c0f\u65b9\u5757*/\n          border-radius: 10px;\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          background: #6fd1d8;\n          height: 10px;\n        }\n\n        ::-webkit-scrollbar-track {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u8f68\u9053*/\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          border-radius: 10px;\n          background: #fff;\n        }\n      }\n    }\n\n    .input,\n    .textarea {\n      border: none;\n      padding: 5px;\n      min-height: 30px;\n      font-size: 12px;\n      text-align: center;\n      background-color: #3a3a3a;\n    }\n\n    .textarea {\n      resize: vertical;\n    }\n\n    p {\n      line-height: 1.5;\n      margin: 0;\n    }\n  }\n"]);return on=function(){return e},e}var ln=E.b.div(on()),cn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).$tableRef=r.a.createRef(),t.state={editingSub:{start:0,startTime:"",end:0,endTime:"",length:0,content:""},errors:{},displayIndex:!0},t.schema={},t.errorSchema={},t.toastId_validate=null,t.toastId_validatePropertys={startTime:null,endTime:null,content:null},t.validate=function(){var e=q.validate(t.state.editingSub,t.schema),n={};return e&&e.map((function(e){return n[e]=t.errorSchema[e]})),0===Object.keys(n).length?(t.setState({errors:{}}),!1):(t.setState({errors:n}),n)},t.toast_validate=function(e){ye.done(t.toastId_validate),t.toastId_validate=ye.bootstrapToast(e,"warning","top_left",{autoClose:1e4},"flip")},t.validateProperty=function(e,n){var a=Object(B.a)({},e,t.schema[e]),r=q.validateProperty(e,n,a),o=Object(f.a)({},t.state.errors);return r?(o[e]=t.errorSchema[e],t.setState({errors:o}),Object(B.a)({},e,t.errorSchema[e])):(delete o[e],t.setState({errors:o}),!1)},t.toast_validateProperty=function(e,n){var a=t.toastId_validatePropertys[e],r=Object.values(t.toastId_validatePropertys),o=r.indexOf(a);r.splice(o,1),r.map((function(e){return ye.done(e)})),ye.isActive(a)||(t.toastId_validatePropertys[e]=ye.notify(n.length>0&&n[0],"bottom_left","default",{hideProgressBar:!0,autoClose:5e3},"flip"))},t.handleInputValue=function(e,n){var a=Object(f.a)({},t.state.editingSub);a[e]=n;var r=t.validateProperty(e,n);if(r){var o=q.errors2messages(r);t.toast_validateProperty(e,o)}else ye.done(t.toastId_validatePropertys[e]),a.length=me.getSubLength(a);t.setState({editingSub:a},(function(){}))},t.handleRowEdit=function(e){var n=t.props.onEdit,a=me.mapSubToFullModel(e);t.setState({editingSub:a},(function(){t.validate(),_.clog("\u8868\u5355\u56de\u663e\uff1a",t.state.editingSub)})),n(e)},t.handleRowClick=function(e){(0,t.props.onClick)(e)},t.handleRowCommit=function(e){var n=t.props.onCommit,a=t.validate();if(a){var r=q.errors2messages(a);t.toast_validate(r)}else ye.done(t.toast_validate),n(e,me.mapSubToFullModel(t.state.editingSub))},t.handleRowRemove=function(e){var n=t.props.onRemove;_.clog("\u5220\u9664\u4e00\u884c\uff1a",e),n(e)},t.handleRowCancel=function(e){var n=t.props.onCancel;_.clog("\u53d6\u6d88\u7f16\u8f91\uff1a",e),n(e)},t.tableBackGroundColor=function(e){var n=e&&0===e.length?"#e3eeee":"#c0d9d9",t=document.getElementById("vSubTable");t&&(t.style.backgroundColor=n)},t.handleDisplayIndexSwitch=function(e){var n=!!e;t.setState({displayIndex:n})},t.handleRowInsert=function(e){(0,t.props.onInsert)(e)},t.scrollToButtom=function(){var e=document.getElementsByClassName("gridScrollWrap")[0],n=e.scrollTop,t=e.scrollHeight,a=e.clientHeight;console.log(e,"scrollHeight:",t,";scrollTop:",n,";clientHeight:",a,";scrollHeight - scrollTop - clientHeight:",t-n-a),e.scrollTop=e.scrollTop+(t-n-a)},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.schema=q.getEditingSubSchema(),this.errorSchema=q.getEditingErrorSchema()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,n=this.props,t=n.subArray,a=n.scrollIndex,o=n.container,i=n.onInsert,l=o.containerHeight,c=o.containerWidth;return this.tableBackGroundColor(t),r.a.createElement(ln,null,r.a.createElement(Ge.a,{id:"vSubTable",ref:this.$tableRef,headerHeight:35,width:c/2,height:l,gridClassName:"gridScrollWrap",rowHeight:60,scrollToIndex:a,rowCount:t.length,rowGetter:function(e){var n=e.index;return t[n]},headerRowRenderer:function(){return r.a.createElement(rn,Object.assign({},e.state,{subArrayLenIsZero:t&&0===t.length,onInsert:i,onDisplayIndexSwitch:e.handleDisplayIndexSwitch}))},rowRenderer:function(n){return r.a.createElement(nn,Object.assign({},n,{onRowRemove:e.handleRowRemove,onRowEdit:e.handleRowEdit,onRowClick:e.handleRowClick,onRowCommit:e.handleRowCommit,onRowCancel:e.handleRowCancel,onRowInsert:e.handleRowInsert,onInputValueChange:e.handleInputValue},e.state,{scrollIndex:a}))}}))}}]),n}(a.PureComponent);function sn(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  user-select: none;\n  position: relative;\n  border-radius: 10px;\n  overflow: hidden;\n  color: white;\n  cursor: pointer;\n  box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n\n  .rippleSpan {\n    display: block;\n    position: absolute;\n    border-radius: 100%;\n    background: rgba(255, 255, 255, 0.5);\n    transform: scale(0);\n  }\n\n  .rippleAnimation {\n    animation: ripple 0.5s ease-in;\n  }\n\n  .btnMouseDown {\n    opacity: 0.5;\n  }\n"]);return sn=function(){return e},e}var un=E.b.div(sn()),dn=function(e){var n=e.disabled,t=e.height,o=e.width,i=e.bgColor,l=e.label,c=e.color,s=e.onClick,u=e.title,d=e.className,p=e.element,m=Object(a.useCallback)((function(e){null===e||n||(e.onmouseenter=function(n){var t=e.querySelector(".rippleSpan");t.classList.add("rippleAnimation"),t.style.width=this.offsetWidth+"px",t.style.height=this.offsetWidth+"px",t.style.top=-(this.offsetHeight-n.offsetY)+"px",t.style.left=-(this.offsetWidth/2-n.offsetX)+"px",setTimeout((function(){t.classList.remove("rippleAnimation")}),500)},e.onmousedown=function(e){this.style.opacity=.7,this.style.boxShadow="0px 0px 0px rgba(0, 0, 0, 0.2)"},e.onmouseup=function(e){this.style.opacity="",this.style.boxShadow=""})}),[n]);return r.a.createElement(un,{ref:m,onClick:s,title:u,style:{width:o,height:t,color:c,backgroundColor:i},className:d},r.a.createElement("span",{className:"rippleSpan"}),l,p)};function pn(){var e=Object(w.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: auto;\n  cursor: pointer;\n"]);return pn=function(){return e},e}function mn(){var e=Object(w.a)(['\n  flex: 1;\n  display: flex;\n  padding: 15px;\n\n  .toolsContainerBox {\n    display: flex;\n    flex: 1;\n  }\n\n  .clearBox {\n    flex: 1;\n    display: flex;\n    flex-direction: column-reverse;\n  }\n  .toolsBox {\n    flex: 1;\n    border: 1px dashed #529393;\n    display: flex;\n    flex-direction: column;\n\n    .shRow {\n      display: flex;\n    }\n\n    .shRowHeader {\n      width: 100px;\n      display: flex;\n      padding: 5px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .shRowBody {\n      flex: 1;\n      display: flex;\n      padding: 0 30px 0 30px;\n      justify-content: space-between;\n      align-items: center;\n      flex-direction: row;\n\n      .toolsBtn {\n        // margin-right: 15px;\n        z-index: 1;\n        // pointer-events: none;\n      }\n    }\n\n    //select\u6837\u5f0f\n    .toolsSelect {\n      user-select: none;\n      border: none;\n      background: none;\n      appearance: none;\n      -webkit-appearance: none;\n      -ms-appearance: none;\n      -moz-appearance: none;\n      -o-appearance: none;\n      outline: none;\n      text-align: center; //\u6587\u5b57\u5bf9\u9f50\u65b9\u5f0f\n      text-align-last: center;\n      height: 35px;\n      width: 90px;\n      border-radius: 5px;\n      background: linear-gradient(150deg, #00dfea, #66cccc);\n      color: white;\n      cursor: pointer;\n      box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n      overflow: hidden;\n      // margin-right: 10px;\n      option {\n        color: black;\n        background: #ffffff;\n      }\n    }\n  }\n\n  //\u6ed1\u5757\u6837\u5f0f\n  input[type="range"] {\n    appearance: none;\n    height: 3px;\n    width: 200px;\n    outline: none;\n    background-color: #529393;\n    border-radius: 10px;\n  }\n  //firefox\u53bbinput range \u7684outline\n  input[type="range"]::-moz-focus-outer {\n    border: 0;\n  }\n\n  //chorme\n  input[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    outline: none;\n    height: 15px;\n    width: 15px;\n    background: #ffffff;\n    border-radius: 50%;\n  }\n']);return mn=function(){return e},e}var hn=E.b.div(mn()),bn=E.b.input(pn()),fn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).languages=Be.getBaiduTranslateLanguages(),t.languagesKeys=Object.keys(t.languages),t.state={currentLanguageKeyFrom:"auto",currentLanguageKeyTo:"zh"},t.handleLanguageChange=function(e,n){t.setState(Object(B.a)({},e,n))},t.handleTranslate=function(){var e=t.props.onAllSubTranslate,n=t.state;e(n.currentLanguageKeyFrom,n.currentLanguageKeyTo)},t.handleTranslateBackupReset=function(){(0,t.props.onSubArrayBackupReset)()},t.handleSubFile=function(){var e=Object(x.a)(y.a.mark((function e(n){var a,o,i,l,c,s,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue.start(),"text/vtt"===(a=n.currentTarget.files[0]).type){e.next=6;break}return Ue.done(),ye.notify("\u6682\u53ea\u652f\u6301vtt\u683c\u5f0f\u7684\u5b57\u5e55\u6587\u4ef6\uff0c\u5176\u4ed6\u683c\u5f0f\u5c06\u5728\u540e\u7eed\u66f4\u65b0\u4e2d\u52a0\u5165","top_center","warning"),e.abrupt("return");case 6:return o=t.props,i=o.updateSubArray,l=o.updateSubUrl,e.prev=7,e.next=10,me.readSubFileAsText(a);case 10:return c=e.sent,ye.notify(r.a.createElement("p",null,c),"top_center","default",{autoClose:!1,className:"textReader"}),s=me.createVttSubBlobUrl(c),l(s,!0),e.next=16,me.createSubArray(s);case 16:u=e.sent,i(u,!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),ye.notify("<Header>".concat(e.t0.message),"top_center","warning");case 23:Ue.done();case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(n){return e.apply(this,arguments)}}(),t.handleVideoFile=function(e){Ue.start();var n=e.currentTarget.files[0],a=document.createElement("video");if("maybe"!==a.canPlayType(n.type)&&"video/x-flv"!==n.type)return Ue.done(),void ye.notify("\u65e0\u6cd5\u64ad\u653e\u8be5\u6587\u4ef6\uff0c\u64ad\u653e\u5668\u660e\u786e\u652f\u6301mp4\u3001flv\u683c\u5f0f\u7684\u89c6\u9891","top_center","warning");_.clog("\u521b\u5efa\u5143\u7d20\uff1a",a,a.canPlayType(n.type));var r=URL.createObjectURL(n);_.clog("\u89c6\u9891url",r),(0,t.props.onSwitch)(n.type,r),Ue.done()},t.handleSubFileDownload=function(){(0,t.props.onDownload)()},t.handleSubClean=function(){(0,t.props.onClean)()},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.duration,a=n.onDurationChange,o=this.state,i=o.currentLanguageKeyFrom,l=o.currentLanguageKeyTo;return r.a.createElement(hn,null,r.a.createElement("div",{className:"toolsContainerBox"},r.a.createElement("div",{className:"clearBox"},r.a.createElement("input",{type:"range",title:t,value:t,min:"10",max:"20",step:"1",onChange:function(e){a(Number(e.currentTarget.value))}})),r.a.createElement("div",{className:"toolsBox"},r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(dn,{disabled:!0,label:"\u5e38\u89c4",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement(dn,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-folder-open","aria-hidden":"true"}),element:r.a.createElement(bn,{type:"file",name:"file",onChange:this.handleSubFile,title:"\u6253\u5f00\u5b57\u5e55"}),color:"white",bgColor:"#529393"}),r.a.createElement(dn,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-play-circle","aria-hidden":"true"}),element:r.a.createElement(bn,{className:"uploadVideo",type:"file",name:"file",onChange:this.handleVideoFile,title:"\u6253\u5f00\u89c6\u9891"}),color:"white",bgColor:"#529393",title:"dd",onClick:function(){return console.log("click")}}),r.a.createElement(dn,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u4e0b\u8f7d\u5b57\u5e55",onClick:this.handleSubFileDownload}),r.a.createElement(dn,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}),color:"white",bgColor:"#ec6464",title:"\u6e05\u7a7a\u5b57\u5e55",onClick:this.handleSubClean}))),r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(dn,{disabled:!0,label:"\u7ffb\u8bd1",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyFrom",value:i,title:"\u5f53\u524d\u8bed\u8a00",onChange:function(n){return e.handleLanguageChange(n.currentTarget.name,n.currentTarget.value)}},this.languagesKeys.map((function(n){return r.a.createElement("option",{key:n,value:n},e.languages[n])}))),r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyTo",value:l,title:"\u7ffb\u8bd1\u81f3",onChange:function(n){return e.handleLanguageChange(n.currentTarget.name,n.currentTarget.value)}},this.languagesKeys.filter((function(e){return"auto"!==e})).map((function(n){return r.a.createElement("option",{key:n,value:n},e.languages[n])}))),r.a.createElement(dn,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-globe","aria-hidden":"true"}),color:"white",bgColor:"#66cccc",title:"\u70b9\u51fb\u7ffb\u8bd1 (\u8bf7\u7ed9\u5b83\u4e9b\u4f11\u606f\u65f6\u95f4)",onClick:this.handleTranslate}),r.a.createElement(dn,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-undo","aria-hidden":"true"}),color:"white",bgColor:"#00dfea",title:"\u56de\u9000\u81f3\u4e0a\u6b21\u7ffb\u8bd1\u524d\u7684\u7248\u672c",onClick:this.handleTranslateBackupReset}))))))}}]),n}(a.PureComponent),gn=t(141);function vn(){var e=Object(w.a)(["\n  //\u5e95\u90e8\u65f6\u95f4\u8f74 \u56fa\u5b9a150px\n  height: 150px;\n  position: relative;\n  display: flex;\n  width: 100%;\n  background-color: #c0d9d9;\n  // border-top: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.3);\n"]);return vn=function(){return e},e}var yn=E.b.div(vn()),xn=function(e){var n=e.currentTime,t=e.videoUrl,a=e.onWaveClick,o=e.onWaveContextmenu,i=e.subArray,l=e.onSubBlockMove,c=e.onSubBlockMoveError,s=e.onSubBlockResize,u=e.onSubBlockClick,d=e.duration;return r.a.createElement(yn,null,r.a.createElement(gn.ShWave,{duration:d,backgroundColor:"#529393",currentTime:n,throttleWait:1,url:t,waveColor:"#fbf8f86b",alterWaveColor:"#57e3e3",waveScale:.8,click:a,contextmenu:o,subArray:i,onSubMove:l,onSubMoveError:c,ErrorWait:1050,ErrorColor:"#f09b50d9",onSubResize:s,onSubClick:u}))};function wn(){var e=Object(w.a)(["\n  flex: 1;\n  margin-top: 5px;\n"]);return wn=function(){return e},e}function Sn(){var e=Object(w.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"]);return Sn=function(){return e},e}function kn(){var e=Object(w.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n"]);return kn=function(){return e},e}function En(){var e=Object(w.a)(["\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100%;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        // color: #ccc; \u767d\u5b57\n        background: #C0D9D9;\n        // background: #66CCCC;\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return En=function(){return e},e}var Tn=Object(E.a)(En()),Cn=E.b.div(kn()),Nn=E.b.div(Sn()),jn=E.b.div(wn()),On=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,An=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={videoUrl:"",subUrl:"",subArray:[],picUrl:be.getDefaultPicUrl(),container:{containerHeight:10,containerWidth:10},scrollIndex:-1,player:null,currentTime:0,duration:15},t.subUrlWorker=null,t.resizeContainer=function(){var e=document.body.clientHeight-200,n=document.body.clientWidth;_.clog("\u66f4\u65b0container\u7684\u5bbd\u9ad8",n,e),t.setState({container:{containerHeight:e,containerWidth:n}})},t.addResizeListener=function(){var e=function(e,n){var t;return function(){clearTimeout(t),t=setTimeout(e,n)}}(t.resizeContainer,300);window.addEventListener("resize",e),_.clog("\u6dfb\u52a0resize\u4e8b\u4ef6\u76d1\u542c")},t.updateOneState=function(e){t.setState(e),_.clog("\u66f4\u65b0state\uff1a",e)},t.updateSubArray=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.map((function(e){return me.mapSubToFullModel(e)}));var a=me.sortSubArray(e);t.setState({scrollIndex:-1}),t.setState({subArray:a},(function(){n&&(t.storageSubs(t.state.subArray),t.subUrlWorker.postMessage(t.state.subArray))}))},t.updateSubUrl=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];URL.revokeObjectURL(t.state.subUrl),t.setState({subUrl:e},(function(){n&&(_.clog("\u88c5\u8f7d\uff1a",t.state.subUrl),t.loadTrack(t.state.subUrl))}))},t.loadTrack=function(e){if(t.cleanSubP(),t.state.player&&t.state.player.video){var n=t.state.player.video.firstElementChild;n.default=!0,n.kind="subtitles",n.src=e}},t.cleanSubP=function(){var e=document.getElementsByClassName("dplayer-subtitle")[0],n=e.firstChild;n&&(e.removeChild(n),_.clog("\u6e05\u9664\u5b57\u5e55\u6b8b\u7559",n))},t.storageSubs=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];me.saveSubArray(e,n)},t.cleanStorageSubs=function(){me.cleanSubArray(),_.clog("\u6e05\u7a7a\u5b58\u50a8\u7684\u5b57\u5e55\uff0c\u4e0d\u542b\u5907\u4efd")},t.initSubTable=Object(x.a)(y.a.mark((function e(){var n,a,r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.getSubArray();case 3:if((n=e.sent)&&0!==n.length){e.next=12;break}return a=be.getDefaultSubUrl(),t.updateSubUrl(a,!0),e.next=9,me.createSubArray(a);case 9:return r=e.sent,t.updateSubArray(r),e.abrupt("return");case 12:t.updateSubArray(n),o=me.createSubArrayUrl(n),t.updateSubUrl(o,!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),ye.notify("\u8bfb\u53d6\u5b57\u5e55\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u6e05\u9664\u7f13\u5b58","top_center","info");case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),t.handleSubRemove=function(e){var n=Object(g.a)(t.state.subArray),a=n.indexOf(e);n.splice(a,1),t.updateSubArray(n,!0),_.clog("\u5220\u9664",e,a)},t.handleSubEdit=function(e){var n=Object(g.a)(t.state.subArray);n.map((function(e){return e.editing=!1}));var a=n.indexOf(e);n[a].editing=!0,t.updateSubArray(n),_.clog("handleEdit",e,a)},t.handleSubClick=function(e){if(e&&e.start){var n=e.start;t.playerSeekTo(n)}},t.handleSubCancel=function(e){var n=Object(g.a)(t.state.subArray),a=n.indexOf(e);n[a].editing=!1,t.updateSubArray(n)},t.handleSubCommit=function(e,n){var a=Object(g.a)(t.state.subArray),r=a.indexOf(e);a[r]=n,a[r].editing=!1,t.updateSubArray(a,!0),_.clog("\u63d0\u4ea4\uff1a",e,n,a)},t.handleSubInsert=function(e){var n=e?e.end+.001:0,a=Object(g.a)(t.state.subArray),r=a.indexOf(e),o=a[r+1],i=o?Math.abs(o.start-.001):n+5;if(Number((i-n).toFixed(3))<.001)ye.notify("\u7a7a\u95f4\u4e0d\u8db3\uff0c\u524d\u540e\u5b57\u5e55\u76f8\u9694\u81f3\u5c11\u9700\u89810.03\u79d2");else{var l=me.getDefaultSub(Number(n),Number(i));a.splice(r+1,0,l),t.updateSubArray(a);var c=r+1;t.setState({scrollIndex:c}),_.clog("\u63d2\u5165\uff1a",l)}},t.handleSubDownload=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.downloadSubFile();case 3:n=e.sent,_.clog(n),n||ye.notify("\u65e0\u5b57\u5e55\u6587\u4ef6\uff0c\u8bf7\u5148\u5236\u4f5c\u60a8\u7684\u5b57\u5e55\u3002"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ye.notify("\u4e0b\u8f7d\u51fa\u9519","top_center","warning");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.handleSubClean=function(){if(window.confirm("\u662f\u5426\u8981\u5220\u9664\u6240\u6709\u5b57\u5e55\uff1f")){t.cleanStorageSubs(),t.updateSubUrl("",!0);t.updateSubArray([])}},t.handlePlayerInit=function(e){_.clog("\u521d\u59cb\u5316\u64ad\u653e\u5668"),t.setState({player:e});On((function n(){var a=e.video;t.handleCurrentTime(a.currentTime),On(n)}))},t.playerSeekTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pause",a=t.state.player;if(a&&a.video){var r=a.video.duration;a[n]();var o=e>r?r:e;console.log(e,r,o),a.seek(o)}},t.handleVideoSwitch=function(e,n){var a=be.createVideoType(e);URL.revokeObjectURL(t.state.videoUrl),t.setState({videoUrl:n}),t.state.player.switchVideo({url:n,type:a})},t.handleVideoCanPlay=function(){if(_.clog("\u89c6\u9891\u5df2\u7ecf\u5c31\u7eea"),navigator.userAgent.toLowerCase().indexOf("chrome")>0){var e=document.getElementsByClassName("dplayer-subtitle")[0];e&&(e.style.opacity=0)}},t.handleScrollIndexFrame=function(e){t.state.scrollIndex!==e&&t.setState({scrollIndex:e})},t.handleCurrentTime=function(e){t.state.currentTime!==e&&t.setState({currentTime:e},(function(){var n=t.state.subArray.findIndex((function(n){return n.start<=e&&n.end>e}));-1!==n&&t.handleScrollIndexFrame(n)}))},t.handleVideoPlaying=function(){},t.handleWaveClick=function(e,n){t.playerSeekTo(e)},t.handleWaveContextmenu=function(e,n){t.playerSeekTo(e,"play")},t.handleSubBlockMove=function(e,n){var a=Object(g.a)(t.state.subArray),r=a.indexOf(e),o=a[r],i=Number(Number(o.start+n).toFixed(3)),l=Number(Number(o.end+n).toFixed(3));if(!(i<0||l<=0)){var c=Object(f.a)({},o);c.startTime=me.toTime(i),c.endTime=me.toTime(l),a[r]=me.mapSubToFullModel(c),t.updateSubArray(a,!0)}},t.toastId_subBlockMoveError=null,t.handleSubBlockMoveError=function(){ye.isActive(t.toastId_subBlockMoveError)||(t.toastId_subBlockMoveError=ye.notify(r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",null,"\u65e0\u6548\u7684\u4f4d\u7f6e\uff0c\u677e\u5f00\u9f20\u6807\u4ee5\u4fee\u590d")),"bottom_left","warning",{hideProgressBar:!0,autoClose:1e3,canClose:!0},"flip"))},t.handleSubBlockResize=function(e,n,a){var r=Object(g.a)(t.state.subArray),o=r.indexOf(e),i=r[o],l=Object(f.a)({},i),c=null,s=0;if("start"===a){if(null===(c=Number(Number(i.start+n).toFixed(3)))||c<0)return;l.startTime=me.toTime(c)}else{if((s=Number(Number(i.end+n).toFixed(3)))<=0||s<=i.start)return;l.endTime=me.toTime(s)}r[o]=me.mapSubToFullModel(l),t.updateSubArray(r,!0)},t.handleSubBlockClick=function(e){var n=Object(g.a)(t.state.subArray).indexOf(e);t.setState({scrollIndex:n})},t.handleDurationChange=function(e){t.setState({duration:e})},t.handleAllSubTranslate=function(){var e=Object(x.a)(y.a.mark((function e(n,a){var r,o,i,l,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.start(),e.next=3,me.getSubArray();case 3:return r=e.sent,o=me.createSubTextArr(r),i=Be.createTranslateTextFromStringArr(o),Ue.set(10),Ue.inc(50),ye.notify("\u7ffb\u8bd1\u8bf7\u6c42\u6b63\u51c6\u5907\u53d1\u9001\uff0c\u7531\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u4f4d\u4e8e\u7f8e\u56fd\uff0c\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...(\u7ffb\u8bd1\u529f\u80fd\u5185\u7f6e\u95f4\u9694\u4e3a 2\u79d2","top_center"),l=[],e.prev=10,e.next=13,Be.translateByLangKey(n,a,i);case 13:l=e.sent,e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(10),console.log(e.t0),Ue.done(),ye.notify("\u7ffb\u8bd1\u5931\u8d25","top_center","warning"),e.abrupt("return");case 22:if(console.log("\u5f97\u5230\u7684\u7ffb\u8bd1\u6587\u672c\u6570\u7ec4\uff1a",l),l&&l!==[]){e.next=26;break}return Ue.done(),e.abrupt("return",ye.notify("\u7ffb\u8bd1\u7ed3\u679c\u4e3a\u7a7a","top_center","warning"));case 26:if(l===[]||l.length===r.length){e.next=29;break}return Ue.done(),e.abrupt("return",ye.notify("\u672a\u5e94\u7528\u7ffb\u8bd1\u7ed3\u679c\uff0c\u7ffb\u8bd1\u524d\u8bf7\u4e0d\u8981\u5728\u5b57\u5e55\u91cc\u51fa\u73b0\u6362\u884c\uff0c\u4e5f\u53ef\u80fd\u662f\u539f\u6587\u672c\u65e0\u9700\u7ffb\u8bd1","top_center","warning"));case 29:c=r.map((function(e,n){return Object(f.a)({},e,{content:l[n]})})),Ue.inc(20),t.storageSubs(r,!0),t.updateSubArray(c,!0),Ue.done(),ye.notify("\u7ffb\u8bd1\u5b8c\u6210","top_center");case 35:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(n,t){return e.apply(this,arguments)}}(),t.handleAllSubTranslateDebounce=k.a.debounce(t.handleAllSubTranslate,2e3,{leading:!0,trailing:!1}),t.handleSubArrayBackupReset=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.getSubArray(!0);case 2:n=e.sent,t.updateSubArray(n,!1),ye.notify("\u5df2\u56de\u9000\u5230\u5907\u4efd\u7684\u7248\u672c\uff0c\u5982\u679c\u60f3\u5c06\u5b83\u4fdd\u5b58\u4e3a\u6b63\u5f0f\u7248\u672c\uff0c\u8bf7\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\u6216\u5220\u9664\u3002\u5982\u679c\u4e0d\u60f3\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u3002","top_center");case 5:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.resizeContainer(),this.addResizeListener(),this.initSubTable(),this.subUrlWorker=me.createSubUrlWorker((function(n){e.updateSubUrl(n,!0)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,n=e.videoUrl,t=e.subUrl,a=e.subArray,o=e.picUrl,i=e.container,l=e.scrollIndex,c=e.player,s=e.currentTime,u=e.duration,d={updateOneState:this.updateOneState,updateSubArray:this.updateSubArray,updateSubUrl:this.updateSubUrl,storageSubs:this.storageSubs,cleanStorageSubs:this.cleanStorageSubs,onDownload:this.handleSubDownload,onClean:this.handleSubClean,onRemove:this.handleSubRemove,onEdit:this.handleSubEdit,onClick:this.handleSubClick,onCommit:this.handleSubCommit,onCancel:this.handleSubCancel,onInsert:this.handleSubInsert,onSwitch:this.handleVideoSwitch,initPlayer:this.handlePlayerInit,onVideoCanPlay:this.handleVideoCanPlay,updateCurrentTime:this.handleCurrentTime,onVideoPlaying:this.handleVideoPlaying,onWaveClick:this.handleWaveClick,onWaveContextmenu:this.handleWaveContextmenu,onSubBlockMove:this.handleSubBlockMove,onSubBlockMoveError:this.handleSubBlockMoveError,onSubBlockResize:this.handleSubBlockResize,onSubBlockClick:this.handleSubBlockClick,onDurationChange:this.handleDurationChange,onAllSubTranslate:this.handleAllSubTranslateDebounce,onSubArrayBackupReset:this.handleSubArrayBackupReset};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("title",null,O.subeditor_title)),r.a.createElement(Tn,null),r.a.createElement(We,d),r.a.createElement(Cn,null,r.a.createElement(Nn,null,r.a.createElement($e,Object.assign({},d,{picUrl:o,videoUrl:n,subUrl:t,player:c})),r.a.createElement(fn,Object.assign({duration:u},d))),r.a.createElement(jn,null,r.a.createElement(cn,Object.assign({},d,{container:i,subArray:a,scrollIndex:l})))),r.a.createElement(xn,Object.assign({},d,{currentTime:s,videoUrl:n,subArray:a,duration:u})))}}]),n}(a.Component),_n=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(m.a,null,r.a.createElement("title",null,O.test_title)),r.a.createElement("video",{id:"video",controls:!0,width:"900px",src:"".concat(he.home,"friday.mp4")},r.a.createElement("track",{default:!0,kind:"subtitles",srcLang:"en",src:"".concat(he.home,"friday.vtt")})))},Bn=(t(254),function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return ye.notify("hello","top_left"),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"SH - SubEditor App"),r.a.createElement("link",{rel:"icon",href:"".concat(he.home,"subeditor.ico")})),r.a.createElement(h.d,{autoClose:3e3,closeOnClick:!1,draggable:!1,position:h.f.POSITION.TOP_LEFT,className:"toastContainerClass"}),r.a.createElement(b.c,null,r.a.createElement(b.a,{path:he.trackTest,component:_n}),r.a.createElement(b.a,{path:he.subEditorPath,component:An})))}}]),n}(a.Component));t(256),t(257),t(128),t(258),t(259),t(260);i.a.render(r.a.createElement(l.a,null,r.a.createElement(Bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e){e.exports=JSON.parse('{"mode":"dev","log":"on","sub_storage_key":"Subs","sub_storage_backup_key":"SubsBackup","subeditor_title":"SubEditor - \u5728\u7ebf\u5b57\u5e55\u7f16\u8f91","test_title":"SH - SubEditor Test","translate_arr_separator":"\\n"}')}},[[144,1,2]]]);
//# sourceMappingURL=main.3b977d35.chunk.js.map
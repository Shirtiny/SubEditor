(this.webpackJsonpsubeditor=this.webpackJsonpsubeditor||[]).push([[0],{137:function(e,t,n){e.exports=n.p+"static/media/subeditor.928099fc.ico"},138:function(e,t,n){e.exports=n.p+"static/media/welcom.b8b80cac.vtt"},141:function(e){e.exports=JSON.parse('{"name":"subeditor","version":"1.0.8","private":false,"author":{"name":"Shirtiny","email":"shirtiny@gmail.com"},"homepage":"./","description":"\u4e00\u6b3e\u514d\u8d39\u5f00\u6e90\u7684\u5728\u7ebf\u5b57\u5e55\u7f16\u8f91\u5668\uff0c\u5feb\u901f\u5f00\u59cb\u7b80\u5355\u7684\u5b57\u5e55\u5236\u4f5c\u3002","repository":{"type":"git","url":"https://github.com/Shirtiny/SubEditor"},"keywords":["\u5b57\u5e55","react","\u7f16\u8f91\u5668","subtitles","\u5728\u7ebf\u7f16\u8f91","editor","javaScript","\u5728\u7ebf\u5b57\u5e55\u7f16\u8f91\u5668","\u5728\u7ebf","shirtiny","online Subtitle","online subtitle Editor"],"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","axios":"^0.19.2","bootstrap":"^4.4.1","duration-time-conversion":"^1.0.1","flv.js":"^1.5.0","font-awesome":"^4.7.0","immer":"^7.0.1","joi-browser":"^13.4.0","js-base64":"^2.5.2","js-md5":"^0.7.3","lodash":"^4.17.15","normalize.css":"^8.0.1","nprogress":"^0.2.0","react":"^16.13.0","react-dom":"^16.13.0","react-dplayer":"^0.3.3","react-helmet":"^6.0.0","react-i18nify":"^3.1.5","react-modal":"^3.11.2","react-router-dom":"^5.1.2","react-scripts":"3.4.0","react-toastify":"^5.5.0","react-virtualized":"^9.21.2","shwave":"^1.9.2","styled-components":"^5.0.1"},"scripts":{"start":"cross-env PORT=2020 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"cross-env":"^7.0.2","gh-pages":"^2.2.0"}}')},149:function(e,t){e.exports="data:image/png;base64,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"},154:function(e,t,n){e.exports=n(280)},252:function(e,t,n){e.exports=n.p+"static/media/blackboard.233681a4.png"},275:function(e,t,n){},28:function(e){e.exports=JSON.parse('{"mode":"dev","log":"on","sub_storage_key":"Subs","sub_storage_backup_key":"SubsBackup","subeditor_title":"SubEditor - \u5728\u7ebf\u5b57\u5e55\u7f16\u8f91 An online Editor for subtitles","test_title":"SH - SubEditor Test","translate_arr_separator":"\\n"}')},280:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),i=n.n(o),l=n(98),c=n(3),s=n(2),u=n(15),d=n(10),p=n(16),f=n(25),m=n(43),h=n(19),b=n(30),g=n(7),v=n.n(g),y=n(17),x=n(13),w=n(53),k=n(47),S=n.n(k),E=n(14),T=n(137),C=n.n(T),A=function(){function e(t,n,a){Object(c.a)(this,e),this.start=Number(t.toFixed(3)),this.end=Number(n.toFixed(3)),this.content=a,this.editing=!1}return Object(s.a)(e,[{key:"startTime",get:function(){return he.toTime(this.start)}},{key:"endTime",get:function(){return he.toTime(this.end)}},{key:"length",get:function(){return Number((this.end-this.start).toFixed(3))}}]),e}(),N=n(54),j=n.n(N);var O={number2Time:function(e){var t=e.toFixed(3);return j.a.d2t(t)},time2Number:function(e){return j.a.t2d(e).toFixed(3)},getTimeLength:function(e,t){return(j.a.t2d(t)-j.a.t2d(e)).toFixed(3)}},B=n(28),I="off"===B.log;var R={clog:function(){var e;I||(e=console).log.apply(e,arguments)}},U=n(38),P=n(41),F=n.n(P),L=/^\d+:[0-5][0-9]:[0-5][0-9](\.[0-9]{1,3})?$/,z={startTime:F.a.string().regex(L).required().min(8).label("\u5f00\u59cb\u65f6\u95f4"),endTime:F.a.string().regex(L).required().min(8).label("\u7ed3\u675f\u65f6\u95f4"),content:F.a.string().required().max(100).min(1).label("\u6587\u672c\u5185\u5bb9"),start:F.a.number(),end:F.a.number(),length:F.a.number().greater(0)},M="\u683c\u5f0f\u5982 00:00:29.320\u683c\u5f0f\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",D="\u683c\u5f0f\u5982 00:00:29.320\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",W="\u9700\u8981\u57281-100\u4e2a\u5b57\u7b26\u4e4b\u95f4\uff0c\u4e0d\u80fd\u4e3a\u7a7a",V="\u5fc5\u987b\u4e3a\u6570\u5b57",G="\u5fc5\u987b\u4e3a\u6570\u5b57",K="\u4e0d\u80fd\u4e3a\u8d1f\u503c\u62160\uff0c\u5f00\u59cb\u65f6\u95f4\u8981\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4",H={startTime:"\u5f00\u59cb\u65f6\u95f4",endTime:"\u7ed3\u675f\u65f6\u95f4",content:"\u5b57\u5e55\u6587\u672c\u5185\u5bb9",start:"\u8d77\u59cb\u79d2\u6570",end:"\u7ed3\u675f\u79d2\u6570",length:"\u65f6\u957f"};var Y={abortEarly:!1,allowUnknown:!0,skipFunctions:!0};function q(e,t,n,a){var r=Object(U.a)({},e,t),o=Object(h.a)({},Y,{abortEarly:!0},a);return!!F.a.validate(r,n,o).error}var Q={schema:z,getEditingSubSchema:function(){return{startTime:z.startTime,endTime:z.endTime,content:z.content,start:z.start,end:z.end,length:z.length}},getEditingErrorSchema:function(){return{startTime:M,endTime:D,content:W,start:V,end:G,length:K}},validate:function(e,t,n){var a=Object(h.a)({},Y,{},n),r=F.a.validate(e,t,a).error;if(!r)return!1;R.clog("editingSub\u6821\u9a8c\u7ed3\u679c\uff0c\u51fa\u73b0\u7684\u9519\u8bef\uff1a",r);var o=[];return r.details.map((function(e){return o.push(e.path[0])})),S.a.uniq(o)},validateProperty:q,errors2messages:function(e){if(!e)return[];var t=Object.keys(e).map((function(t){return H[t]+": "+e[t]}));return 0===t.length&&t.push(" "),t},validateTime:function(e){return q("startTime",e,{startTime:z.startTime})}},J=B.sub_storage_key||"DefaultSubs",X=B.sub_storage_backup_key||"DefaultSubsBackup";function Z(e){return Number(O.time2Number(e))}function _(e,t){return Number(O.getTimeLength(e,t))}function $(e,t,n){var a=new FileReader;a.readAsText(n),a.onerror=function(e){t(e)},a.onload=function(){e(a.result)}}function ee(){return(ee=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,new Promise((function(e,n){return $(e,n,t)}));case 4:n=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),R.clog("\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0),e.t0.message="\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function te(e,t,n){var a=document.createElement("video"),r=document.createElement("track");a.appendChild(r),r.default=!0,r.kind="metadata",r.src=n,r.onerror=function(e){t(e)},r.onload=function(){e(r.track.cues)}}function ne(){return(ne=Object(y.a)(v.a.mark((function e(t){var n,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,new Promise((function(e,n){return te(e,n,t)}));case 4:n=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),R.clog("\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25\uff1a",e.t0),e.t0.message="\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25",e.t0;case 12:return a=Array.from(n||{}),R.clog("\u5f97\u5230VTTCues\u6570\u7ec4\uff1a",a),r=a.map((function(e){return new A(e.startTime,e.endTime,e.text)})),o=r.map((function(e){return re(e)})),R.clog("\u5f97\u5230\u5b57\u5e55\u6570\u7ec4\uff1a",o),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ae(e){var t=new Blob([e],{type:"text/vtt"});return R.clog("vtt\u5b57\u5e55Blob\u5bf9\u8c61",t),URL.createObjectURL(t)}function re(e){var t=ce(e.startTime),n=ce(e.endTime);return{start:Z(t),startTime:t,end:Z(n),endTime:n,length:_(t,n),content:e.content}}function oe(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var r=n.map((function(e){return re(e)})),o=JSON.stringify(r);a?localStorage.setItem(X,o):localStorage.setItem(J,o),e(o)}catch(i){R.clog("subs\u5b58\u5165local\u65f6\u51fa\u9519",i),t(i)}}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?X:J,r=localStorage.getItem(a);try{var o=JSON.parse(r);e(o||[])}catch(i){R.clog("\u8bfb\u53d6local\u540e\uff0cJson\u89e3\u6790\u51fa\u9519",i),t(i)}}function le(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,n){return ie(t,n,e)}))}function ce(e){var t=e.match(/^(\d+:[0-5][0-9]:[0-5][0-9])(\.[0-9]{1,3})?$/);if(t&&t[2]){for(var n=t[2];n.length<4;)n+="0";return t[1]+n}return t&&t[1]?t[1]:"00:00:00"}function se(e){var t="WEBVTT\n\n"+e.map((function(e,t){return"".concat(t+1,"\n").concat(e.startTime," --\x3e ").concat(e.endTime,"\n").concat(e.content,"\n")})).join("\n");return R.clog(t),t}function ue(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function de(e){return e&&0!==e.length?ae(se(e)):""}function pe(){return(pe=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le();case 3:if((t=e.sent)&&0!==t.length){e.next=6;break}return e.abrupt("return",!1);case 6:return ue(de(t),"\u5b57\u5e55.vtt"),e.abrupt("return",!0);case 11:throw e.prev=11,e.t0=e.catch(0),R.clog("\u4e0b\u8f7d\u5b57\u5e55\u51fa\u9519\uff1a",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function fe(e){return e&&0!==e.length?e.map((function(e){return e.content})):[]}function me(){return(me=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,e.abrupt("return",fe(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he={readSubFileAsText:function(e){return ee.apply(this,arguments)},createSubArray:function(e){return ne.apply(this,arguments)},createVttSubBlobUrl:ae,mapSubToFullModel:re,saveSubArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,a){return oe(n,a,e,t)}))},cleanSubArray:function(){localStorage.removeItem(J)},getSubArray:le,getSubLength:function(e){var t={startTime:Q.schema.startTime,endTime:Q.schema.endTime};return Q.validate(e,t,{abortEarly:!0})?e.length:_(ce(e.startTime),ce(e.endTime))},mapSubArray2Text:se,createSubArrayUrl:de,downloadFromUrl:ue,downloadSubFile:function(){return pe.apply(this,arguments)},getDefaultSub:function(e,t){R.clog("\u63d2\u5165\u53c2\u6570\uff1a",e,t,typeof(e+t));var n=0,a=.001;if("number"===typeof(e+t))return n=Number(e.toFixed(3)),a=Number(t.toFixed(3)),new A(n,a,"\u9ed8\u8ba4\u6587\u672c");var r=Q.validateTime(e),o=Q.validateTime(t);return r||o||(n=Z(ce(e)),a=Z(ce(t))),new A(n,a,"\u9ed8\u8ba4\u6587\u672c")},toTime:function(e){return O.number2Time(e)},toNumber:Z,getTimeLength:_,createSubUrlWorker:function(e){var t=new Blob(['this.addEventListener(\'message\', function (e) {\n    //\u8f6c\u4e3a\u6587\u672c\n    // subArray\u7684\u683c\u5f0f\u5fc5\u987b\u7b26\u5408\u5b58\u50a8\u89c4\u8303\n    const subArray = e.data;\n    const vttCueStrArray = subArray.map(\n    (sub, index) =>\n      `${index + 1}\n${sub.startTime} --\x3e ${sub.endTime}\n${sub.content}\n`\n  );\n    const vttText = "WEBVTT\\n\\n" + vttCueStrArray.join("\\n");\n    const vttBlob = new Blob([vttText], {\n      type: "text/vtt"\n    });\n    const subUrl = URL.createObjectURL(vttBlob);\n    this.postMessage(subUrl);\n  }, false);']),n=new Worker(URL.createObjectURL(t));return n.onmessage=function(t){var n=t.data;e(n)},n},sortSubArray:function(e){var t=Object(b.a)(e);return t.sort((function(e,t){return e.start-t.start})),t},createSubTextArr:fe,createSubTextArrFromStorage:function(){return me.apply(this,arguments)}};function be(e,t,n,a){var r=new FileReader;r[a](n),r.onerror=function(e){t(e)},r.onload=function(){e(r.result)}}function ge(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.prev=1,e.next=4,new Promise((function(e,n){return be(e,n,t,"readAsArrayBuffer")}));case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 10:return e.abrupt("return",new Uint8Array(n));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ye(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,console.log("fetched blob:",n),e.next=6,ge(n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,n){var a=new AbortController,r=null;fetch(n,{signal:a.signal}).then((function(n){if(n.body&&"function"===typeof n.body.getReader){r=n.body.getReader();var o=new Uint8Array;r.read().then((function t(n){var i=n.done,l=n.value;return i?(a.abort(),r.cancel(),a=null,r=null,void e(o)):(o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0].constructor;return t.reduce((function(e,t){var n=new a((0|e.byteLength)+(0|t.byteLength));return n.set(e,0),n.set(t,0|e.byteLength),n}),new a)}(o,l),r.read().then(t))}))}else t("res.body\u4e0d\u662f\u6d41")}))}function Se(){return(Se=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Uint8Array,e.prev=1,e.next=4,new Promise((function(e,n){return ke(e,n,t)}));case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Ee(){return(Ee=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,console.log("fetched blob:",n),a="",e.prev=5,e.next=8,new Promise((function(e,t){return be(e,t,n,"readAsText")}));case 8:a=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}var Te={readFileData:ge,fetchFileData:function(e){return we.apply(this,arguments)},fetchFileAsText:function(e){return Ee.apply(this,arguments)},fetchFileU8Data:function(e){return Se.apply(this,arguments)},downloadFromUrl:function(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},Ce=new Worker("/ffmpeg-worker-mp4.js"),Ae="";function Ne(e){e.onmessage=function(e){var t=e.data;switch(t.type){case"ready":console.log("shFFmpegWorker ready");break;case"stdout":case"stderr":console.log(t.data);break;case"done":console.log("shFFmpegWorker works done",t.data);var n=t.data.MEMFS[0],a=n.name,r=n.data;URL.revokeObjectURL(Ae),Ae=URL.createObjectURL(new File([r.buffer],a)),Te.downloadFromUrl(Ae,a);break;default:return}}}Ne(Ce);var je={postMessage:function(e){Ce&&Ce.postMessage(e)},terminateWork:function(){Ce.terminate(),Ne(Ce=new Worker("/ffmpeg-worker-mp4.js"))}},Oe=n(97),Be=n.n(Oe),Ie=n(138),Re=n.n(Ie);function Ue(){return(Ue=Object(y.a)(v.a.mark((function e(t,n,a,r){var o,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}throw new Error("\u89c6\u9891\u6216\u5b57\u5e55\u5730\u5740\u4e3a\u7a7a");case 2:if(!/\.flv$/.test(n)){e.next=4;break}throw new Error("\u6682\u4e0d\u652f\u6301flv\u683c\u5f0f\u7684\u7f16\u7801");case 4:return e.next=6,Te.fetchFileData(t);case 6:return o=e.sent,e.next=9,Te.fetchFileData(a);case 9:return i=e.sent,e.next=12,Te.fetchFileData("/default.ttf");case 12:l=e.sent,je.postMessage({type:"run",TOTAL_MEMORY:1073741824,arguments:["-hide_banner","-y","-i",n,"-vf","subtitles=".concat(r),"output-".concat(n)],MEMFS:[{name:n,data:o},{name:r,data:i},{name:"default.ttf",data:l}]});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe={createVideoType:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!==typeof e)return"";if(t){var n=e,a=n.lastIndexOf("."),r=n.substring(a+1);return"flv"===r?"flvCustom":r}var o=/^video\/(mp4|x-(flv))+$/,i=e.match(o);R.clog("\u5339\u914d\u89c6\u9891\u7c7b\u578b",i);var l=i&&i[2]?i[2]+"Custom":i?i[1]:"";return R.clog("\u5339\u914d\u548c\u62fc\u63a5\u7684\u7ed3\u679c",l),l},getDefaultPicUrl:function(){return Be.a},getDefaultSubUrl:function(){return Re.a},encodeVideoWithSub:function(e,t,n,a){return Ue.apply(this,arguments)}},Fe=[],Le=-1;var ze={push:function(e){return++Le<Fe.length?(Fe[Le]=e,Fe.length=Le+1,Fe.length):Fe.push(e)},pop:function(){if(Le>=1)return Fe[--Le];throw new Error("\u5df2\u5230\u6808\u5e95")},unPop:function(){if(Le+1<Fe.length)return Le++,Fe[Le];throw new Error("\u5df2\u5230\u6808\u9876")},getTop:function(){return Le},getHistory:function(){return Fe}},Me=new WeakMap,De=new WeakMap,We=function(){function e(t,n){Object(c.a)(this,e),Me.set(this,t),De.set(this,n)}return Object(s.a)(e,[{key:"subArray",get:function(){return Me.get(this)}},{key:"currentTime",get:function(){return De.get(this)}}]),e}(),Ve=function(e){var t=e.head,n=e.small,a=e.dataArray,o=e.type;return r.a.createElement("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{border:"none",boxShadow:"none"}},r.a.createElement("div",{className:"toast-header"},r.a.createElement("svg",{className:"rounded mr-2",width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img"},r.a.createElement("rect",{width:"100%",height:"100%",fill:{primary:"#007aff",warning:"#ff8300"}[o]})),r.a.createElement("strong",{className:"mr-auto"},t),r.a.createElement("small",null,n||"\u63d0\u793a")),r.a.createElement("div",{className:"toast-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e},e)})))))},Ge={slide:f.c,zoom:f.e,flip:f.b,bounce:f.a};function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top_left",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bounce",o=(t+"").toUpperCase(),i=(n+"").toUpperCase(),l=Object(h.a)({position:f.f.POSITION[o],type:f.f.TYPE[i],transition:Ge[r]},a);return Object(f.f)(e,l)}var He={notify:Ke,bootstrapToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top_left",a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zoom";return Ke(r.a.createElement(Ve,{head:"\u8bf7\u68c0\u67e5\u8f93\u5165\u683c\u5f0f",dataArray:e,type:t}),n,"default",a,o)},isActive:function(e){return f.f.isActive(e)},done:function(e){return f.f.done(e)}},Ye=n(64),qe=n.n(Ye),Qe=n(48),Je=n.n(Qe);Je.a.configure({minimum:.1});var Xe={start:function(e){return e?Je.a.start().set(e):Je.a.start()},set:function(e){return e&&Je.a.set(e)},inc:function(e){return e&&Je.a.inc(e)},done:function(){Je.a.done()}};qe.a.interceptors.request.use((function(e){return Xe.start(),e}),(function(e){return Xe.done(),Promise.reject(e)})),qe.a.interceptors.response.use((function(e){return Xe.done(),e}),(function(e){return Xe.done(),console.log("\u8bf7\u6c42\u51fa\u9519",e,e.response.status),Promise.reject(e)}));var Ze={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(h.a)({params:t},n);return qe.a.get(e,a)},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return qe.a.post(e,t,n)}},_e=n(139),$e=n.n(_e),et=n(140);var tt=new URL("https://fanyi-api.baidu.com/api/trans/vip/translate"),nt=tt.searchParams;function at(e,t,n){console.log("\u767e\u5ea6\u7ffb\u8bd1");var a=(new Date).getTime(),r=$e()("".concat("20180619000178085").concat(n).concat(a).concat("ZEg5rb06NeW4wNjslD6F"));nt.set("salt",a),nt.set("sign",r),nt.set("from",e),nt.set("to",t),nt.set("q",n);var o=et.Base64.btoa(tt.href);return Ze.get("https://shproxy.herokuapp.com/shProxyApi/v1/get?url=".concat(o),{},{timeout:6e4}).then((function(e){if(console.log("\u767e\u5ea6\u7ffb\u8bd1\u8bf7\u6c42\u7ed3\u679c\uff1a",e),!e.data||!e.data.trans_result)throw new Error("\u7ffb\u8bd1\u51fa\u9519");return e.data.trans_result&&e.data.trans_result.map((function(e){return e.dst}))||[]})).catch((function(e){throw new Error(e)}))}nt.append("appid","20180619000178085");var rt=S.a.debounce((function(e,t,n){return at(e,t,n)}),2e3,{leading:!0,trailing:!1}),ot={auto:"\u81ea\u52a8\u68c0\u6d4b",zh:"\u4e2d\u6587",en:"\u82f1\u8bed",cht:"\u7e41\u4f53\u4e2d\u6587",yue:"\u7ca4\u8bed",wyw:"\u6587\u8a00\u6587",jp:"\u65e5\u8bed",kor:"\u97e9\u8bed",fra:"\u6cd5\u8bed",spa:"\u897f\u73ed\u7259\u8bed",th:"\u6cf0\u8bed",ara:"\u963f\u62c9\u4f2f\u8bed",ru:"\u4fc4\u8bed",pt:"\u8461\u8404\u7259\u8bed",de:"\u5fb7\u8bed",it:"\u610f\u5927\u5229\u8bed",el:"\u5e0c\u814a\u8bed",nl:"\u8377\u5170\u8bed",pl:"\u6ce2\u5170\u8bed",bul:"\u4fdd\u52a0\u5229\u4e9a\u8bed",est:"\u7231\u6c99\u5c3c\u4e9a\u8bed",dan:"\u4e39\u9ea6\u8bed",fin:"\u82ac\u5170\u8bed",cs:"\u6377\u514b\u8bed",rom:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",slo:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",swe:"\u745e\u5178\u8bed",hu:"\u5308\u7259\u5229\u8bed",vie:"\u8d8a\u5357\u8bed"};var it=B.translate_arr_separator;var lt={googleTranslate:function(e,t){var n=new URL("https://translate.googleapis.com/translate_a/single");n.searchParams.append("client","gtx"),n.searchParams.append("sl","auto"),n.searchParams.append("dt","t"),n.searchParams.append("tl",e),n.searchParams.append("q",t),Ze.get("https://translate.googleapis.com/translate_a/single",n.searchParams).then((function(e){console.log("\u8c37\u6b4c\u7ffb\u8bd1",e)}))},baiduTranslate:at,getBaiduTranslateLangKey:function(e){var t=S.a.findKey(ot,(function(t){return t===e}));console.log(t)},getBaiduTranslateLanguages:function(){return ot},translateByLangKey:function(e,t,n){return ot[e]&&ot[t]?rt(e,t,n):""},translateDebounce:rt,createTranslateTextFromStringArr:function(e){return e&&0!==e.length?e.join(it):""}};var ct={home:"".concat(window.location.protocol,"//").concat(window.location.host,"/"),subEditorPath:"/",trackTest:"/test",isMobile:function(){return console.log("\u7528\u6237agent\uff1a",window.navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)&&!/Googlebot/i.test(window.navigator.userAgent)}},st=n(141);function ut(){var e=Object(x.a)(["\n  text-decoration: none;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 400;\n  color: #66cccc;\n\n  :hover {\n    text-decoration: none;\n    color: #66cccc;\n  }\n\n  .version {\n    font-size: 12px;\n    font-weight: 600;\n    margin-left: 20px;\n    opacity: 0.4;\n    font-style: italic;\n    color: #262a3e;\n  }\n"]);return ut=function(){return e},e}function dt(){var e=Object(x.a)(["\n  //\u5bfc\u822a\u680f\u56fa\u5b9a50px\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: hsla(0, 0%, 100%, 0.8);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n  .band {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    padding-left: 30px;\n    flex-grow: 6;\n  }\n\n  .body {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-grow: 1;\n\n    .buttons {\n      height: 100%;\n      display: flex;\n      align-items: center;\n    }\n\n    .links {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 40px;\n      i {\n        margin-right: 5px;\n      }\n      a {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 18px;\n        font-weight: 600;\n        padding: 0 10px 0 10px;\n\n        &:hover {\n          color: #66cccc;\n          //   text-decoration: underline;\n        }\n      }\n    }\n\n    .users {\n      height: 100%;\n      padding-right: 20px;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 20px;\n      .avatar {\n        border-radius: 50%;\n        height: 40px;\n        border: 1px solid #ddd;\n        padding: 4px;\n        display: block;\n      }\n      span {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n      }\n      span:hover {\n        color: #66cccc;\n      }\n    }\n  }\n"]);return dt=function(){return e},e}var pt=E.b.header(dt()),ft=E.b.a(ut()),mt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},n.handleLogout=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.location.reload();case 1:case"end":return e.stop()}}),e)}))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(pt,null,r.a.createElement("div",{className:"band"},r.a.createElement(ft,{href:ct.subEditorPath,title:"Copyright \xa9 2020 SH"},"SubEditor",r.a.createElement("span",{className:"version"},"version ",st.version))),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"https://github.com/Shirtiny/SubEditor",title:"\u524d\u5f80Github"},r.a.createElement("i",{className:"fa fa-github","aria-hidden":"true"}),"Github")),r.a.createElement("div",{className:"users"},r.a.createElement("a",{href:"/",title:this.state.user.userName||"\u672a\u767b\u5f55",style:{marginRight:"10px"}},r.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.user.avatarImage||"".concat(ct.home,"subEditorLogo.png")})),this.state.user.userName&&r.a.createElement("span",{onClick:this.handleLogout,title:"\u9000\u51fa\u767b\u5f55"},"\u6ce8\u9500"))))}}]),t}(a.PureComponent),ht=n(144),bt=n.n(ht),gt=n(100);function vt(){var e=Object(x.a)(["\n  flex: 1;\n  display: flex;\n  max-height: 55vh;\n  justify-content: center;\n  align-items: center;\n  padding: 15px;\n  // border-bottom: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n\n  .dplayer {\n    // max-width: 50vw;\n    // max-height: 50vh;\n  }\n\n  .defaultSize {\n    max-width: 50vw;\n    max-height: 50vh;\n  }\n\n  .dplayer_disable {\n    pointer-events: none;\n  }\n\n  .playerBorder {\n    border: 4px solid #529393;\n    border-radius: 0.5em;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n  }\n\n  .hiddenSubs {\n    ::cue {\n      opacity: 0;\n    }\n  }\n"]);return vt=function(){return e},e}var yt=E.b.div(vt()),xt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).load=function(e){(0,n.props.initPlayer)(e)},n.error=function(){document.getElementById("player").classList.add("dplayer_DefaultSize","dplayer_disable")},n.canPlay=function(){var e=n.props,t=e.player,a=e.onVideoCanPlay;t.notice("\u221a",1500,.8),a(),document.getElementById("player").classList.remove("dplayer_disable")},n.pause=function(){console.log("\u64ad\u653e\u5668\u6682\u505c"),(0,n.props.onVideoPlayerPausedSwitch)(!0)},n.play=function(){console.log("\u64ad\u653e\u5668\u64ad\u653e"),(0,n.props.onVideoPlayerPausedSwitch)(!1)},n.playing=function(){(0,n.props.onVideoPlaying)()},n.fullscreen=function(){var e=document.getElementById("player");e.classList.remove("playerBorder"),e.style.resize=""},n.fullscreenCancel=function(){var e=document.getElementById("player");e.classList.add("playerBorder"),e.style.resize="both"},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){var e=this.props,t=e.videoUrl,n=e.picUrl,a=e.subUrl;return r.a.createElement(yt,{id:"playerBox"},r.a.createElement(bt.a,{id:"player",className:"playerBorder dplayer_disable ".concat(t?"":"defaultSize"),style:{resize:"both"},options:{hotkey:!1,video:{url:t,pic:n,customType:{flvCustom:function(e,t){if(R.clog("\u652f\u6301flv"),gt.a.isSupported()){var n=gt.a.createPlayer({type:"flv",url:e.src,hasAudio:!0});n.attachMediaElement(e),n.load()}}}},subtitle:{url:a,type:"webvtt",fontSize:"25px",bottom:"3%",color:"rgb(37, 211, 211)"},contextmenu:[{text:"SubEditor"},{text:"\u4f7f\u5185\u5bb9\u7684\u9ad8\u5ea6\u9002\u5e94\u4e8e\u5bbd\u5ea6",click:function(e){document.getElementById("player").style.height=""}},{text:"\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u9ad8\u5ea6",click:function(e){var t=document.getElementById("player");t.style.height="",t.style.width="90%"}},{text:"chrome\u5b57\u5e55\u9690\u85cf/\u663e\u793a",click:function(e){var t=e.video;t.className.indexOf("hiddenSubs")>0?t.classList.remove("hiddenSubs"):t.classList.add("hiddenSubs")}}],theme:"#ccc",loop:!0},onLoad:this.load,onError:this.error,onCanplay:this.canPlay,onPause:this.pause,onPlay:this.play,onPlaying:this.playing,onFullscreen:this.fullscreen,onFullscreenCancel:this.fullscreenCancel}))}}]),t}(a.Component),wt=n(153);function kt(){var e=Object(x.a)(["\n  font-size: 14px;\n  color: #495057;\n  background-color: #fff;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  background-clip: padding-box;\n\n  height: calc(1.5em + 0.5rem + 2px);\n  padding: 0.25rem 0.25rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem;\n\n  &.input_success {\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\n    }\n  }\n  &.input_error {\n    border-color: #dc3545;\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(232, 43, 43, 0.3);\n    }\n  }\n"]);return kt=function(){return e},e}var St=E.b.input(kt()),Et=function(e){var t=e.className,n=e.type,a=e.name,o=e.value,i=e.onChange,l=e.disabled,c=e.style,s=e.errors;return r.a.createElement(St,{disabled:l,className:[].concat(Object(b.a)(t),[s[a]?"input_error":"input_success"]),type:n,value:o,onChange:function(e){return i(a,e.currentTarget.value)},style:Object(h.a)({},c),onClick:function(e){e.stopPropagation()}})};function Tt(){var e=Object(x.a)(["\n  .rowClasses {\n    background-color: #f2f2f2;\n    // border-bottom: 1px solid rgb(36, 41, 45);\n    min-width: 650px;\n    transition: all 0.15s ease;\n\n    //\u53d6\u6d88\u6d4f\u89c8\u5668\u7684\u53cc\u51fb\u9009\u4e2d\n    -moz-user-select: none; /*\u706b\u72d0*/\n    -webkit-user-select: none; /*webkit\u6d4f\u89c8\u5668*/\n    -ms-user-select: none; /*IE10*/\n    -khtml-user-select: none; /*\u65e9\u671f\u6d4f\u89c8\u5668*/\n    user-select: none;\n\n    &.odd {\n      background-color: #fff;\n    }\n\n    &.highlight {\n      background-color: #2196f3;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    &.illegal {\n      background-color: #c75123;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    .rowT {\n      padding: 10px 5px;\n      text-align: center;\n    }\n\n    &: hover {\n      background-color: #529393;\n      color: #fff;\n      //\u5b57\u7a0d\u5fae\u5927\u4e9b\n      font-size: 14px;\n    }\n\n    &.onEditing {\n      background-color: #66cccc;\n\n      //\u7f16\u8f91\u65f6\u8fd4\u56de\u9690\u85cf \u975e\u7f16\u8f91\u72b6\u6001\u8fd4\u56de\u663e\u793a\n      .display_onEditing {\n        display: block !important;\n      }\n      .hidden_onEditing {\n        display: none !important;\n      }\n    }\n\n    .editing_default_hidden {\n      //\u9ed8\u8ba4\u9690\u85cf\n      display: none;\n      width: 100%;\n      height: 100%;\n    }\n\n    .operation {\n      display: flex;\n      justify-content: center;\n\n      i {\n        width: 25px;\n        cursor: pointer;\n        font-size: 16px;\n        &: hover {\n          //\u56fe\u6807\u7c97\u4e9b\n          font-weight: 600;\n          // color: #ccc;\n          color: #82a8b7;\n          &.deleteIcon {\n            color: #f5f239;\n          }\n        }\n      }\n    }\n  }\n\n  .lineBox {\n    display: none;\n    height: 0;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    bottom: 0px;\n    border-bottom: 0px dashed #529393;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    transition: color, border-color 0.3s ease-in-out;\n    &:hover {\n      display: block;\n      bottom: -5px;\n      border-bottom: 10px solid #02c0ff;\n      .insertBtn {\n        color: #02c0ff !important;\n        bottom: 10px;\n      }\n    }\n  }\n\n  .insertBtn {\n    position: absolute;\n    right: 4px;\n    width: 20px;\n    height: 20px;\n    bottom: 15px;\n  }\n\n  //\u5f53scroll\u6eda\u5230\u5f53\u524drow row\u7684\u52a8\u753b\n  .scrollToRowAnimation {\n    animation: scrollToRowAnimation 3s;\n    //\u64ad\u653e\u6b21\u6570\u65e0\u9650\u5236\n    // animation-iteration-count: infinite;\n  }\n\n  .scrollIndexBackColor {\n    transition: background-color 0.5s ease-in;\n    background-color: #04e8e8 !important;\n    &:hover {\n      color: black;\n    }\n  }\n"]);return Tt=function(){return e},e}var Ct=E.b.div(Tt()),At=0,Nt=function(e){var t=e.index,n=e.style,a=e.className,o=e.rowData,i=e.onRowRemove,l=e.onRowEdit,c=e.onRowClick,s=e.onRowCommit,u=e.onRowCancel,d=e.onRowInsert,p=e.editingIndex,f=e.editingSub,m=e.errors,h=e.onInputValueChange,b=e.displayIndex,g=e.scrollIndex,v=["editing_default_hidden","display_onEditing"].join(" ");return r.a.createElement(Ct,null,r.a.createElement("div",{key:t,style:n,className:[a,"rowClasses",t%2?"odd":"",p===t?"onEditing":"",g===t?"scrollIndexBackColor":""].join(" "),onClick:function(){At+=1,setTimeout((function(){1===At?c(o):2===At&&l(o),At=0}),200)},onKeyUp:function(e){switch(e.preventDefault(),e.stopPropagation(),e.keyCode){case 13:s(o);break;case 27:u();break;default:return}}},r.a.createElement("div",{className:"rowT operation",style:{width:90}},r.a.createElement("i",{onClick:function(e){e.stopPropagation(),l(o)},className:"fa fa-pencil ".concat("hidden_onEditing"),title:"\u7f16\u8f91"}),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),s(o)},className:"fa fa-check-circle-o ".concat(v),title:"\u4fdd\u5b58"}),r.a.createElement("i",{className:"fa fa-times deleteIcon",onClick:function(e){e.stopPropagation(),i(o,t)},title:"\u5220\u9664"})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.startTime),r.a.createElement(Et,{className:[v],type:"text",name:"startTime",value:f.startTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.endTime),r.a.createElement(Et,{className:[v],type:"text",name:"endTime",value:f.endTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.length),r.a.createElement("span",{className:"".concat(v)},f.length)),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.content),r.a.createElement(Et,{className:[v],type:"text",name:"content",value:f.content,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT operation",style:{width:50}},r.a.createElement("span",{style:{display:b?"block":"none"},className:"".concat("hidden_onEditing")},t),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),u(o)},className:"fa fa-reply ".concat(v),title:"\u53d6\u6d88\u7f16\u8f91"}),r.a.createElement("div",{className:"".concat("hidden_onEditing"," lineBox "),style:{display:b?"none":"block"}},r.a.createElement("i",{className:"fa fa-plus-square  insertBtn",title:"\u63d2\u5165\u5b57\u5e55",onClick:function(e){e.stopPropagation(),d(o)}})))))};function jt(){var e=Object(x.a)(["\n  background: #c0d9d9;\n  display: flex;\n  min-width: 650px;\n\n  .rowT {\n    padding: 10px 5px;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    text-align: center;\n    text-transform: none;\n  }\n\n  .buttonLike {\n    position: relative;\n    background: #ffffff;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 30px;\n    // margin-right: 10px;\n    padding: 9px 16px;\n    border-style: none;\n    border-radius: 10px;\n    overflow: hidden;\n    transition: all 200ms linear 0s;\n\n    i {\n      margin-right: 5px;\n    }\n  }\n\n  .switchButton {\n    cursor: pointer;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n      span {\n        display: block;\n      }\n    }\n  }\n\n  .stayButton {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    cursor: pointer;\n    span {\n      position: relative;\n      top: 4px;\n    }\n    transition: all 0.3s ease;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n    }\n  }\n"]);return jt=function(){return e},e}var Ot=E.b.div(jt()),Bt=function(e){var t=e.displayIndex,n=e.onDisplayIndexSwitch,a=e.subArrayLenIsZero,o=e.onInsert;return r.a.createElement(Ot,null,r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("div",{className:"buttonLike"},r.a.createElement("span",{style:{display:a?"none":"block"}},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"}),"\u7f16\u8f91"),r.a.createElement("div",{onClick:function(){return o()},className:"stayButton",style:{display:a?"block":"none"}},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u5efa")))),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-backward","aria-hidden":"true"}),"\u5f00\u59cb")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-forward","aria-hidden":"true"}),"\u7ed3\u675f")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"}),"\u65f6\u957f")),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"buttonLike "},r.a.createElement("i",{className:"fa fa-text-width","aria-hidden":"true"}),"\u5185\u5bb9")),r.a.createElement("div",{className:"rowT",style:{width:50}},r.a.createElement("div",{className:"buttonLike switchButton",onClick:function(){return n(!t)}},r.a.createElement("span",{style:{display:t?"block":"none"},className:" fa fa-sort-amount-asc",title:"\u5207\u6362\u5230\u529f\u80fd"}),r.a.createElement("span",{style:{display:t?"none":"block"},className:" fa fa-sliders",title:"\u5207\u6362\u5230\u5e8f\u53f7"}))))},It=n(149),Rt=n.n(It);function Ut(){var e=Object(x.a)(["\n  height: 100%;\n  .ReactVirtualized__Table {\n    font-size: 12px;\n    background: #e3eeee;\n    // background: #c0d9d9; root\u80cc\u666f\u8272\n\n    .ReactVirtualized__Table__Grid {\n      outline: none;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n      border-radius: 0.5rem;\n      min-width: 650px;\n      background-color: #e3eeee;\n      background-image: url(",");\n      background-repeat: no-repeat;\n      background-position: 98% 98%;\n\n      .ReactVirtualized__Grid__innerScrollContainer {\n        min-width: 650px;\n      }\n    }\n\n    .gridScrollWrap {\n      overflow: hidden !important;\n      :hover {\n        overflow-y: scroll !important;\n\n        // fireFox\n        scrollbar-color: #6fd1d8 #fff;\n        // scrollbar-color: light;\n        scrollbar-width: thin;\n        // scrollbar-width: none;\n\n        //Safari and Chrome\n        ::-webkit-scrollbar {\n          // display: none;\n          width: 5px; /*\u9ad8\u5bbd\u5206\u522b\u5bf9\u5e94\u6a2a\u7ad6\u6eda\u52a8\u6761\u7684\u5c3a\u5bf8*/\n        }\n        ::-webkit-scrollbar-thumb {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u5c0f\u65b9\u5757*/\n          border-radius: 10px;\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          background: #6fd1d8;\n          height: 10px;\n        }\n\n        ::-webkit-scrollbar-track {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u8f68\u9053*/\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          border-radius: 10px;\n          background: #fff;\n        }\n      }\n    }\n\n    .input,\n    .textarea {\n      border: none;\n      padding: 5px;\n      min-height: 30px;\n      font-size: 12px;\n      text-align: center;\n      background-color: #3a3a3a;\n    }\n\n    .textarea {\n      resize: vertical;\n    }\n\n    p {\n      line-height: 1.5;\n      margin: 0;\n    }\n  }\n"]);return Ut=function(){return e},e}var Pt=E.b.div(Ut(),Rt.a),Ft=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).$tableRef=r.a.createRef(),n.state={editingIndex:-1,editingSub:{start:0,startTime:"",end:0,endTime:"",length:0,content:""},errors:{},displayIndex:!0},n.schema={},n.errorSchema={},n.toastId_validate=null,n.toastId_validatePropertys={startTime:null,endTime:null,content:null},n.validate=function(){var e=Q.validate(n.state.editingSub,n.schema),t={};return e&&e.map((function(e){return t[e]=n.errorSchema[e]})),0===Object.keys(t).length?(n.setState({errors:{}}),!1):(n.setState({errors:t}),t)},n.toast_validate=function(e){He.done(n.toastId_validate),n.toastId_validate=He.bootstrapToast(e,"warning","top_left",{autoClose:1e4},"flip")},n.validateProperty=function(e,t){var a=Object(U.a)({},e,n.schema[e]),r=Q.validateProperty(e,t,a),o=Object(h.a)({},n.state.errors);return r?(o[e]=n.errorSchema[e],n.setState({errors:o}),Object(U.a)({},e,n.errorSchema[e])):(delete o[e],n.setState({errors:o}),!1)},n.toast_validateProperty=function(e,t){var a=n.toastId_validatePropertys[e],r=Object.values(n.toastId_validatePropertys),o=r.indexOf(a);r.splice(o,1),r.map((function(e){return He.done(e)})),He.isActive(a)||(n.toastId_validatePropertys[e]=He.notify(t.length>0&&t[0],"bottom_left","default",{hideProgressBar:!0,autoClose:5e3},"flip"))},n.handleInputValue=function(e,t){var a=Object(h.a)({},n.state.editingSub);a[e]=t;var r=n.validateProperty(e,t);if(r){var o=Q.errors2messages(r);n.toast_validateProperty(e,o)}else He.done(n.toastId_validatePropertys[e]),a.length=he.getSubLength(a);n.setState({editingSub:a},(function(){}))},n.handleRowEdit=function(e){var t=n.props.subArray,a=he.mapSubToFullModel(e);n.setState({editingSub:a},(function(){n.validate(),R.clog("\u8868\u5355\u56de\u663e\uff1a",n.state.editingSub)}));var r=t.indexOf(e);n.setState({editingIndex:r})},n.handleRowClick=function(e){(0,n.props.onClick)(e)},n.handleRowCommit=function(e){var t=n.props.onCommit,a=n.validate();if(a){var r=Q.errors2messages(a);n.toast_validate(r)}else He.done(n.toast_validate),n.handleRowCancel(),t(e,he.mapSubToFullModel(n.state.editingSub))},n.handleRowRemove=function(e,t){var a=n.props.onRemove;t===n.state.editingIndex&&n.handleRowCancel(),a(e)},n.handleRowCancel=function(){n.setState({editingIndex:-1})},n.tableBackGroundColor=function(e){var t=e&&0===e.length?"#e3eeee":"#c0d9d9",n=document.getElementById("vSubTable");n&&(n.style.backgroundColor=t)},n.handleDisplayIndexSwitch=function(e){var t=!!e;n.setState({displayIndex:t})},n.handleRowInsert=function(e){(0,n.props.onInsert)(e)},n.scrollToButtom=function(){var e=document.getElementsByClassName("gridScrollWrap")[0],t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;console.log(e,"scrollHeight:",n,";scrollTop:",t,";clientHeight:",a,";scrollHeight - scrollTop - clientHeight:",n-t-a),e.scrollTop=e.scrollTop+(n-t-a)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.schema=Q.getEditingSubSchema(),this.errorSchema=Q.getEditingErrorSchema()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.subArray,a=t.scrollIndex,o=t.container,i=t.onInsert,l=o.containerHeight,c=o.containerWidth;return this.tableBackGroundColor(n),r.a.createElement(Pt,{onKeyUp:function(t){switch(t.preventDefault(),t.stopPropagation(),t.keyCode){case 27:e.handleRowCancel();break;default:return}}},r.a.createElement(wt.a,{id:"vSubTable",ref:this.$tableRef,headerHeight:55,width:c/2,height:l,gridClassName:"gridScrollWrap",rowHeight:60,scrollToIndex:a,rowCount:n.length,rowGetter:function(e){var t=e.index;return n[t]},headerRowRenderer:function(){return r.a.createElement(Bt,Object.assign({},e.state,{subArrayLenIsZero:n&&0===n.length,onInsert:i,onDisplayIndexSwitch:e.handleDisplayIndexSwitch}))},rowRenderer:function(t){return r.a.createElement(Nt,Object.assign({},t,{onRowRemove:e.handleRowRemove,onRowEdit:e.handleRowEdit,onRowClick:e.handleRowClick,onRowCommit:e.handleRowCommit,onRowCancel:e.handleRowCancel,onRowInsert:e.handleRowInsert,onInputValueChange:e.handleInputValue},e.state,{scrollIndex:a}))}}))}}]),t}(a.PureComponent);function Lt(){var e=Object(x.a)(["\n  display: flex;\n  margin-bottom: 15px;\n  justify-content: space-around;\n\n  i {\n    position: relative;\n  }\n  .controlIcon {\n    color: #529393;\n    transition: color 0.2s ease;\n    &:hover {\n      color: #66cccc;\n    }\n  }\n"]);return Lt=function(){return e},e}var zt=E.b.div(Lt()),Mt=function(e){var t=e.onAction,n=e.playerPaused;return r.a.createElement(zt,null,r.a.createElement("i",{className:"fa fa-fast-backward controlIcon shToolTip",shtitle:"ctrl alt \u2190 \u56de\u900010\u79d2",onClick:function(){return t(-10)}}),r.a.createElement("i",{className:"fa fa-backward controlIcon shToolTip",shtitle:"ctrl \u2190 \u56de\u90001\u79d2",onClick:function(){return t(-1)}}),r.a.createElement("i",{className:"fa fa-step-backward controlIcon shToolTip",shtitle:"\u2190 \u56de\u90000.1\u79d2",onClick:function(){return t(-.1)}}),n?r.a.createElement("i",{className:"fa fa-play controlIcon shToolTip",shtitle:"space \u64ad\u653e",onClick:function(){return t()}}):r.a.createElement("i",{className:"fa fa-pause controlIcon shToolTip",shtitle:"space \u6682\u505c",onClick:function(){return t()}}),r.a.createElement("i",{className:"fa fa-step-forward controlIcon shToolTip",shtitle:"\u2192 \u524d\u8fdb0.1\u79d2",onClick:function(){return t(.1)}}),r.a.createElement("i",{className:"fa fa-forward controlIcon shToolTip",shtitle:"ctrl \u2192 \u524d\u8fdb1\u79d2",onClick:function(){return t(1)}}),r.a.createElement("i",{className:"fa fa-fast-forward controlIcon shToolTip",shtitle:"ctrl alt \u2192 \u524d\u8fdb10\u79d2",onClick:function(){return t(10)}}))};function Dt(){var e=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  user-select: none;\n  position: relative;\n  border-radius: 10px;\n  color: white;\n  cursor: pointer;\n  box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n\n  .rippleSpan {\n    display: block;\n    position: absolute;\n    border-radius: 100%;\n    background: rgba(255, 255, 255, 0.5);\n    transform: scale(0);\n  }\n\n  .rippleAnimation {\n    animation: ripple 0.5s ease-in;\n  }\n\n  .btnMouseDown {\n    opacity: 0.5;\n  }\n"]);return Dt=function(){return e},e}var Wt=E.b.div(Dt()),Vt=function(e){var t=e.disabled,n=e.height,o=e.width,i=e.bgColor,l=e.label,c=e.color,s=e.onClick,u=e.title,d=e.className,p=e.element,f=Object(a.useCallback)((function(e){null===e||t||(e.onmouseenter=function(t){var n=e.querySelector(".rippleSpan");n.classList.add("rippleAnimation"),n.style.width=this.offsetWidth+"px",n.style.height=this.offsetWidth+"px",n.style.top=-(this.offsetHeight-t.offsetY)+"px",n.style.left=-(this.offsetWidth/2-t.offsetX)+"px",setTimeout((function(){n.classList.remove("rippleAnimation")}),500)},e.onmousedown=function(e){this.style.opacity=.7,this.style.boxShadow="0px 0px 0px rgba(0, 0, 0, 0.2)"},e.onmouseup=function(e){this.style.opacity="",this.style.boxShadow=""},e.setAttribute("shtitle",u))}),[t,u]);return r.a.createElement(Wt,{ref:f,onClick:s,style:{width:o,height:n,color:c,backgroundColor:i},className:"".concat(d," ").concat(u&&"shToolTip")},r.a.createElement("span",{className:"rippleSpan"}),l,p)},Gt=n(150),Kt=n.n(Gt);function Ht(){var e=Object(x.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: auto;\n  cursor: pointer;\n"]);return Ht=function(){return e},e}function Yt(){var e=Object(x.a)(["\n  flex: 1;\n  display: flex;\n  padding: 15px 0 15px 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  // backgroud-color: #c0d9d9;\n\n  .toolsContainerBox {\n    display: flex;\n    flex: 1;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n    background-color: #e3eeeef2;\n    padding: 15px;\n    overflow-y: hidden;\n    :hover {\n      // overflow-x: scroll;\n      overflow-y: visible;\n    }\n  }\n\n  .leftBox {\n    flex: 1;\n    display: flex;\n    background: url(",') no-repeat;\n    background-size: 47%;\n    background-position: 85% center;\n\n    .controlBox {\n      width: 200px;\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-end;\n    }\n  }\n\n  .toolsBox {\n    flex: 1;\n    min-height: 150px;\n    border: 1px dashed #529393;\n    border-radius: 6px 6px;\n    display: flex;\n    flex-direction: column;\n\n    .shRow {\n      display: flex;\n    }\n\n    .shRowHeader {\n      width: 100px;\n      display: flex;\n      padding: 5px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .shRowBody {\n      flex: 1;\n      display: flex;\n      padding: 0 30px 0 30px;\n      justify-content: space-between;\n      align-items: center;\n      flex-direction: row;\n\n      .toolsBtn {\n        // margin-right: 15px;\n        z-index: 1;\n        // pointer-events: none;\n      }\n    }\n\n    //select\u6837\u5f0f\n    .toolsSelect {\n      user-select: none;\n      border: none;\n      background: none;\n      appearance: none;\n      -webkit-appearance: none;\n      -ms-appearance: none;\n      -moz-appearance: none;\n      -o-appearance: none;\n      outline: none;\n      text-align: center; //\u6587\u5b57\u5bf9\u9f50\u65b9\u5f0f\n      text-align-last: center;\n      height: 35px;\n      width: 90px;\n      border-radius: 5px;\n      background: linear-gradient(150deg, #00dfea, #66cccc);\n      color: white;\n      cursor: pointer;\n      box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n      overflow: hidden;\n      // margin-right: 10px;\n      option {\n        color: black;\n        background: #ffffff;\n      }\n    }\n  }\n\n  //\u6ed1\u5757\u6837\u5f0f\n  input[type="range"] {\n    appearance: none;\n    height: 3px;\n    width: 200px;\n    outline: none;\n    background-color: #529393;\n    border-radius: 10px;\n  }\n  //firefox\u53bbinput range \u7684outline\n  input[type="range"]::-moz-focus-outer {\n    border: 0;\n  }\n\n  //chorme\n  input[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    outline: none;\n    height: 15px;\n    width: 15px;\n    background: #ffffff;\n    border-radius: 50%;\n  }\n']);return Yt=function(){return e},e}var qt=E.b.div(Yt(),n(252)),Qt=E.b.input(Ht()),Jt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).languages=lt.getBaiduTranslateLanguages(),n.languagesKeys=Object.keys(n.languages),n.state={currentLanguageKeyFrom:"auto",currentLanguageKeyTo:"zh",videoName:"",subName:"subtitle.vtt",modalIsOpen:!1},n.handleLanguageChange=function(e,t){n.setState(Object(U.a)({},e,t))},n.handleTranslate=function(){var e=n.props.onAllSubTranslate,t=n.state;e(t.currentLanguageKeyFrom,t.currentLanguageKeyTo)},n.handleTranslateBackupReset=function(){(0,n.props.onSubArrayBackupReset)()},n.handleVideoControlActions=function(e){(0,n.props.onVideoControlAction)(e)},n.handleSubFile=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,o,i,l,c,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xe.start(),a=t.currentTarget.files[0],/\.vtt$/i.test(a.name)){e.next=6;break}return Xe.done(),He.notify("\u6682\u53ea\u652f\u6301vtt\u683c\u5f0f\u7684\u5b57\u5e55\u6587\u4ef6\uff0c\u5176\u4ed6\u683c\u5f0f\u5c06\u5728\u540e\u7eed\u66f4\u65b0\u4e2d\u52a0\u5165","top_center","warning"),e.abrupt("return");case 6:return o=n.props,i=o.updateSubArray,l=o.updateSubUrl,e.prev=7,e.next=10,he.readSubFileAsText(a);case 10:return c=e.sent,He.notify(r.a.createElement("p",null,c),"top_center","default",{autoClose:!1,className:"textReader"}),s=he.createVttSubBlobUrl(c),l(s,!0),e.next=16,he.createSubArray(s);case 16:u=e.sent,i(u,!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),He.notify("<Header>".concat(e.t0.message),"top_center","warning");case 23:Xe.done();case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}(),n.handleVideoFile=function(e){Xe.start();var t=e.currentTarget.files[0],a=document.createElement("video");if(R.clog("\u521b\u5efa\u5143\u7d20\uff1a",a,t,t.type,a.canPlayType(t.type)),"maybe"!==a.canPlayType(t.type)&&!/\.flv$/i.test(t.name))return Xe.done(),void He.notify("\u65e0\u6cd5\u64ad\u653e\u8be5\u6587\u4ef6\uff0c\u64ad\u653e\u5668\u660e\u786e\u652f\u6301mp4\u3001flv\u683c\u5f0f\u7684\u89c6\u9891","top_center","warning");n.setState({videoName:t.name});var r=URL.createObjectURL(t);R.clog("\u89c6\u9891url",r),(0,n.props.onSwitch)(t.type||t.name,!t.type,r),Xe.done()},n.handleSubFileDownload=function(){(0,n.props.onDownload)()},n.ffmpegEncoding=!1,n.handleVideoWithSubDownload=Object(y.a)(v.a.mark((function e(){var t,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u628a\u5b57\u5e55\u4e0e\u89c6\u9891\u5408\u5e76\u540e\u8f93\u51fa\uff0c\u5c06\u628a\u6574\u4e2a\u89c6\u9891\u91cd\u65b0\u7f16\u7801\uff0c\u8fd9\u4f1a\u82b1\u8d39\u5f88\u957f\u65f6\u95f4\uff0c\u662f\u5426\u7ee7\u7eed\uff1f")){e.next=16;break}return n.handleFfmpegEncodeStop(),t=n.props,a=t.videoUrl,r=t.subUrl,e.prev=4,e.next=7,Pe.encodeVideoWithSub(a,n.state.videoName,r,n.state.subName);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),console.error(e.t0),He.notify(e.t0.message),e.abrupt("return");case 14:He.notify("\u89c6\u9891\u7f16\u7801\u5f00\u59cb\uff0c\u6b64\u529f\u80fd\u4ecd\u5728\u6d4b\u8bd5\u4e2d\uff0c\u6682\u65e0\u8fdb\u5ea6\u6761\uff0c\u53eff12\u67e5\u770b\u63a7\u5236\u53f0\u4fe1\u606f\u3002\u7531\u4e8e\u662f\u5728\u6d4f\u89c8\u5668\u5185js\u6267\u884c\uff0c\u5e76\u4e14\u662f\u5355worker\uff0c\u6240\u4ee5\u901f\u5ea6\u6781\u6162\uff0c\u5efa\u8bae\u4ec5\u4e0b\u8f7d\u5b57\u5e55\u6587\u4ef6\uff0c\u5728\u672c\u5730\u5408\u5e76\u89c6\u9891\u4e0e\u5b57\u5e55\u3002"),n.ffmpegEncoding=!0;case 16:case"end":return e.stop()}}),e,null,[[4,9]])}))),n.handlesubTransform=function(){n.setState({modalIsOpen:!0})},n.handleModalClose=function(){n.setState({modalIsOpen:!1})},n.handleFfmpegEncodeStop=function(){n.ffmpegEncoding&&(je.terminateWork(),n.ffmpegEncoding=!1,He.notify("\u5df2\u505c\u6b62\u8fdb\u884c\u4e2d\u7684\u7f16\u7801\u5de5\u4f5c"))},n.handleSubClean=function(){(0,n.props.onClean)()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.duration,a=t.playerPaused,o=t.onDurationChange,i=this.state,l=i.currentLanguageKeyFrom,c=i.currentLanguageKeyTo,s=i.modalIsOpen;return r.a.createElement(qt,null,r.a.createElement("div",{className:"toolsContainerBox"},r.a.createElement("div",{className:"leftBox"},r.a.createElement("div",{className:"controlBox"},r.a.createElement(Mt,{onAction:this.handleVideoControlActions,playerPaused:a}),r.a.createElement("input",{type:"range",title:"\u65f6\u95f4\u8f74\uff1a".concat(n),value:n,min:"10",max:"20",step:"1",onChange:function(e){o(Number(e.currentTarget.value))}}))),r.a.createElement("div",{className:"toolsBox"},r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Vt,{disabled:!0,label:"\u5e38\u89c4",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-folder-open","aria-hidden":"true"}),element:r.a.createElement(Qt,{type:"file",name:"file",onChange:this.handleSubFile}),title:"\u6253\u5f00\u672c\u5730\u5b57\u5e55",color:"white",bgColor:"#529393"}),r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-play-circle","aria-hidden":"true"}),element:r.a.createElement(Qt,{className:"uploadVideo",type:"file",name:"file",onChange:this.handleVideoFile}),color:"white",bgColor:"#529393",title:"\u6253\u5f00\u672c\u5730\u89c6\u9891",onClick:function(){return console.log("click")}}),r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u4e0b\u8f7d\u5b57\u5e55",onClick:this.handleSubFileDownload}),r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}),color:"white",bgColor:"#ec6464",title:"\u6e05\u7a7a\u5b57\u5e55",onClick:this.handleSubClean}))),r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Vt,{disabled:!0,label:"\u7ffb\u8bd1",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyFrom",value:l,title:"\u5f53\u524d\u8bed\u8a00",onChange:function(t){return e.handleLanguageChange(t.currentTarget.name,t.currentTarget.value)}},this.languagesKeys.map((function(t){return r.a.createElement("option",{key:t,value:t},e.languages[t])}))),r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyTo",value:c,title:"\u7ffb\u8bd1\u81f3",onChange:function(t){return e.handleLanguageChange(t.currentTarget.name,t.currentTarget.value)}},this.languagesKeys.filter((function(e){return"auto"!==e})).map((function(t){return r.a.createElement("option",{key:t,value:t},e.languages[t])}))),r.a.createElement(Vt,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-globe","aria-hidden":"true"}),color:"white",bgColor:"#66cccc",title:"\u70b9\u51fb\u7ffb\u8bd1 (\u8bf7\u7ed9\u5b83\u4e9b\u4f11\u606f\u65f6\u95f4)",onClick:this.handleTranslate}),r.a.createElement(Vt,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-undo","aria-hidden":"true"}),color:"white",bgColor:"#00dfea",title:"\u56de\u9000\u81f3\u4e0a\u6b21\u7ffb\u8bd1\u524d\u7684\u7248\u672c",onClick:this.handleTranslateBackupReset}))),r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Vt,{disabled:!0,label:"\u7f16\u7801",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u5c06\u5b57\u5e55\u5185\u5c01\u5230\u89c6\u9891\uff0c\u5e76\u4e0b\u8f7d",onClick:this.handleVideoWithSubDownload}),r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-retweet fa-spin","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u5b57\u5e55\u683c\u5f0f\u8f6c\u6362",onClick:this.handlesubTransform}),r.a.createElement(Vt,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-ban","aria-hidden":"true"}),color:"white",bgColor:"#ec6464",title:"\u505c\u6b62\u7f16\u7801",onClick:this.handleFfmpegEncodeStop}))))),r.a.createElement(Kt.a,{isOpen:s,closeTimeoutMS:300,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(102, 204, 204, 0.75)",zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",height:"40vh",width:"40vw",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",flexFlow:"column nowrap"}}},r.a.createElement("div",null,"\u529f\u80fd\u5f00\u53d1\u4e2d"),r.a.createElement("div",{onClick:this.handleModalClose,className:"shToolTip",shtitle:"\u5173\u95ed\u63d0\u793a",style:{display:"flex",position:"relative",justifyContent:"center",alignItems:"center",cursor:"pointer",width:50,height:40,outline:"none",border:"none",backgroundColor:"#66cccc",boxShadow:"1px 2px 5px rgb(0,0,0,0.3)",borderRadius:"5px 5px",fontSize:14,margin:10}},"Close")))}}]),t}(a.PureComponent),Xt=n(151);function Zt(){var e=Object(x.a)(["\n  //\u5e95\u90e8\u65f6\u95f4\u8f74 \u56fa\u5b9a150px\n  height: 150px;\n  position: relative;\n  display: flex;\n  width: 100%;\n  background-color: #c0d9d9;\n  // border-top: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.3);\n"]);return Zt=function(){return e},e}var _t=E.b.div(Zt()),$t=function(e){var t=e.currentTime,n=e.videoUrl,a=e.onWaveClick,o=e.onWaveContextmenu,i=e.subArray,l=e.onSubBlockMove,c=e.onSubBlockMoveError,s=e.onSubBlockResize,u=e.onSubBlockClick,d=e.duration;return r.a.createElement(_t,null,r.a.createElement(Xt.ShWave,{duration:d,backgroundColor:"#529393",currentTime:t,throttleWait:1,url:n,waveColor:"#fbf8f86b",alterWaveColor:"#57e3e3",waveScale:.8,click:a,contextmenu:o,subArray:i,onSubMove:l,onSubMoveError:c,ErrorWait:1050,ErrorColor:"#f09b50d9",onSubResize:s,onSubClick:u}))};function en(){var e=Object(x.a)(["\n  flex: 1;\n  padding-top: 5px;\n"]);return en=function(){return e},e}function tn(){var e=Object(x.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"]);return tn=function(){return e},e}function nn(){var e=Object(x.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n"]);return nn=function(){return e},e}function an(){var e=Object(x.a)(["\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100vh;\n        overflow: auto;\n        min-width: 1300px;\n        min-height: 800px;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        // color: #ccc; \u767d\u5b57\n        background: #C0D9D9;\n        // background: #66CCCC;\n        // overflow-y: scroll;\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return an=function(){return e},e}var rn=Object(E.a)(an()),on=E.b.div(nn()),ln=E.b.div(tn()),cn=E.b.div(en()),sn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,un=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={videoUrl:"",subUrl:"",subArray:[],picUrl:Pe.getDefaultPicUrl(),container:{containerHeight:10,containerWidth:10},scrollIndex:-1,player:null,currentTime:0,duration:15,playerPaused:!0},n.subUrlWorker=null,n.WillMemorize=!0,n.resizeContainer=function(){var e=document.body.clientHeight-200,t=document.body.clientWidth,a=document.querySelector("#mainContainer");a.style.maxWidth="".concat(t,"px;"),a.style.maxHeight="".concat(e,"px;"),R.clog("\u66f4\u65b0container\u7684\u5bbd\u9ad8",t,e),n.setState({container:{containerHeight:e,containerWidth:t}})},n.addResizeListener=function(){var e=function(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}(n.resizeContainer,300);window.addEventListener("resize",e),R.clog("\u6dfb\u52a0resize\u4e8b\u4ef6\u76d1\u542c")},n.videoControlsShortcutkey=function(e){if(17!==e.keyCode&&18!==e.keyCode){var t;switch(e.keyCode){case 37:t=-.1,e.ctrlKey&&(t=-1),e.ctrlKey&&e.altKey&&(t=-10);break;case 39:t=.1,e.ctrlKey&&(t=1),e.ctrlKey&&e.altKey&&(t=10);break;case 32:break;default:return}e.preventDefault(),n.handleVideoControlActions(t)}},n.undoShortcutkey=function(e){var t;switch(e.keyCode){case 90:e.ctrlKey&&(t=!0),e.ctrlKey&&e.shiftKey&&(t=!1);break;default:return}"undefined"!==typeof t&&(e.preventDefault(),n.editorStateRollBack(t))},n.addKeyboardListener=function(){window.addEventListener("keyup",n.videoControlsShortcutkey),window.addEventListener("keyup",n.undoShortcutkey)},n.removeKeyboardListener=function(){window.removeEventListener("keyup",n.videoControlsShortcutkey),window.removeEventListener("keyup",n.undoShortcutkey)},n.updateOneState=function(e){n.setState(e),R.clog("\u66f4\u65b0state\uff1a",e)},n.updateSubArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.map((function(e){return he.mapSubToFullModel(e)}));var a=he.sortSubArray(e);n.setState({scrollIndex:-1}),n.setState({subArray:a},(function(){t&&(n.storageSubs(n.state.subArray),n.subUrlWorker.postMessage(n.state.subArray))}))},n.updateSubUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];URL.revokeObjectURL(n.state.subUrl),n.setState({subUrl:e},(function(){t&&(R.clog("\u88c5\u8f7d\uff1a",n.state.subUrl),n.loadTrack(n.state.subUrl))}))},n.loadTrack=function(e){if(n.cleanSubP(),n.state.player&&n.state.player.video){var t=n.state.player.video.firstElementChild;t.default=!0,t.kind="subtitles",t.src=e}},n.cleanSubP=function(){var e=document.getElementsByClassName("dplayer-subtitle")[0],t=e.firstChild;t&&(e.removeChild(t),R.clog("\u6e05\u9664\u5b57\u5e55\u6b8b\u7559",t))},n.storageSubs=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];he.saveSubArray(e,t)},n.cleanStorageSubs=function(){he.cleanSubArray(),R.clog("\u6e05\u7a7a\u5b58\u50a8\u7684\u5b57\u5e55\uff0c\u4e0d\u542b\u5907\u4efd")},n.initSubTable=Object(y.a)(v.a.mark((function e(){var t,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.getSubArray();case 3:if((t=e.sent)&&0!==t.length){e.next=12;break}return a=Pe.getDefaultSubUrl(),n.updateSubUrl(a,!0),e.next=9,he.createSubArray(a);case 9:return r=e.sent,n.updateSubArray(r),e.abrupt("return");case 12:n.updateSubArray(t),o=he.createSubArrayUrl(t),n.updateSubUrl(o,!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),He.notify("\u8bfb\u53d6\u5b57\u5e55\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u6e05\u9664\u7f13\u5b58","top_center","info");case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),n.handleSubRemove=function(e){var t=Object(b.a)(n.state.subArray),a=t.indexOf(e);t.splice(a,1),n.updateSubArray(t,!0),R.clog("\u5220\u9664",e,a)},n.handleSubEdit=function(e){var t=n.state.subArray.map((function(e){return Object(h.a)({},e,{startTime:e.startTime,endTime:e.endTime,length:e.length,editing:!1})})),a=n.state.subArray.indexOf(e);t[a].editing=!0,n.updateSubArray(t),R.clog("handleEdit",e,a)},n.handleSubClick=function(e){if(e&&e.start){var t=e.start;n.playerSeekTo(t)}},n.handleSubCancel=function(e){var t=Object(b.a)(n.state.subArray),a=t.indexOf(e);t[a].editing=!1,n.updateSubArray(t)},n.handleSubCommit=function(e,t){var a=Object(b.a)(n.state.subArray),r=a.indexOf(e);a[r]=t,n.updateSubArray(a,!0),R.clog("\u63d0\u4ea4\uff1a",e,t,a)},n.handleSubInsert=function(e){var t=e?e.end+.001:0,a=Object(b.a)(n.state.subArray),r=a.indexOf(e),o=a[r+1],i=o?Math.abs(o.start-.001):t+5;if(Number((i-t).toFixed(3))<.001)He.notify("\u7a7a\u95f4\u4e0d\u8db3\uff0c\u524d\u540e\u5b57\u5e55\u76f8\u9694\u81f3\u5c11\u9700\u89810.03\u79d2");else{var l=he.getDefaultSub(Number(t),Number(i));a.splice(r+1,0,l),n.updateSubArray(a);var c=r+1;n.setState({scrollIndex:c}),R.clog("\u63d2\u5165\uff1a",l)}},n.handleSubDownload=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.downloadSubFile();case 3:t=e.sent,R.clog(t),t||He.notify("\u65e0\u5b57\u5e55\u6587\u4ef6\uff0c\u8bf7\u5148\u5236\u4f5c\u60a8\u7684\u5b57\u5e55\u3002"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),He.notify("\u4e0b\u8f7d\u51fa\u9519","top_center","warning");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.handleSubClean=function(){if(window.confirm("\u662f\u5426\u8981\u5220\u9664\u6240\u6709\u5b57\u5e55\uff1f")){n.cleanStorageSubs(),n.updateSubUrl("",!0);n.updateSubArray([])}},n.handlePlayerInit=function(e){R.clog("\u521d\u59cb\u5316\u64ad\u653e\u5668"),n.setState({player:e});sn((function t(){var a=e.video;n.handleCurrentTime(a.currentTime),sn(t)}))},n.playerSeekTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pause",a=n.state.player;if(a&&a.video){var r=a.video.duration;a[t]();var o=e>r?r:e;a.seek(o)}},n.handleVideoSwitch=function(e,t,a){var r=Pe.createVideoType(e,t);URL.revokeObjectURL(n.state.videoUrl),n.setState({videoUrl:a}),n.state.player.switchVideo({url:a,type:r})},n.handleVideoCanPlay=function(){if(R.clog("\u89c6\u9891\u5df2\u7ecf\u5c31\u7eea"),navigator.userAgent.toLowerCase().indexOf("chrome")>0){var e=document.getElementsByClassName("dplayer-subtitle")[0];e&&(e.style.opacity=0)}},n.handleScrollIndexFrame=function(e){n.state.scrollIndex!==e&&n.setState({scrollIndex:e})},n.handleCurrentTime=function(e){n.state.currentTime!==e&&n.setState({currentTime:e},(function(){var t=n.state.subArray.findIndex((function(t){return t.start<=e&&t.end>e}));-1!==t&&n.handleScrollIndexFrame(t)}))},n.handlePlayerPaused=function(e){var t=n.state.player;t&&t.video&&(e=t.video.paused),n.setState({playerPaused:e})},n.handleVideoPlaying=function(){},n.handleWaveClick=function(e,t){n.playerSeekTo(e)},n.handleWaveContextmenu=function(e,t){n.playerSeekTo(e,"play")},n.handleSubBlockMove=function(e,t){var a=Object(b.a)(n.state.subArray),r=a.indexOf(e),o=a[r],i=Number(Number(o.start+t).toFixed(3)),l=Number(Number(o.end+t).toFixed(3));if(!(i<0||l<=0)){var c=Object(h.a)({},o);c.startTime=he.toTime(i),c.endTime=he.toTime(l),a[r]=he.mapSubToFullModel(c),n.updateSubArray(a,!0)}},n.toastId_subBlockMoveError=null,n.handleSubBlockMoveError=function(){He.isActive(n.toastId_subBlockMoveError)||(n.toastId_subBlockMoveError=He.notify(r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",null,"\u65e0\u6548\u7684\u4f4d\u7f6e\uff0c\u677e\u5f00\u9f20\u6807\u4ee5\u4fee\u590d")),"bottom_left","warning",{hideProgressBar:!0,autoClose:1e3,canClose:!0},"flip"))},n.handleSubBlockResize=function(e,t,a){var r=Object(b.a)(n.state.subArray),o=r.indexOf(e),i=r[o],l=Object(h.a)({},i),c=null,s=0;if("start"===a){if(null===(c=Number(Number(i.start+t).toFixed(3)))||c<0)return;l.startTime=he.toTime(c)}else{if((s=Number(Number(i.end+t).toFixed(3)))<=0||s<=i.start)return;l.endTime=he.toTime(s)}r[o]=he.mapSubToFullModel(l),n.updateSubArray(r,!0)},n.handleSubBlockClick=function(e){var t=Object(b.a)(n.state.subArray).indexOf(e);n.setState({scrollIndex:t})},n.handleDurationChange=function(e){n.setState({duration:e})},n.handleAllSubTranslate=function(){var e=Object(y.a)(v.a.mark((function e(t,a){var r,o,i,l,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getSubArray();case 2:return r=e.sent,o=he.createSubTextArr(r),i=lt.createTranslateTextFromStringArr(o),He.notify("\u7ffb\u8bd1\u8bf7\u6c42\u6b63\u51c6\u5907\u53d1\u9001\uff0c\u7531\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u4f4d\u4e8e\u7f8e\u56fd\uff0c\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...(\u7ffb\u8bd1\u529f\u80fd\u5185\u7f6e\u95f4\u9694\u4e3a 2\u79d2\uff0c\u8d85\u65f6\u4e3a1\u5206\u949f","top_center"),l=[],e.prev=7,e.next=10,lt.translateByLangKey(t,a,i);case 10:l=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(7),console.log(e.t0),He.notify("\u7ffb\u8bd1\u5931\u8d25,".concat(e.t0.message),"top_center","warning"),e.abrupt("return");case 18:if(console.log("\u5f97\u5230\u7684\u7ffb\u8bd1\u6587\u672c\u6570\u7ec4\uff1a",l),l&&l!==[]){e.next=21;break}return e.abrupt("return",He.notify("\u7ffb\u8bd1\u7ed3\u679c\u4e3a\u7a7a","top_center","warning"));case 21:if(l===[]||l.length===r.length){e.next=23;break}return e.abrupt("return",He.notify("\u672a\u5e94\u7528\u7ffb\u8bd1\u7ed3\u679c\uff0c\u7ffb\u8bd1\u524d\u8bf7\u4e0d\u8981\u5728\u5b57\u5e55\u91cc\u51fa\u73b0\u6362\u884c\uff0c\u4e5f\u53ef\u80fd\u662f\u539f\u6587\u672c\u65e0\u9700\u7ffb\u8bd1","top_center","warning"));case 23:c=r.map((function(e,t){return Object(h.a)({},e,{content:l[t]})})),n.storageSubs(r,!0),n.updateSubArray(c,!0),He.notify("\u7ffb\u8bd1\u5b8c\u6210","top_center");case 27:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleAllSubTranslateDebounce=S.a.debounce(n.handleAllSubTranslate,2e3,{leading:!0,trailing:!1}),n.handleSubArrayBackupReset=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getSubArray(!0);case 2:if(0!==(t=e.sent).length){e.next=6;break}return He.notify("\u65e0\u5907\u4efd","top_center"),e.abrupt("return");case 6:n.updateSubArray(t,!1),He.notify("\u5df2\u56de\u9000\u5230\u5907\u4efd\u7684\u7248\u672c\uff0c\u5982\u679c\u60f3\u5c06\u5b83\u4fdd\u5b58\u4e3a\u6b63\u5f0f\u7248\u672c\uff0c\u8bf7\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\u6216\u5220\u9664\u3002\u5982\u679c\u4e0d\u60f3\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u3002","top_center");case 8:case"end":return e.stop()}}),e)}))),n.handleVideoControlActions=function(e){var t=n.state.player;if(t&&t.video)if(e&&"number"===typeof e){var a=n.state.currentTime,r=Math.round(10*(a+e))/10;n.playerSeekTo(r)}else{if(!t.video.duration)return;t.video.paused?t.play():t.pause()}},n.createEditorState=function(){var e=n.state,t=e.subArray,a=e.currentTime,r=Object(b.a)(t).map((function(e){return Object(h.a)({},e,{startTime:e.startTime,endTime:e.endTime,length:e.length})}));return new We(r,a)},n.editorStateRollBack=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=ze.pop,r=ze.unPop;try{e=t?a():r()}catch(o){console.error(o)}"undefined"!==typeof e&&(n.WillMemorize=!1,n.updateSubArray(e.subArray,!0),n.playerSeekTo(e.currentTime),n.WillMemorize=!0)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.resizeContainer(),this.addResizeListener(),this.addKeyboardListener(),this.initSubTable(),this.subUrlWorker=he.createSubUrlWorker((function(t){e.updateSubUrl(t,!0)}))}},{key:"componentDidUpdate",value:function(e,t){if(this.WillMemorize&&t.subArray!==this.state.subArray){var n=this.createEditorState();ze.push(n);var a=ze.getHistory();console.log(a.length,a)}}},{key:"componentWillUnmount",value:function(){this.removeKeyboardListener()}},{key:"render",value:function(){var e=this.state,t=e.videoUrl,n=e.subUrl,a=e.subArray,o=e.picUrl,i=e.container,l=e.scrollIndex,c=e.player,s=e.currentTime,u=e.duration,d=e.playerPaused,p={updateOneState:this.updateOneState,updateSubArray:this.updateSubArray,updateSubUrl:this.updateSubUrl,storageSubs:this.storageSubs,cleanStorageSubs:this.cleanStorageSubs,onDownload:this.handleSubDownload,onClean:this.handleSubClean,onRemove:this.handleSubRemove,onClick:this.handleSubClick,onCommit:this.handleSubCommit,onInsert:this.handleSubInsert,onSwitch:this.handleVideoSwitch,initPlayer:this.handlePlayerInit,onVideoCanPlay:this.handleVideoCanPlay,updateCurrentTime:this.handleCurrentTime,onVideoPlayerPausedSwitch:this.handlePlayerPaused,onVideoPlaying:this.handleVideoPlaying,onWaveClick:this.handleWaveClick,onWaveContextmenu:this.handleWaveContextmenu,onSubBlockMove:this.handleSubBlockMove,onSubBlockMoveError:this.handleSubBlockMoveError,onSubBlockResize:this.handleSubBlockResize,onSubBlockClick:this.handleSubBlockClick,onDurationChange:this.handleDurationChange,onAllSubTranslate:this.handleAllSubTranslateDebounce,onSubArrayBackupReset:this.handleSubArrayBackupReset,onVideoControlAction:this.handleVideoControlActions};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.a.createElement("title",null,B.subeditor_title),r.a.createElement("link",{rel:"icon",href:C.a})),r.a.createElement(rn,null),r.a.createElement(mt,p),r.a.createElement(on,{id:"mainContainer"},r.a.createElement(ln,null,r.a.createElement(xt,Object.assign({},p,{picUrl:o,videoUrl:t,subUrl:n,player:c})),r.a.createElement(Jt,Object.assign({duration:u,videoUrl:t,subUrl:n,playerPaused:d},p))),r.a.createElement(cn,null,r.a.createElement(Ft,Object.assign({},p,{container:i,subArray:a,scrollIndex:l})))),r.a.createElement($t,Object.assign({},p,{currentTime:s,videoUrl:t,subArray:a,duration:u})))}}]),t}(a.Component),dn=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(w.a,null,r.a.createElement("title",null,B.test_title)),r.a.createElement("video",{id:"video",controls:!0,width:"900px",src:"".concat(ct.home,"friday.mp4")},r.a.createElement("track",{default:!0,kind:"subtitles",srcLang:"en",src:"".concat(ct.home,"friday.vtt")})))},pn=(n(273),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return He.notify("hello","top_left"),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,{autoClose:3e3,closeOnClick:!1,draggable:!1,position:f.f.POSITION.TOP_LEFT,className:"toastContainerClass"}),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:ct.trackTest,component:dn}),r.a.createElement(m.a,{path:ct.subEditorPath,component:un})))}}]),t}(a.Component));function fn(){var e=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100vw;\n  .messageBox {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-image: url(",");\n    background-position: top center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    .message {\n      font-size: 2em;\n      color: #fff;\n      position: relative;\n      top: -15%;\n      white-space: pre-wrap;\n    }\n  }\n"]);return fn=function(){return e},e}var mn=E.b.div(fn(),n(97)),hn=function(){return r.a.createElement(mn,null,r.a.createElement(w.a,null,r.a.createElement("title",null,B.subeditor_title)),r.a.createElement("div",{className:"messageBox"},r.a.createElement("div",{className:"message"},"Sorry,\n\u6682\u4e0d\u652f\u6301\u79fb\u52a8\u8bbe\u5907\uff0c\u8bf7\u4f7f\u7528PC\u7aef\u6d4f\u89c8\u5668")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(275),n(276),n(134),n(277),n(278),n(279);var bn=ct.isMobile();i.a.render(bn?r.a.createElement(hn,null):r.a.createElement(l.a,null,r.a.createElement(pn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,n){e.exports=n.p+"static/media/subEditor.d0e3de75.png"}},[[154,1,2]]]);
//# sourceMappingURL=main.ad0fb6dc.chunk.js.map
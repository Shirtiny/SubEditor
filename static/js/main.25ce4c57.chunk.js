(this["webpackJsonpsub-editor"]=this["webpackJsonpsub-editor"]||[]).push([[0],{132:function(e,n,t){e.exports=t.p+"static/media/welcom.b8b80cac.vtt"},135:function(e){e.exports=JSON.parse('{"name":"sub-editor","version":"1.0.8","private":false,"homepage":"./","repository":{"type":"git","url":"https://github.com/Shirtiny/SubEditor"},"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","axios":"^0.19.2","bootstrap":"^4.4.1","duration-time-conversion":"^1.0.1","flv.js":"^1.5.0","font-awesome":"^4.7.0","immer":"^7.0.1","joi-browser":"^13.4.0","js-base64":"^2.5.2","js-md5":"^0.7.3","lodash":"^4.17.15","normalize.css":"^8.0.1","nprogress":"^0.2.0","react":"^16.13.0","react-dom":"^16.13.0","react-dplayer":"^0.3.3","react-helmet":"^6.0.0","react-i18nify":"^3.1.5","react-router-dom":"^5.1.2","react-scripts":"3.4.0","react-toastify":"^5.5.0","react-virtualized":"^9.21.2","shwave":"^1.9.2","styled-components":"^5.0.1"},"scripts":{"start":"cross-env PORT=2020 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"cross-env":"^7.0.2","gh-pages":"^2.2.0"}}')},143:function(e,n){e.exports="data:image/png;base64,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"},145:function(e,n,t){e.exports=t.p+"static/media/subeditor.928099fc.ico"},148:function(e,n,t){e.exports=t(266)},238:function(e,n,t){e.exports=t.p+"static/media/blackboard.233681a4.png"},261:function(e,n,t){},266:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(30),i=t.n(o),l=t(95),c=t(3),s=t(2),u=t(15),d=t(10),p=t(16),f=t(42),m=t(25),h=t(43),b=t(19),g=t(29),v=t(7),y=t.n(v),x=t(17),w=t(13),k=t(47),E=t.n(k),S=t(14),C=function(){function e(n,t,a){Object(c.a)(this,e),this.start=Number(n.toFixed(3)),this.end=Number(t.toFixed(3)),this.content=a,this.editing=!1}return Object(s.a)(e,[{key:"startTime",get:function(){return fe.toTime(this.start)}},{key:"endTime",get:function(){return fe.toTime(this.end)}},{key:"length",get:function(){return Number((this.end-this.start).toFixed(3))}}]),e}(),T=t(53),A=t.n(T);var N={number2Time:function(e){var n=e.toFixed(3);return A.a.d2t(n)},time2Number:function(e){return A.a.t2d(e).toFixed(3)},getTimeLength:function(e,n){return(A.a.t2d(n)-A.a.t2d(e)).toFixed(3)}},j=t(27),O="off"===j.log;var B={clog:function(){var e;O||(e=console).log.apply(e,arguments)}},I=t(37),U=t(40),R=t.n(U),P=/^\d+:[0-5][0-9]:[0-5][0-9](\.[0-9]{1,3})?$/,F={startTime:R.a.string().regex(P).required().min(8).label("\u5f00\u59cb\u65f6\u95f4"),endTime:R.a.string().regex(P).required().min(8).label("\u7ed3\u675f\u65f6\u95f4"),content:R.a.string().required().max(100).min(1).label("\u6587\u672c\u5185\u5bb9"),start:R.a.number(),end:R.a.number(),length:R.a.number().greater(0)},L="\u683c\u5f0f\u5982 00:00:29.320\u683c\u5f0f\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",z="\u683c\u5f0f\u5982 00:00:29.320\uff0c\u53ef\u4ee5\u4e0d\u5e26\u5c0f\u6570\uff0c\u6700\u5c118\u4e2a\u5b57\u7b26",D="\u9700\u8981\u57281-100\u4e2a\u5b57\u7b26\u4e4b\u95f4\uff0c\u4e0d\u80fd\u4e3a\u7a7a",M="\u5fc5\u987b\u4e3a\u6570\u5b57",V="\u5fc5\u987b\u4e3a\u6570\u5b57",W="\u4e0d\u80fd\u4e3a\u8d1f\u503c\u62160\uff0c\u5f00\u59cb\u65f6\u95f4\u8981\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4",H={startTime:"\u5f00\u59cb\u65f6\u95f4",endTime:"\u7ed3\u675f\u65f6\u95f4",content:"\u5b57\u5e55\u6587\u672c\u5185\u5bb9",start:"\u8d77\u59cb\u79d2\u6570",end:"\u7ed3\u675f\u79d2\u6570",length:"\u65f6\u957f"};var K={abortEarly:!1,allowUnknown:!0,skipFunctions:!0};function G(e,n,t,a){var r=Object(I.a)({},e,n),o=Object(b.a)({},K,{abortEarly:!0},a);return!!R.a.validate(r,t,o).error}var Y={schema:F,getEditingSubSchema:function(){return{startTime:F.startTime,endTime:F.endTime,content:F.content,start:F.start,end:F.end,length:F.length}},getEditingErrorSchema:function(){return{startTime:L,endTime:z,content:D,start:M,end:V,length:W}},validate:function(e,n,t){var a=Object(b.a)({},K,{},t),r=R.a.validate(e,n,a).error;if(!r)return!1;B.clog("editingSub\u6821\u9a8c\u7ed3\u679c\uff0c\u51fa\u73b0\u7684\u9519\u8bef\uff1a",r);var o=[];return r.details.map((function(e){return o.push(e.path[0])})),E.a.uniq(o)},validateProperty:G,errors2messages:function(e){if(!e)return[];var n=Object.keys(e).map((function(n){return H[n]+": "+e[n]}));return 0===n.length&&n.push(" "),n},validateTime:function(e){return G("startTime",e,{startTime:F.startTime})}},q=j.sub_storage_key||"DefaultSubs",Q=j.sub_storage_backup_key||"DefaultSubsBackup";function J(e){return Number(N.time2Number(e))}function X(e,n){return Number(N.getTimeLength(e,n))}function Z(e,n,t){var a=new FileReader;a.readAsText(t),a.onerror=function(e){n(e)},a.onload=function(){e(a.result)}}function _(){return(_=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,new Promise((function(e,t){return Z(e,t,n)}));case 4:t=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),B.clog("\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0),e.t0.message="\u5b57\u5e55\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff1b",e.t0;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function $(e,n,t){var a=document.createElement("video"),r=document.createElement("track");a.appendChild(r),r.default=!0,r.kind="metadata",r.src=t,r.onerror=function(e){n(e)},r.onload=function(){e(r.track.cues)}}function ee(){return(ee=Object(x.a)(y.a.mark((function e(n){var t,a,r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,new Promise((function(e,t){return $(e,t,n)}));case 4:t=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),B.clog("\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25\uff1a",e.t0),e.t0.message="\u5b57\u5e55\u88c5\u8f7d\u5931\u8d25",e.t0;case 12:return a=Array.from(t||{}),B.clog("\u5f97\u5230VTTCues\u6570\u7ec4\uff1a",a),r=a.map((function(e){return new C(e.startTime,e.endTime,e.text)})),o=r.map((function(e){return te(e)})),B.clog("\u5f97\u5230\u5b57\u5e55\u6570\u7ec4\uff1a",o),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ne(e){var n=new Blob([e],{type:"text/vtt"});return B.clog("vtt\u5b57\u5e55Blob\u5bf9\u8c61",n),URL.createObjectURL(n)}function te(e){var n=ie(e.startTime),t=ie(e.endTime);return{start:J(n),startTime:n,end:J(t),endTime:t,length:X(n,t),content:e.content}}function ae(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var r=t.map((function(e){return te(e)})),o=JSON.stringify(r);a?localStorage.setItem(Q,o):localStorage.setItem(q,o),e(o)}catch(i){B.clog("subs\u5b58\u5165local\u65f6\u51fa\u9519",i),n(i)}}function re(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t?Q:q,r=localStorage.getItem(a);try{var o=JSON.parse(r);e(o||[])}catch(i){B.clog("\u8bfb\u53d6local\u540e\uff0cJson\u89e3\u6790\u51fa\u9519",i),n(i)}}function oe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,t){return re(n,t,e)}))}function ie(e){var n=e.match(/^(\d+:[0-5][0-9]:[0-5][0-9])(\.[0-9]{1,3})?$/);if(n&&n[2]){for(var t=n[2];t.length<4;)t+="0";return n[1]+t}return n&&n[1]?n[1]:"00:00:00"}function le(e){var n="WEBVTT\n\n"+e.map((function(e,n){return"".concat(n+1,"\n").concat(e.startTime," --\x3e ").concat(e.endTime,"\n").concat(e.content,"\n")})).join("\n");return B.clog(n),n}function ce(e,n){var t=document.createElement("a");t.style.display="none",t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function se(e){return e&&0!==e.length?ne(le(e)):""}function ue(){return(ue=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:if((n=e.sent)&&0!==n.length){e.next=6;break}return e.abrupt("return",!1);case 6:return ce(se(n),"\u5b57\u5e55.vtt"),e.abrupt("return",!0);case 11:throw e.prev=11,e.t0=e.catch(0),B.clog("\u4e0b\u8f7d\u5b57\u5e55\u51fa\u9519\uff1a",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function de(e){return e&&0!==e.length?e.map((function(e){return e.content})):[]}function pe(){return(pe=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return n=e.sent,e.abrupt("return",de(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe={readSubFileAsText:function(e){return _.apply(this,arguments)},createSubArray:function(e){return ee.apply(this,arguments)},createVttSubBlobUrl:ne,mapSubToFullModel:te,saveSubArray:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(t,a){return ae(t,a,e,n)}))},cleanSubArray:function(){localStorage.removeItem(q)},getSubArray:oe,getSubLength:function(e){var n={startTime:Y.schema.startTime,endTime:Y.schema.endTime};return Y.validate(e,n,{abortEarly:!0})?e.length:X(ie(e.startTime),ie(e.endTime))},mapSubArray2Text:le,createSubArrayUrl:se,downloadFromUrl:ce,downloadSubFile:function(){return ue.apply(this,arguments)},getDefaultSub:function(e,n){B.clog("\u63d2\u5165\u53c2\u6570\uff1a",e,n,typeof(e+n));var t=0,a=.001;if("number"===typeof(e+n))return t=Number(e.toFixed(3)),a=Number(n.toFixed(3)),new C(t,a,"\u9ed8\u8ba4\u6587\u672c");var r=Y.validateTime(e),o=Y.validateTime(n);return r||o||(t=J(ie(e)),a=J(ie(n))),new C(t,a,"\u9ed8\u8ba4\u6587\u672c")},toTime:function(e){return N.number2Time(e)},toNumber:J,getTimeLength:X,createSubUrlWorker:function(e){var n=new Blob(['this.addEventListener(\'message\', function (e) {\n    //\u8f6c\u4e3a\u6587\u672c\n    // subArray\u7684\u683c\u5f0f\u5fc5\u987b\u7b26\u5408\u5b58\u50a8\u89c4\u8303\n    const subArray = e.data;\n    const vttCueStrArray = subArray.map(\n    (sub, index) =>\n      `${index + 1}\n${sub.startTime} --\x3e ${sub.endTime}\n${sub.content}\n`\n  );\n    const vttText = "WEBVTT\\n\\n" + vttCueStrArray.join("\\n");\n    const vttBlob = new Blob([vttText], {\n      type: "text/vtt"\n    });\n    const subUrl = URL.createObjectURL(vttBlob);\n    this.postMessage(subUrl);\n  }, false);']),t=new Worker(URL.createObjectURL(n));return t.onmessage=function(n){var t=n.data;e(t)},t},sortSubArray:function(e){var n=Object(g.a)(e);return n.sort((function(e,n){return e.start-n.start})),n},createSubTextArr:de,createSubTextArrFromStorage:function(){return pe.apply(this,arguments)}},me=t(94),he=t.n(me),be=t(132),ge=t.n(be);function ve(e,n,t,a){var r=new FileReader;r[a](t),r.onerror=function(e){n(e)},r.onload=function(){e(r.result)}}function ye(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.prev=1,e.next=4,new Promise((function(e,t){return ve(e,t,n,"readAsArrayBuffer")}));case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 10:return e.abrupt("return",new Uint8Array(t));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function we(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(n);case 2:return t=e.sent,console.log("fetched blob:",t),e.next=6,ye(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,n,t){var a=new AbortController,r=null;fetch(t,{signal:a.signal}).then((function(t){if(t.body&&"function"===typeof t.body.getReader){r=t.body.getReader();var o=new Uint8Array;r.read().then((function n(t){var i=t.done,l=t.value;return i?(a.abort(),r.cancel(),a=null,r=null,void e(o)):(o=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0].constructor;return n.reduce((function(e,n){var t=new a((0|e.byteLength)+(0|n.byteLength));return t.set(e,0),t.set(n,0|e.byteLength),t}),new a)}(o,l),r.read().then(n))}))}else n("res.body\u4e0d\u662f\u6d41")}))}function Ce(){return(Ce=Object(x.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Uint8Array,e.prev=1,e.next=4,new Promise((function(e,t){return Se(e,t,n)}));case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Te(){return(Te=Object(x.a)(y.a.mark((function e(n){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(n);case 2:return t=e.sent,console.log("fetched blob:",t),a="",e.prev=5,e.next=8,new Promise((function(e,n){return ve(e,n,t,"readAsText")}));case 8:a=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log("\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25",e.t0);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}var Ae={readFileData:ye,fetchFileData:function(e){return Ee.apply(this,arguments)},fetchFileAsText:function(e){return Te.apply(this,arguments)},fetchFileU8Data:function(e){return Ce.apply(this,arguments)},downloadFromUrl:function(e,n){var t=document.createElement("a");t.style.display="none",t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}};var Ne=new Worker("/ffmpeg-worker-mp4.js"),je="";function Oe(e){e.onmessage=function(e){var n=e.data;switch(n.type){case"ready":console.log("shFFmpegWorker ready");break;case"stdout":case"stderr":console.log(n.data);break;case"done":console.log("shFFmpegWorker works done",n.data);var t=n.data.MEMFS[0],a=t.name,r=t.data;URL.revokeObjectURL(je),je=URL.createObjectURL(new File([r.buffer],a)),Ae.downloadFromUrl(je,a);break;default:return}}}function Be(){return(Be=Object(x.a)(y.a.mark((function e(n,t,a,r){var o,i,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&a){e.next=2;break}throw new Error("\u89c6\u9891\u6216\u5b57\u5e55\u5730\u5740\u4e3a\u7a7a");case 2:if(!/\.flv$/.test(t)){e.next=4;break}throw new Error("\u6682\u4e0d\u652f\u6301flv\u683c\u5f0f\u7684\u7f16\u7801");case 4:return e.next=6,Ae.fetchFileData(n);case 6:return o=e.sent,e.next=9,Ae.fetchFileData(a);case 9:return i=e.sent,e.next=12,Ae.fetchFileData("/default.ttf");case 12:l=e.sent,Ne.postMessage({type:"run",TOTAL_MEMORY:1073741824,arguments:["-hide_banner","-y","-i",t,"-vf","subtitles=".concat(r),"output-".concat(t)],MEMFS:[{name:t,data:o},{name:r,data:i},{name:"default.ttf",data:l}]});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Oe(Ne);var Ie={createVideoType:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!==typeof e)return"";if(n){var t=e,a=t.lastIndexOf("."),r=t.substring(a+1);return"flv"===r?"flvCustom":r}var o=/^video\/(mp4|x-(flv))+$/,i=e.match(o);B.clog("\u5339\u914d\u89c6\u9891\u7c7b\u578b",i);var l=i&&i[2]?i[2]+"Custom":i?i[1]:"";return B.clog("\u5339\u914d\u548c\u62fc\u63a5\u7684\u7ed3\u679c",l),l},getDefaultPicUrl:function(){return he.a},getDefaultSubUrl:function(){return ge.a},encodeVideoWithSub:function(e,n,t,a){return Be.apply(this,arguments)},stopFfmpegWorker:function(){Ne.terminate(),Oe(Ne=new Worker("/ffmpeg-worker-mp4.js"))}},Ue=[],Re=-1;var Pe={push:function(e){return++Re<Ue.length?(Ue[Re]=e,Ue.length=Re+1,Ue.length):Ue.push(e)},pop:function(){if(Re>=1)return Ue[--Re];throw new Error("\u5df2\u5230\u6808\u5e95")},unPop:function(){if(Re+1<Ue.length)return Re++,Ue[Re];throw new Error("\u5df2\u5230\u6808\u9876")},getTop:function(){return Re},getHistory:function(){return Ue}},Fe=function(e){var n=e.head,t=e.small,a=e.dataArray,o=e.type;return r.a.createElement("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{border:"none",boxShadow:"none"}},r.a.createElement("div",{className:"toast-header"},r.a.createElement("svg",{className:"rounded mr-2",width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img"},r.a.createElement("rect",{width:"100%",height:"100%",fill:{primary:"#007aff",warning:"#ff8300"}[o]})),r.a.createElement("strong",{className:"mr-auto"},n),r.a.createElement("small",null,t||"\u63d0\u793a")),r.a.createElement("div",{className:"toast-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e},e)})))))},Le={slide:m.c,zoom:m.e,flip:m.b,bounce:m.a};function ze(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top_left",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bounce",o=(n+"").toUpperCase(),i=(t+"").toUpperCase(),l=Object(b.a)({position:m.f.POSITION[o],type:m.f.TYPE[i],transition:Le[r]},a);return Object(m.f)(e,l)}var De={notify:ze,bootstrapToast:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top_left",a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zoom";return ze(r.a.createElement(Fe,{head:"\u8bf7\u68c0\u67e5\u8f93\u5165\u683c\u5f0f",dataArray:e,type:n}),t,"default",a,o)},isActive:function(e){return m.f.isActive(e)},done:function(e){return m.f.done(e)}},Me=t(96),Ve=t.n(Me);var We={get:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(b.a)({params:n},t);return Ve.a.get(e,a)},post:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ve.a.post(e,n,t)}},He=t(133),Ke=t.n(He),Ge=t(134);var Ye=new URL("https://fanyi-api.baidu.com/api/trans/vip/translate"),qe=Ye.searchParams;function Qe(e,n,t){console.log("\u767e\u5ea6\u7ffb\u8bd1");var a=(new Date).getTime(),r=Ke()("".concat("20180619000178085").concat(t).concat(a).concat("ZEg5rb06NeW4wNjslD6F"));qe.set("salt",a),qe.set("sign",r),qe.set("from",e),qe.set("to",n),qe.set("q",t);var o=Ge.Base64.btoa(Ye.href);return We.get("https://shproxy.herokuapp.com/shProxyApi/v1/get?url=".concat(o)).then((function(e){if(console.log("\u767e\u5ea6\u7ffb\u8bd1\u8bf7\u6c42\u7ed3\u679c\uff1a",e),!e.data||!e.data.trans_result)throw new Error("\u7ffb\u8bd1\u51fa\u9519");return e.data.trans_result&&e.data.trans_result.map((function(e){return e.dst}))||[]})).catch((function(e){throw new Error(e)}))}qe.append("appid","20180619000178085");var Je=E.a.debounce((function(e,n,t){return Qe(e,n,t)}),2e3,{leading:!0,trailing:!1}),Xe={auto:"\u81ea\u52a8\u68c0\u6d4b",zh:"\u4e2d\u6587",en:"\u82f1\u8bed",cht:"\u7e41\u4f53\u4e2d\u6587",yue:"\u7ca4\u8bed",wyw:"\u6587\u8a00\u6587",jp:"\u65e5\u8bed",kor:"\u97e9\u8bed",fra:"\u6cd5\u8bed",spa:"\u897f\u73ed\u7259\u8bed",th:"\u6cf0\u8bed",ara:"\u963f\u62c9\u4f2f\u8bed",ru:"\u4fc4\u8bed",pt:"\u8461\u8404\u7259\u8bed",de:"\u5fb7\u8bed",it:"\u610f\u5927\u5229\u8bed",el:"\u5e0c\u814a\u8bed",nl:"\u8377\u5170\u8bed",pl:"\u6ce2\u5170\u8bed",bul:"\u4fdd\u52a0\u5229\u4e9a\u8bed",est:"\u7231\u6c99\u5c3c\u4e9a\u8bed",dan:"\u4e39\u9ea6\u8bed",fin:"\u82ac\u5170\u8bed",cs:"\u6377\u514b\u8bed",rom:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",slo:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",swe:"\u745e\u5178\u8bed",hu:"\u5308\u7259\u5229\u8bed",vie:"\u8d8a\u5357\u8bed"};var Ze=j.translate_arr_separator;var _e={googleTranslate:function(e,n){var t=new URL("https://translate.googleapis.com/translate_a/single");t.searchParams.append("client","gtx"),t.searchParams.append("sl","auto"),t.searchParams.append("dt","t"),t.searchParams.append("tl",e),t.searchParams.append("q",n),We.get("https://translate.googleapis.com/translate_a/single",t.searchParams).then((function(e){console.log("\u8c37\u6b4c\u7ffb\u8bd1",e)}))},baiduTranslate:Qe,getBaiduTranslateLangKey:function(e){var n=E.a.findKey(Xe,(function(n){return n===e}));console.log(n)},getBaiduTranslateLanguages:function(){return Xe},translateByLangKey:function(e,n,t){return Xe[e]&&Xe[n]?Je(e,n,t):""},translateDebounce:Je,createTranslateTextFromStringArr:function(e){return e&&0!==e.length?e.join(Ze):""}},$e=t(48),en=t.n($e);en.a.configure({minimum:.1});var nn={start:function(e){return e?en.a.start().set(e):en.a.start()},set:function(e){return e&&en.a.set(e)},inc:function(e){return e&&en.a.inc(e)},done:function(){en.a.done()}};var tn={home:"".concat(window.location.protocol,"//").concat(window.location.host,"/"),subEditorPath:"/",trackTest:"/test",isMobile:function(){return console.log("\u7528\u6237agent\uff1a",window.navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}},an=t(135);function rn(){var e=Object(w.a)(["\n  text-decoration: none;\n  font-size: 22px;\n  font-style: italic;\n  font-weight: 400;\n  color: #66cccc;\n\n  :hover {\n    text-decoration: none;\n    color: #66cccc;\n  }\n\n  .version {\n    font-size: 12px;\n    font-weight: 600;\n    margin-left: 20px;\n    opacity: 0.4;\n    font-style: italic;\n    color: #262a3e;\n  }\n"]);return rn=function(){return e},e}function on(){var e=Object(w.a)(["\n  //\u5bfc\u822a\u680f\u56fa\u5b9a50px\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: hsla(0, 0%, 100%, 0.8);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\n\n  .band {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    padding-left: 30px;\n    flex-grow: 6;\n  }\n\n  .body {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-grow: 1;\n\n    .buttons {\n      height: 100%;\n      display: flex;\n      align-items: center;\n    }\n\n    .links {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 40px;\n      i {\n        margin-right: 5px;\n      }\n      a {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 18px;\n        font-weight: 600;\n        padding: 0 10px 0 10px;\n\n        &:hover {\n          color: #66cccc;\n          //   text-decoration: underline;\n        }\n      }\n    }\n\n    .users {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n\n      margin-right: 20px;\n      .avatar {\n        border-radius: 50%;\n        height: 40px;\n        border: 1px solid #ddd;\n        padding: 4px;\n        display: block;\n      }\n      span {\n        color: #4c7b7b;\n        text-decoration: none;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n      }\n      span:hover {\n        color: #66cccc;\n      }\n    }\n  }\n"]);return on=function(){return e},e}var ln=S.b.header(on()),cn=S.b.a(rn()),sn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={user:{}},t.handleLogout=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.location.reload();case 1:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(ln,null,r.a.createElement("div",{className:"band"},r.a.createElement(cn,{href:tn.subEditorPath,title:"Copyright \xa9 2020 SH"},"SubEditor",r.a.createElement("span",{className:"version"},"version ",an.version))),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"https://github.com/Shirtiny/SubEditor",title:"\u524d\u5f80Github"},r.a.createElement("i",{className:"fa fa-github","aria-hidden":"true"}),"Github")),r.a.createElement("div",{className:"users"},r.a.createElement("a",{href:"/",title:this.state.user.userName||"\u672a\u767b\u5f55",style:{marginRight:"10px"}},r.a.createElement("img",{className:"avatar",alt:"avatar",src:this.state.user.avatarImage||"".concat(tn.home,"subEditorLogo.png")})),this.state.user.userName&&r.a.createElement("span",{onClick:this.handleLogout,title:"\u9000\u51fa\u767b\u5f55"},"\u6ce8\u9500"))))}}]),n}(a.PureComponent),un=t(138),dn=t.n(un),pn=t(98);function fn(){var e=Object(w.a)(["\n  display: flex;\n  max-height: 55vh;\n  justify-content: center;\n  align-items: center;\n  padding: 15px;\n  // border-bottom: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n\n  .dplayer {\n    max-width: 50vw;\n    max-height: 50vh;\n  }\n\n  .dplayer_disable {\n    pointer-events: none;\n  }\n\n  .playerBorder {\n    border: 4px solid #529393;\n    border-radius: 0.5em;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n  }\n\n  .hiddenSubs {\n    ::cue {\n      opacity: 0;\n    }\n  }\n"]);return fn=function(){return e},e}var mn=S.b.div(fn()),hn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).load=function(e){(0,t.props.initPlayer)(e)},t.error=function(){document.getElementById("player").classList.add("dplayer_DefaultSize","dplayer_disable")},t.canPlay=function(){var e=t.props,n=e.player,a=e.onVideoCanPlay;n.notice("\u221a",1500,.8),a(),document.getElementById("player").classList.remove("dplayer_disable")},t.pause=function(){console.log("\u64ad\u653e\u5668\u6682\u505c"),(0,t.props.onVideoPlayerPausedSwitch)(!0)},t.play=function(){console.log("\u64ad\u653e\u5668\u64ad\u653e"),(0,t.props.onVideoPlayerPausedSwitch)(!1)},t.playing=function(){(0,t.props.onVideoPlaying)()},t.fullscreen=function(){var e=document.getElementById("player");e.classList.remove("playerBorder"),e.style.resize=""},t.fullscreenCancel=function(){var e=document.getElementById("player");e.classList.add("playerBorder"),e.style.resize="both"},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"shouldComponentUpdate",value:function(e,n){return!1}},{key:"render",value:function(){var e=this.props,n=e.videoUrl,t=e.picUrl,a=e.subUrl;return r.a.createElement(mn,{id:"playerBox"},r.a.createElement(dn.a,{id:"player",className:"playerBorder dplayer_disable ",style:{resize:"both"},options:{video:{url:n,pic:t,customType:{flvCustom:function(e,n){if(B.clog("\u652f\u6301flv"),pn.a.isSupported()){var t=pn.a.createPlayer({type:"flv",url:e.src,hasAudio:!0});t.attachMediaElement(e),t.load()}}}},subtitle:{url:a,type:"webvtt",fontSize:"25px",bottom:"3%",color:"rgb(37, 211, 211)"},contextmenu:[{text:"SubEditor"},{text:"\u4f7f\u5185\u5bb9\u7684\u9ad8\u5ea6\u9002\u5e94\u4e8e\u5bbd\u5ea6",click:function(e){document.getElementById("player").style.height=""}},{text:"\u9ed8\u8ba4\u5bbd\u5ea6\u548c\u9ad8\u5ea6",click:function(e){var n=document.getElementById("player");n.style.height="",n.style.width="90%"}},{text:"chrome\u5b57\u5e55\u9690\u85cf/\u663e\u793a",click:function(e){var n=e.video;n.className.indexOf("hiddenSubs")>0?n.classList.remove("hiddenSubs"):n.classList.add("hiddenSubs")}}],theme:"#ccc",loop:!0},onLoad:this.load,onError:this.error,onCanplay:this.canPlay,onPause:this.pause,onPlay:this.play,onPlaying:this.playing,onFullscreen:this.fullscreen,onFullscreenCancel:this.fullscreenCancel}))}}]),n}(a.Component),bn=t(147);function gn(){var e=Object(w.a)(["\n  font-size: 14px;\n  color: #495057;\n  background-color: #fff;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  background-clip: padding-box;\n\n  height: calc(1.5em + 0.5rem + 2px);\n  padding: 0.25rem 0.25rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem;\n\n  &.input_success {\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\n    }\n  }\n  &.input_error {\n    border-color: #dc3545;\n    :focus {\n      border-color: #28a745;\n      box-shadow: 0 0 0 0.2rem rgba(232, 43, 43, 0.3);\n    }\n  }\n"]);return gn=function(){return e},e}var vn=S.b.input(gn()),yn=function(e){var n=e.className,t=e.type,a=e.name,o=e.value,i=e.onChange,l=e.disabled,c=e.style,s=e.errors;return r.a.createElement(vn,{disabled:l,className:[].concat(Object(g.a)(n),[s[a]?"input_error":"input_success"]),type:t,value:o,onChange:function(e){return i(a,e.currentTarget.value)},style:Object(b.a)({},c),onClick:function(e){e.stopPropagation()}})};function xn(){var e=Object(w.a)(["\n  .rowClasses {\n    background-color: #f2f2f2;\n    // border-bottom: 1px solid rgb(36, 41, 45);\n    min-width: 650px;\n    transition: all 0.15s ease;\n\n    //\u53d6\u6d88\u6d4f\u89c8\u5668\u7684\u53cc\u51fb\u9009\u4e2d\n    -moz-user-select: none; /*\u706b\u72d0*/\n    -webkit-user-select: none; /*webkit\u6d4f\u89c8\u5668*/\n    -ms-user-select: none; /*IE10*/\n    -khtml-user-select: none; /*\u65e9\u671f\u6d4f\u89c8\u5668*/\n    user-select: none;\n\n    &.odd {\n      background-color: #fff;\n    }\n\n    &.highlight {\n      background-color: #2196f3;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    &.illegal {\n      background-color: #c75123;\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    }\n\n    .rowT {\n      padding: 10px 5px;\n      text-align: center;\n    }\n\n    &: hover {\n      background-color: #529393;\n      color: #fff;\n      //\u5b57\u7a0d\u5fae\u5927\u4e9b\n      font-size: 14px;\n    }\n\n    &.onEditing {\n      background-color: #66cccc;\n\n      //\u7f16\u8f91\u65f6\u8fd4\u56de\u9690\u85cf \u975e\u7f16\u8f91\u72b6\u6001\u8fd4\u56de\u663e\u793a\n      .display_onEditing {\n        display: block !important;\n      }\n      .hidden_onEditing {\n        display: none !important;\n      }\n    }\n\n    .editing_default_hidden {\n      //\u9ed8\u8ba4\u9690\u85cf\n      display: none;\n      width: 100%;\n      height: 100%;\n    }\n\n    .operation {\n      display: flex;\n      justify-content: center;\n\n      i {\n        width: 25px;\n        cursor: pointer;\n        font-size: 16px;\n        &: hover {\n          //\u56fe\u6807\u7c97\u4e9b\n          font-weight: 600;\n          // color: #ccc;\n          color: #82a8b7;\n          &.deleteIcon {\n            color: #f5f239;\n          }\n        }\n      }\n    }\n  }\n\n  .lineBox {\n    display: none;\n    height: 0;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    bottom: 0px;\n    border-bottom: 0px dashed #529393;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    transition: color, border-color 0.3s ease-in-out;\n    &:hover {\n      display: block;\n      bottom: -5px;\n      border-bottom: 10px solid #02c0ff;\n      .insertBtn {\n        color: #02c0ff !important;\n        bottom: 10px;\n      }\n    }\n  }\n\n  .insertBtn {\n    position: absolute;\n    right: 4px;\n    width: 20px;\n    height: 20px;\n    bottom: 15px;\n  }\n\n  //\u5f53scroll\u6eda\u5230\u5f53\u524drow row\u7684\u52a8\u753b\n  .scrollToRowAnimation {\n    animation: scrollToRowAnimation 3s;\n    //\u64ad\u653e\u6b21\u6570\u65e0\u9650\u5236\n    // animation-iteration-count: infinite;\n  }\n\n  .scrollIndexBackColor {\n    transition: background-color 0.5s ease-in;\n    background-color: #04e8e8 !important;\n    &:hover {\n      color: black;\n    }\n  }\n"]);return xn=function(){return e},e}var wn=S.b.div(xn()),kn=0,En=function(e){var n=e.index,t=e.style,a=e.className,o=e.rowData,i=e.onRowRemove,l=e.onRowEdit,c=e.onRowClick,s=e.onRowCommit,u=e.onRowCancel,d=e.onRowInsert,p=e.editingIndex,f=e.editingSub,m=e.errors,h=e.onInputValueChange,b=e.displayIndex,g=e.scrollIndex,v=["editing_default_hidden","display_onEditing"].join(" ");return r.a.createElement(wn,null,r.a.createElement("div",{key:n,style:t,className:[a,"rowClasses",n%2?"odd":"",p===n?"onEditing":"",g===n?"scrollIndexBackColor":""].join(" "),onClick:function(){kn+=1,setTimeout((function(){1===kn?c(o):2===kn&&l(o),kn=0}),200)},onKeyUp:function(e){switch(e.preventDefault(),e.stopPropagation(),e.keyCode){case 13:s(o);break;case 27:u();break;default:return}}},r.a.createElement("div",{className:"rowT operation",style:{width:90}},r.a.createElement("i",{onClick:function(e){e.stopPropagation(),l(o)},className:"fa fa-pencil ".concat("hidden_onEditing"),title:"\u7f16\u8f91"}),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),s(o)},className:"fa fa-check-circle-o ".concat(v),title:"\u4fdd\u5b58"}),r.a.createElement("i",{className:"fa fa-times deleteIcon",onClick:function(e){e.stopPropagation(),i(o,n)},title:"\u5220\u9664"})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.startTime),r.a.createElement(yn,{className:[v],type:"text",name:"startTime",value:f.startTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.endTime),r.a.createElement(yn,{className:[v],type:"text",name:"endTime",value:f.endTime,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.length),r.a.createElement("span",{className:"".concat(v)},f.length)),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"".concat("hidden_onEditing")},o.content),r.a.createElement(yn,{className:[v],type:"text",name:"content",value:f.content,onChange:h,errors:m})),r.a.createElement("div",{className:"rowT operation",style:{width:50}},r.a.createElement("span",{style:{display:b?"block":"none"},className:"".concat("hidden_onEditing")},n),r.a.createElement("i",{onClick:function(e){e.stopPropagation(),u(o)},className:"fa fa-reply ".concat(v),title:"\u53d6\u6d88\u7f16\u8f91"}),r.a.createElement("div",{className:"".concat("hidden_onEditing"," lineBox "),style:{display:b?"none":"block"}},r.a.createElement("i",{className:"fa fa-plus-square  insertBtn",title:"\u63d2\u5165\u5b57\u5e55",onClick:function(e){e.stopPropagation(),d(o)}})))))};function Sn(){var e=Object(w.a)(["\n  background: #c0d9d9;\n  display: flex;\n  min-width: 650px;\n\n  .rowT {\n    padding: 10px 5px;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    text-align: center;\n    text-transform: none;\n  }\n\n  .buttonLike {\n    position: relative;\n    background: #ffffff;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 30px;\n    // margin-right: 10px;\n    padding: 9px 16px;\n    border-style: none;\n    border-radius: 10px;\n    overflow: hidden;\n    transition: all 200ms linear 0s;\n\n    i {\n      margin-right: 5px;\n    }\n  }\n\n  .switchButton {\n    cursor: pointer;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n      span {\n        display: block;\n      }\n    }\n  }\n\n  .stayButton {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    cursor: pointer;\n    span {\n      position: relative;\n      top: 4px;\n    }\n    transition: all 0.3s ease;\n    &:hover {\n      color: #fff;\n      background-color: #43d7d7;\n    }\n  }\n"]);return Sn=function(){return e},e}var Cn=S.b.div(Sn()),Tn=function(e){var n=e.displayIndex,t=e.onDisplayIndexSwitch,a=e.subArrayLenIsZero,o=e.onInsert;return r.a.createElement(Cn,null,r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("div",{className:"buttonLike"},r.a.createElement("span",{style:{display:a?"none":"block"}},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"}),"\u7f16\u8f91"),r.a.createElement("div",{onClick:function(){return o()},className:"stayButton",style:{display:a?"block":"none"}},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u5efa")))),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-backward","aria-hidden":"true"}),"\u5f00\u59cb")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-step-forward","aria-hidden":"true"}),"\u7ed3\u675f")),r.a.createElement("div",{className:"rowT",style:{width:100}},r.a.createElement("span",{className:"buttonLike"},r.a.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"}),"\u65f6\u957f")),r.a.createElement("div",{className:"rowT",style:{flex:1}},r.a.createElement("span",{className:"buttonLike "},r.a.createElement("i",{className:"fa fa-text-width","aria-hidden":"true"}),"\u5185\u5bb9")),r.a.createElement("div",{className:"rowT",style:{width:50}},r.a.createElement("div",{className:"buttonLike switchButton",onClick:function(){return t(!n)}},r.a.createElement("span",{style:{display:n?"block":"none"},className:" fa fa-sort-amount-asc",title:"\u5207\u6362\u5230\u529f\u80fd"}),r.a.createElement("span",{style:{display:n?"none":"block"},className:" fa fa-sliders",title:"\u5207\u6362\u5230\u5e8f\u53f7"}))))},An=t(143),Nn=t.n(An);function jn(){var e=Object(w.a)(["\n  height: 100%;\n  .ReactVirtualized__Table {\n    font-size: 12px;\n    background: #e3eeee;\n    // background: #c0d9d9; root\u80cc\u666f\u8272\n\n    .ReactVirtualized__Table__Grid {\n      outline: none;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\n      border-radius: 0.5rem;\n      min-width: 650px;\n      background-color: #e3eeee;\n      background-image: url(",");\n      background-repeat: no-repeat;\n      background-position: 98% 98%;\n\n      .ReactVirtualized__Grid__innerScrollContainer {\n        min-width: 650px;\n      }\n    }\n\n    .gridScrollWrap {\n      overflow: hidden !important;\n      :hover {\n        overflow-y: scroll !important;\n\n        // fireFox\n        scrollbar-color: #6fd1d8 #fff;\n        // scrollbar-color: light;\n        scrollbar-width: thin;\n        // scrollbar-width: none;\n\n        //Safari and Chrome\n        ::-webkit-scrollbar {\n          // display: none;\n          width: 5px; /*\u9ad8\u5bbd\u5206\u522b\u5bf9\u5e94\u6a2a\u7ad6\u6eda\u52a8\u6761\u7684\u5c3a\u5bf8*/\n        }\n        ::-webkit-scrollbar-thumb {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u5c0f\u65b9\u5757*/\n          border-radius: 10px;\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          background: #6fd1d8;\n          height: 10px;\n        }\n\n        ::-webkit-scrollbar-track {\n          /*\u6eda\u52a8\u6761\u91cc\u9762\u8f68\u9053*/\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n          border-radius: 10px;\n          background: #fff;\n        }\n      }\n    }\n\n    .input,\n    .textarea {\n      border: none;\n      padding: 5px;\n      min-height: 30px;\n      font-size: 12px;\n      text-align: center;\n      background-color: #3a3a3a;\n    }\n\n    .textarea {\n      resize: vertical;\n    }\n\n    p {\n      line-height: 1.5;\n      margin: 0;\n    }\n  }\n"]);return jn=function(){return e},e}var On=S.b.div(jn(),Nn.a),Bn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).$tableRef=r.a.createRef(),t.state={editingIndex:-1,editingSub:{start:0,startTime:"",end:0,endTime:"",length:0,content:""},errors:{},displayIndex:!0},t.schema={},t.errorSchema={},t.toastId_validate=null,t.toastId_validatePropertys={startTime:null,endTime:null,content:null},t.validate=function(){var e=Y.validate(t.state.editingSub,t.schema),n={};return e&&e.map((function(e){return n[e]=t.errorSchema[e]})),0===Object.keys(n).length?(t.setState({errors:{}}),!1):(t.setState({errors:n}),n)},t.toast_validate=function(e){De.done(t.toastId_validate),t.toastId_validate=De.bootstrapToast(e,"warning","top_left",{autoClose:1e4},"flip")},t.validateProperty=function(e,n){var a=Object(I.a)({},e,t.schema[e]),r=Y.validateProperty(e,n,a),o=Object(b.a)({},t.state.errors);return r?(o[e]=t.errorSchema[e],t.setState({errors:o}),Object(I.a)({},e,t.errorSchema[e])):(delete o[e],t.setState({errors:o}),!1)},t.toast_validateProperty=function(e,n){var a=t.toastId_validatePropertys[e],r=Object.values(t.toastId_validatePropertys),o=r.indexOf(a);r.splice(o,1),r.map((function(e){return De.done(e)})),De.isActive(a)||(t.toastId_validatePropertys[e]=De.notify(n.length>0&&n[0],"bottom_left","default",{hideProgressBar:!0,autoClose:5e3},"flip"))},t.handleInputValue=function(e,n){var a=Object(b.a)({},t.state.editingSub);a[e]=n;var r=t.validateProperty(e,n);if(r){var o=Y.errors2messages(r);t.toast_validateProperty(e,o)}else De.done(t.toastId_validatePropertys[e]),a.length=fe.getSubLength(a);t.setState({editingSub:a},(function(){}))},t.handleRowEdit=function(e){var n=t.props.subArray,a=fe.mapSubToFullModel(e);t.setState({editingSub:a},(function(){t.validate(),B.clog("\u8868\u5355\u56de\u663e\uff1a",t.state.editingSub)}));var r=n.indexOf(e);t.setState({editingIndex:r})},t.handleRowClick=function(e){(0,t.props.onClick)(e)},t.handleRowCommit=function(e){var n=t.props.onCommit,a=t.validate();if(a){var r=Y.errors2messages(a);t.toast_validate(r)}else De.done(t.toast_validate),t.handleRowCancel(),n(e,fe.mapSubToFullModel(t.state.editingSub))},t.handleRowRemove=function(e,n){var a=t.props.onRemove;n===t.state.editingIndex&&t.handleRowCancel(),a(e)},t.handleRowCancel=function(){t.setState({editingIndex:-1})},t.tableBackGroundColor=function(e){var n=e&&0===e.length?"#e3eeee":"#c0d9d9",t=document.getElementById("vSubTable");t&&(t.style.backgroundColor=n)},t.handleDisplayIndexSwitch=function(e){var n=!!e;t.setState({displayIndex:n})},t.handleRowInsert=function(e){(0,t.props.onInsert)(e)},t.scrollToButtom=function(){var e=document.getElementsByClassName("gridScrollWrap")[0],n=e.scrollTop,t=e.scrollHeight,a=e.clientHeight;console.log(e,"scrollHeight:",t,";scrollTop:",n,";clientHeight:",a,";scrollHeight - scrollTop - clientHeight:",t-n-a),e.scrollTop=e.scrollTop+(t-n-a)},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.schema=Y.getEditingSubSchema(),this.errorSchema=Y.getEditingErrorSchema()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,n=this.props,t=n.subArray,a=n.scrollIndex,o=n.container,i=n.onInsert,l=o.containerHeight,c=o.containerWidth;return this.tableBackGroundColor(t),r.a.createElement(On,{onKeyUp:function(n){switch(n.preventDefault(),n.stopPropagation(),n.keyCode){case 27:e.handleRowCancel();break;default:return}}},r.a.createElement(bn.a,{id:"vSubTable",ref:this.$tableRef,headerHeight:35,width:c/2,height:l,gridClassName:"gridScrollWrap",rowHeight:60,scrollToIndex:a,rowCount:t.length,rowGetter:function(e){var n=e.index;return t[n]},headerRowRenderer:function(){return r.a.createElement(Tn,Object.assign({},e.state,{subArrayLenIsZero:t&&0===t.length,onInsert:i,onDisplayIndexSwitch:e.handleDisplayIndexSwitch}))},rowRenderer:function(n){return r.a.createElement(En,Object.assign({},n,{onRowRemove:e.handleRowRemove,onRowEdit:e.handleRowEdit,onRowClick:e.handleRowClick,onRowCommit:e.handleRowCommit,onRowCancel:e.handleRowCancel,onRowInsert:e.handleRowInsert,onInputValueChange:e.handleInputValue},e.state,{scrollIndex:a}))}}))}}]),n}(a.PureComponent);function In(){var e=Object(w.a)(["\n  display: flex;\n  margin-bottom: 15px;\n  justify-content: space-around;\n\n  .controlIcon {\n    color: #529393;\n    transition: color 0.2s ease;\n    &:hover {\n      color: #66cccc;\n    }\n  }\n"]);return In=function(){return e},e}var Un=S.b.div(In()),Rn=function(e){var n=e.onAction,t=e.playerPaused;return r.a.createElement(Un,null,r.a.createElement("i",{className:"fa fa-fast-backward controlIcon",title:"ctrl alt \u2190 \u56de\u900010\u79d2",onClick:function(){return n(-10)}}),r.a.createElement("i",{className:"fa fa-backward controlIcon",title:"ctrl \u2190 \u56de\u90001\u79d2",onClick:function(){return n(-1)}}),r.a.createElement("i",{className:"fa fa-step-backward controlIcon",title:"\u2190 \u56de\u90000.1\u79d2",onClick:function(){return n(-.1)}}),t?r.a.createElement("i",{className:"fa fa-play controlIcon",title:"space \u64ad\u653e",onClick:function(){return n()}}):r.a.createElement("i",{className:"fa fa-pause controlIcon",title:"space \u6682\u505c",onClick:function(){return n()}}),r.a.createElement("i",{className:"fa fa-step-forward controlIcon",title:"\u2192 \u524d\u8fdb0.1\u79d2",onClick:function(){return n(.1)}}),r.a.createElement("i",{className:"fa fa-forward controlIcon",title:"ctrl \u2192 \u524d\u8fdb1\u79d2",onClick:function(){return n(1)}}),r.a.createElement("i",{className:"fa fa-fast-forward controlIcon",title:"ctrl alt \u2192 \u524d\u8fdb10\u79d2",onClick:function(){return n(10)}}))};function Pn(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  user-select: none;\n  position: relative;\n  border-radius: 10px;\n  overflow: hidden;\n  color: white;\n  cursor: pointer;\n  box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n\n  .rippleSpan {\n    display: block;\n    position: absolute;\n    border-radius: 100%;\n    background: rgba(255, 255, 255, 0.5);\n    transform: scale(0);\n  }\n\n  .rippleAnimation {\n    animation: ripple 0.5s ease-in;\n  }\n\n  .btnMouseDown {\n    opacity: 0.5;\n  }\n"]);return Pn=function(){return e},e}var Fn=S.b.div(Pn()),Ln=function(e){var n=e.disabled,t=e.height,o=e.width,i=e.bgColor,l=e.label,c=e.color,s=e.onClick,u=e.title,d=e.className,p=e.element,f=Object(a.useCallback)((function(e){null===e||n||(e.onmouseenter=function(n){var t=e.querySelector(".rippleSpan");t.classList.add("rippleAnimation"),t.style.width=this.offsetWidth+"px",t.style.height=this.offsetWidth+"px",t.style.top=-(this.offsetHeight-n.offsetY)+"px",t.style.left=-(this.offsetWidth/2-n.offsetX)+"px",setTimeout((function(){t.classList.remove("rippleAnimation")}),500)},e.onmousedown=function(e){this.style.opacity=.7,this.style.boxShadow="0px 0px 0px rgba(0, 0, 0, 0.2)"},e.onmouseup=function(e){this.style.opacity="",this.style.boxShadow=""})}),[n]);return r.a.createElement(Fn,{ref:f,onClick:s,title:u,style:{width:o,height:t,color:c,backgroundColor:i},className:d},r.a.createElement("span",{className:"rippleSpan"}),l,p)};function zn(){var e=Object(w.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: auto;\n  cursor: pointer;\n"]);return zn=function(){return e},e}function Dn(){var e=Object(w.a)(["\n  flex: 1;\n  display: flex;\n  padding: 15px 0 15px 0;\n  overflow-y: auto;\n  // backgroud-color: #c0d9d9;\n\n  .toolsContainerBox {\n    display: flex;\n    flex: 1;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\n    background-color: #e3eeeef2;\n    padding: 15px;\n    max-height: 250px;\n    overflow-y: hidden;\n    :hover {\n      overflow-y: auto;\n    }\n  }\n\n  .leftBox {\n    flex: 1;\n    display: flex;\n    background: url(",') no-repeat;\n    background-size: 47%;\n    background-position: 85% center;\n\n    .controlBox {\n      width: 200px;\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-end;\n    }\n  }\n\n  .toolsBox {\n    flex: 1;\n    min-height: 150px;\n    border: 1px dashed #529393;\n    border-radius: 6px 6px;\n    display: flex;\n    flex-direction: column;\n\n    .shRow {\n      display: flex;\n    }\n\n    .shRowHeader {\n      width: 100px;\n      display: flex;\n      padding: 5px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .shRowBody {\n      flex: 1;\n      display: flex;\n      padding: 0 30px 0 30px;\n      justify-content: space-between;\n      align-items: center;\n      flex-direction: row;\n\n      .toolsBtn {\n        // margin-right: 15px;\n        z-index: 1;\n        // pointer-events: none;\n      }\n    }\n\n    //select\u6837\u5f0f\n    .toolsSelect {\n      user-select: none;\n      border: none;\n      background: none;\n      appearance: none;\n      -webkit-appearance: none;\n      -ms-appearance: none;\n      -moz-appearance: none;\n      -o-appearance: none;\n      outline: none;\n      text-align: center; //\u6587\u5b57\u5bf9\u9f50\u65b9\u5f0f\n      text-align-last: center;\n      height: 35px;\n      width: 90px;\n      border-radius: 5px;\n      background: linear-gradient(150deg, #00dfea, #66cccc);\n      color: white;\n      cursor: pointer;\n      box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.2);\n      overflow: hidden;\n      // margin-right: 10px;\n      option {\n        color: black;\n        background: #ffffff;\n      }\n    }\n  }\n\n  //\u6ed1\u5757\u6837\u5f0f\n  input[type="range"] {\n    appearance: none;\n    height: 3px;\n    width: 200px;\n    outline: none;\n    background-color: #529393;\n    border-radius: 10px;\n  }\n  //firefox\u53bbinput range \u7684outline\n  input[type="range"]::-moz-focus-outer {\n    border: 0;\n  }\n\n  //chorme\n  input[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    outline: none;\n    height: 15px;\n    width: 15px;\n    background: #ffffff;\n    border-radius: 50%;\n  }\n']);return Dn=function(){return e},e}var Mn=S.b.div(Dn(),t(238)),Vn=S.b.input(zn()),Wn=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).languages=_e.getBaiduTranslateLanguages(),t.languagesKeys=Object.keys(t.languages),t.state={currentLanguageKeyFrom:"auto",currentLanguageKeyTo:"zh",videoName:"",subName:"subtitle.vtt"},t.handleLanguageChange=function(e,n){t.setState(Object(I.a)({},e,n))},t.handleTranslate=function(){var e=t.props.onAllSubTranslate,n=t.state;e(n.currentLanguageKeyFrom,n.currentLanguageKeyTo)},t.handleTranslateBackupReset=function(){(0,t.props.onSubArrayBackupReset)()},t.handleVideoControlActions=function(e){(0,t.props.onVideoControlAction)(e)},t.handleSubFile=function(){var e=Object(x.a)(y.a.mark((function e(n){var a,o,i,l,c,s,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nn.start(),a=n.currentTarget.files[0],/\.vtt$/i.test(a.name)){e.next=6;break}return nn.done(),De.notify("\u6682\u53ea\u652f\u6301vtt\u683c\u5f0f\u7684\u5b57\u5e55\u6587\u4ef6\uff0c\u5176\u4ed6\u683c\u5f0f\u5c06\u5728\u540e\u7eed\u66f4\u65b0\u4e2d\u52a0\u5165","top_center","warning"),e.abrupt("return");case 6:return o=t.props,i=o.updateSubArray,l=o.updateSubUrl,e.prev=7,e.next=10,fe.readSubFileAsText(a);case 10:return c=e.sent,De.notify(r.a.createElement("p",null,c),"top_center","default",{autoClose:!1,className:"textReader"}),s=fe.createVttSubBlobUrl(c),l(s,!0),e.next=16,fe.createSubArray(s);case 16:u=e.sent,i(u,!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),De.notify("<Header>".concat(e.t0.message),"top_center","warning");case 23:nn.done();case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(n){return e.apply(this,arguments)}}(),t.handleVideoFile=function(e){nn.start();var n=e.currentTarget.files[0],a=document.createElement("video");if(B.clog("\u521b\u5efa\u5143\u7d20\uff1a",a,n,n.type,a.canPlayType(n.type)),"maybe"!==a.canPlayType(n.type)&&!/\.flv$/i.test(n.name))return nn.done(),void De.notify("\u65e0\u6cd5\u64ad\u653e\u8be5\u6587\u4ef6\uff0c\u64ad\u653e\u5668\u660e\u786e\u652f\u6301mp4\u3001flv\u683c\u5f0f\u7684\u89c6\u9891","top_center","warning");t.setState({videoName:n.name});var r=URL.createObjectURL(n);B.clog("\u89c6\u9891url",r),(0,t.props.onSwitch)(n.type||n.name,!n.type,r),nn.done()},t.handleSubFileDownload=function(){(0,t.props.onDownload)()},t.ffmpegEncoding=!1,t.handleVideoWithSubDownload=Object(x.a)(y.a.mark((function e(){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u628a\u5b57\u5e55\u4e0e\u89c6\u9891\u5408\u5e76\u540e\u8f93\u51fa\uff0c\u5c06\u628a\u6574\u4e2a\u89c6\u9891\u91cd\u65b0\u7f16\u7801\uff0c\u8fd9\u4f1a\u82b1\u8d39\u5f88\u957f\u65f6\u95f4\uff0c\u662f\u5426\u7ee7\u7eed\uff1f")){e.next=16;break}return t.handleFfmpegEncodeStop(),n=t.props,a=n.videoUrl,r=n.subUrl,e.prev=4,e.next=7,Ie.encodeVideoWithSub(a,t.state.videoName,r,t.state.subName);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),console.error(e.t0),De.notify(e.t0.message),e.abrupt("return");case 14:De.notify("\u89c6\u9891\u7f16\u7801\u5f00\u59cb\uff0c\u6b64\u529f\u80fd\u4ecd\u5728\u6d4b\u8bd5\u4e2d\uff0c\u6682\u65e0\u8fdb\u5ea6\u6761\uff0c\u53eff12\u67e5\u770b\u63a7\u5236\u53f0\u4fe1\u606f\u3002\u7531\u4e8e\u662f\u5728\u6d4f\u89c8\u5668\u5185js\u6267\u884c\uff0c\u5e76\u4e14\u662f\u5355worker\uff0c\u6240\u4ee5\u901f\u5ea6\u6781\u6162\uff0c\u5efa\u8bae\u4ec5\u4e0b\u8f7d\u5b57\u5e55\u6587\u4ef6\uff0c\u5728\u672c\u5730\u5408\u5e76\u89c6\u9891\u4e0e\u5b57\u5e55\u3002"),t.ffmpegEncoding=!0;case 16:case"end":return e.stop()}}),e,null,[[4,9]])}))),t.handleFfmpegEncodeStop=function(){t.ffmpegEncoding&&(Ie.stopFfmpegWorker(),t.ffmpegEncoding=!1)},t.handleSubClean=function(){(0,t.props.onClean)()},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.duration,a=n.playerPaused,o=n.onDurationChange,i=this.state,l=i.currentLanguageKeyFrom,c=i.currentLanguageKeyTo;return r.a.createElement(Mn,null,r.a.createElement("div",{className:"toolsContainerBox"},r.a.createElement("div",{className:"leftBox"},r.a.createElement("div",{className:"controlBox"},r.a.createElement(Rn,{onAction:this.handleVideoControlActions,playerPaused:a}),r.a.createElement("input",{type:"range",title:"\u65f6\u95f4\u8f74\uff1a".concat(t),value:t,min:"10",max:"20",step:"1",onChange:function(e){o(Number(e.currentTarget.value))}}))),r.a.createElement("div",{className:"toolsBox"},r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Ln,{disabled:!0,label:"\u5e38\u89c4",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-folder-open","aria-hidden":"true"}),element:r.a.createElement(Vn,{type:"file",name:"file",onChange:this.handleSubFile,title:"\u6253\u5f00\u5b57\u5e55"}),color:"white",bgColor:"#529393"}),r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-play-circle","aria-hidden":"true"}),element:r.a.createElement(Vn,{className:"uploadVideo",type:"file",name:"file",onChange:this.handleVideoFile,title:"\u6253\u5f00\u89c6\u9891"}),color:"white",bgColor:"#529393",title:"dd",onClick:function(){return console.log("click")}}),r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u4e0b\u8f7d\u5b57\u5e55",onClick:this.handleSubFileDownload}),r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}),color:"white",bgColor:"#ec6464",title:"\u6e05\u7a7a\u5b57\u5e55",onClick:this.handleSubClean}))),r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Ln,{disabled:!0,label:"\u7ffb\u8bd1",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyFrom",value:l,title:"\u5f53\u524d\u8bed\u8a00",onChange:function(n){return e.handleLanguageChange(n.currentTarget.name,n.currentTarget.value)}},this.languagesKeys.map((function(n){return r.a.createElement("option",{key:n,value:n},e.languages[n])}))),r.a.createElement("select",{className:"toolsSelect",name:"currentLanguageKeyTo",value:c,title:"\u7ffb\u8bd1\u81f3",onChange:function(n){return e.handleLanguageChange(n.currentTarget.name,n.currentTarget.value)}},this.languagesKeys.filter((function(e){return"auto"!==e})).map((function(n){return r.a.createElement("option",{key:n,value:n},e.languages[n])}))),r.a.createElement(Ln,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-globe","aria-hidden":"true"}),color:"white",bgColor:"#66cccc",title:"\u70b9\u51fb\u7ffb\u8bd1 (\u8bf7\u7ed9\u5b83\u4e9b\u4f11\u606f\u65f6\u95f4)",onClick:this.handleTranslate}),r.a.createElement(Ln,{className:"toolsBtn",width:"35px",height:"35px",label:r.a.createElement("i",{style:{fontSize:"16px"},className:"fa fa-undo","aria-hidden":"true"}),color:"white",bgColor:"#00dfea",title:"\u56de\u9000\u81f3\u4e0a\u6b21\u7ffb\u8bd1\u524d\u7684\u7248\u672c",onClick:this.handleTranslateBackupReset}))),r.a.createElement("div",{className:"shRow"},r.a.createElement("div",{className:"shRowHeader"},r.a.createElement(Ln,{disabled:!0,label:"\u7f16\u7801",width:"50px",height:"40px",color:"gray",bgColor:"white"})),r.a.createElement("div",{className:"shRowBody"},r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u5c06\u5b57\u5e55\u5185\u5c01\u5230\u89c6\u9891\uff0c\u5e76\u4e0b\u8f7d",onClick:this.handleVideoWithSubDownload}),r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-retweet fa-spin","aria-hidden":"true"}),color:"white",bgColor:"#529393",title:"\u5b57\u5e55\u683c\u5f0f\u8f6c\u6362",onClick:this.handlesubTransform}),r.a.createElement(Ln,{className:"toolsBtn",width:"45px",height:"35px",label:r.a.createElement("i",{className:"fa fa-ban","aria-hidden":"true"}),color:"white",bgColor:"#ec6464",title:"\u505c\u6b62\u7f16\u7801",onClick:this.handleFfmpegEncodeStop}))))))}}]),n}(a.PureComponent),Hn=t(144);function Kn(){var e=Object(w.a)(["\n  //\u5e95\u90e8\u65f6\u95f4\u8f74 \u56fa\u5b9a150px\n  height: 150px;\n  position: relative;\n  display: flex;\n  width: 100%;\n  background-color: #c0d9d9;\n  // border-top: 1px solid rgb(10, 10, 10);\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.3);\n"]);return Kn=function(){return e},e}var Gn=S.b.div(Kn()),Yn=function(e){var n=e.currentTime,t=e.videoUrl,a=e.onWaveClick,o=e.onWaveContextmenu,i=e.subArray,l=e.onSubBlockMove,c=e.onSubBlockMoveError,s=e.onSubBlockResize,u=e.onSubBlockClick,d=e.duration;return r.a.createElement(Gn,null,r.a.createElement(Hn.ShWave,{duration:d,backgroundColor:"#529393",currentTime:n,throttleWait:1,url:t,waveColor:"#fbf8f86b",alterWaveColor:"#57e3e3",waveScale:.8,click:a,contextmenu:o,subArray:i,onSubMove:l,onSubMoveError:c,ErrorWait:1050,ErrorColor:"#f09b50d9",onSubResize:s,onSubClick:u}))},qn=new WeakMap,Qn=new WeakMap,Jn=function(){function e(n,t){Object(c.a)(this,e),qn.set(this,n),Qn.set(this,t)}return Object(s.a)(e,[{key:"subArray",get:function(){return qn.get(this)}},{key:"currentTime",get:function(){return Qn.get(this)}}]),e}();function Xn(){var e=Object(w.a)(["\n  flex: 1;\n  margin-top: 5px;\n"]);return Xn=function(){return e},e}function Zn(){var e=Object(w.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"]);return Zn=function(){return e},e}function _n(){var e=Object(w.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n"]);return _n=function(){return e},e}function $n(){var e=Object(w.a)(["\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100vh;\n        overflow: hidden;\n        min-width: 1300px;\n        min-height: 800px;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        // color: #ccc; \u767d\u5b57\n        background: #C0D9D9;\n        // background: #66CCCC;\n        // overflow-y: scroll;\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return $n=function(){return e},e}var et=Object(S.a)($n()),nt=S.b.div(_n()),tt=S.b.div(Zn()),at=S.b.div(Xn()),rt=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ot=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={videoUrl:"",subUrl:"",subArray:[],picUrl:Ie.getDefaultPicUrl(),container:{containerHeight:10,containerWidth:10},scrollIndex:-1,player:null,currentTime:0,duration:15,playerPaused:!0},t.subUrlWorker=null,t.WillMemorize=!0,t.resizeContainer=function(){var e=document.body.clientHeight-200,n=document.body.clientWidth,a=document.querySelector("#mainContainer");a.style.maxWidth="".concat(n,"px;"),a.style.maxHeight="".concat(e,"px;"),B.clog("\u66f4\u65b0container\u7684\u5bbd\u9ad8",n,e),t.setState({container:{containerHeight:e,containerWidth:n}})},t.addResizeListener=function(){var e=function(e,n){var t;return function(){clearTimeout(t),t=setTimeout(e,n)}}(t.resizeContainer,300);window.addEventListener("resize",e),B.clog("\u6dfb\u52a0resize\u4e8b\u4ef6\u76d1\u542c")},t.videoControlsShortcutkey=function(e){if(17!==e.keyCode&&18!==e.keyCode){var n;switch(e.keyCode){case 37:n=-.1,e.ctrlKey&&(n=-1),e.ctrlKey&&e.altKey&&(n=-10);break;case 39:n=.1,e.ctrlKey&&(n=1),e.ctrlKey&&e.altKey&&(n=10);break;case 32:break;default:return}e.preventDefault(),t.handleVideoControlActions(n)}},t.undoShortcutkey=function(e){var n;switch(e.keyCode){case 90:e.ctrlKey&&(n=!0),e.ctrlKey&&e.shiftKey&&(n=!1);break;default:return}"undefined"!==typeof n&&(e.preventDefault(),t.editorStateRollBack(n))},t.addKeyboardListener=function(){window.addEventListener("keyup",t.videoControlsShortcutkey),window.addEventListener("keyup",t.undoShortcutkey)},t.removeKeyboardListener=function(){window.removeEventListener("keyup",t.videoControlsShortcutkey),window.removeEventListener("keyup",t.undoShortcutkey)},t.updateOneState=function(e){t.setState(e),B.clog("\u66f4\u65b0state\uff1a",e)},t.updateSubArray=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.map((function(e){return fe.mapSubToFullModel(e)}));var a=fe.sortSubArray(e);t.setState({scrollIndex:-1}),t.setState({subArray:a},(function(){n&&(t.storageSubs(t.state.subArray),t.subUrlWorker.postMessage(t.state.subArray))}))},t.updateSubUrl=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];URL.revokeObjectURL(t.state.subUrl),t.setState({subUrl:e},(function(){n&&(B.clog("\u88c5\u8f7d\uff1a",t.state.subUrl),t.loadTrack(t.state.subUrl))}))},t.loadTrack=function(e){if(t.cleanSubP(),t.state.player&&t.state.player.video){var n=t.state.player.video.firstElementChild;n.default=!0,n.kind="subtitles",n.src=e}},t.cleanSubP=function(){var e=document.getElementsByClassName("dplayer-subtitle")[0],n=e.firstChild;n&&(e.removeChild(n),B.clog("\u6e05\u9664\u5b57\u5e55\u6b8b\u7559",n))},t.storageSubs=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fe.saveSubArray(e,n)},t.cleanStorageSubs=function(){fe.cleanSubArray(),B.clog("\u6e05\u7a7a\u5b58\u50a8\u7684\u5b57\u5e55\uff0c\u4e0d\u542b\u5907\u4efd")},t.initSubTable=Object(x.a)(y.a.mark((function e(){var n,a,r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe.getSubArray();case 3:if((n=e.sent)&&0!==n.length){e.next=12;break}return a=Ie.getDefaultSubUrl(),t.updateSubUrl(a,!0),e.next=9,fe.createSubArray(a);case 9:return r=e.sent,t.updateSubArray(r),e.abrupt("return");case 12:t.updateSubArray(n),o=fe.createSubArrayUrl(n),t.updateSubUrl(o,!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),De.notify("\u8bfb\u53d6\u5b57\u5e55\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u6e05\u9664\u7f13\u5b58","top_center","info");case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),t.handleSubRemove=function(e){var n=Object(g.a)(t.state.subArray),a=n.indexOf(e);n.splice(a,1),t.updateSubArray(n,!0),B.clog("\u5220\u9664",e,a)},t.handleSubEdit=function(e){var n=t.state.subArray.map((function(e){return Object(b.a)({},e,{startTime:e.startTime,endTime:e.endTime,length:e.length,editing:!1})})),a=t.state.subArray.indexOf(e);n[a].editing=!0,t.updateSubArray(n),B.clog("handleEdit",e,a)},t.handleSubClick=function(e){if(e&&e.start){var n=e.start;t.playerSeekTo(n)}},t.handleSubCancel=function(e){var n=Object(g.a)(t.state.subArray),a=n.indexOf(e);n[a].editing=!1,t.updateSubArray(n)},t.handleSubCommit=function(e,n){var a=Object(g.a)(t.state.subArray),r=a.indexOf(e);a[r]=n,t.updateSubArray(a,!0),B.clog("\u63d0\u4ea4\uff1a",e,n,a)},t.handleSubInsert=function(e){var n=e?e.end+.001:0,a=Object(g.a)(t.state.subArray),r=a.indexOf(e),o=a[r+1],i=o?Math.abs(o.start-.001):n+5;if(Number((i-n).toFixed(3))<.001)De.notify("\u7a7a\u95f4\u4e0d\u8db3\uff0c\u524d\u540e\u5b57\u5e55\u76f8\u9694\u81f3\u5c11\u9700\u89810.03\u79d2");else{var l=fe.getDefaultSub(Number(n),Number(i));a.splice(r+1,0,l),t.updateSubArray(a);var c=r+1;t.setState({scrollIndex:c}),B.clog("\u63d2\u5165\uff1a",l)}},t.handleSubDownload=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe.downloadSubFile();case 3:n=e.sent,B.clog(n),n||De.notify("\u65e0\u5b57\u5e55\u6587\u4ef6\uff0c\u8bf7\u5148\u5236\u4f5c\u60a8\u7684\u5b57\u5e55\u3002"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),De.notify("\u4e0b\u8f7d\u51fa\u9519","top_center","warning");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.handleSubClean=function(){if(window.confirm("\u662f\u5426\u8981\u5220\u9664\u6240\u6709\u5b57\u5e55\uff1f")){t.cleanStorageSubs(),t.updateSubUrl("",!0);t.updateSubArray([])}},t.handlePlayerInit=function(e){B.clog("\u521d\u59cb\u5316\u64ad\u653e\u5668"),t.setState({player:e});rt((function n(){var a=e.video;t.handleCurrentTime(a.currentTime),rt(n)}))},t.playerSeekTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pause",a=t.state.player;if(a&&a.video){var r=a.video.duration;a[n]();var o=e>r?r:e;a.seek(o)}},t.handleVideoSwitch=function(e,n,a){var r=Ie.createVideoType(e,n);URL.revokeObjectURL(t.state.videoUrl),t.setState({videoUrl:a}),t.state.player.switchVideo({url:a,type:r})},t.handleVideoCanPlay=function(){if(B.clog("\u89c6\u9891\u5df2\u7ecf\u5c31\u7eea"),navigator.userAgent.toLowerCase().indexOf("chrome")>0){var e=document.getElementsByClassName("dplayer-subtitle")[0];e&&(e.style.opacity=0)}},t.handleScrollIndexFrame=function(e){t.state.scrollIndex!==e&&t.setState({scrollIndex:e})},t.handleCurrentTime=function(e){t.state.currentTime!==e&&t.setState({currentTime:e},(function(){var n=t.state.subArray.findIndex((function(n){return n.start<=e&&n.end>e}));-1!==n&&t.handleScrollIndexFrame(n)}))},t.handlePlayerPaused=function(e){var n=t.state.player;n&&n.video&&(e=n.video.paused),t.setState({playerPaused:e})},t.handleVideoPlaying=function(){},t.handleWaveClick=function(e,n){t.playerSeekTo(e)},t.handleWaveContextmenu=function(e,n){t.playerSeekTo(e,"play")},t.handleSubBlockMove=function(e,n){var a=Object(g.a)(t.state.subArray),r=a.indexOf(e),o=a[r],i=Number(Number(o.start+n).toFixed(3)),l=Number(Number(o.end+n).toFixed(3));if(!(i<0||l<=0)){var c=Object(b.a)({},o);c.startTime=fe.toTime(i),c.endTime=fe.toTime(l),a[r]=fe.mapSubToFullModel(c),t.updateSubArray(a,!0)}},t.toastId_subBlockMoveError=null,t.handleSubBlockMoveError=function(){De.isActive(t.toastId_subBlockMoveError)||(t.toastId_subBlockMoveError=De.notify(r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",null,"\u65e0\u6548\u7684\u4f4d\u7f6e\uff0c\u677e\u5f00\u9f20\u6807\u4ee5\u4fee\u590d")),"bottom_left","warning",{hideProgressBar:!0,autoClose:1e3,canClose:!0},"flip"))},t.handleSubBlockResize=function(e,n,a){var r=Object(g.a)(t.state.subArray),o=r.indexOf(e),i=r[o],l=Object(b.a)({},i),c=null,s=0;if("start"===a){if(null===(c=Number(Number(i.start+n).toFixed(3)))||c<0)return;l.startTime=fe.toTime(c)}else{if((s=Number(Number(i.end+n).toFixed(3)))<=0||s<=i.start)return;l.endTime=fe.toTime(s)}r[o]=fe.mapSubToFullModel(l),t.updateSubArray(r,!0)},t.handleSubBlockClick=function(e){var n=Object(g.a)(t.state.subArray).indexOf(e);t.setState({scrollIndex:n})},t.handleDurationChange=function(e){t.setState({duration:e})},t.handleAllSubTranslate=function(){var e=Object(x.a)(y.a.mark((function e(n,a){var r,o,i,l,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn.start(),e.next=3,fe.getSubArray();case 3:return r=e.sent,o=fe.createSubTextArr(r),i=_e.createTranslateTextFromStringArr(o),nn.set(10),nn.inc(50),De.notify("\u7ffb\u8bd1\u8bf7\u6c42\u6b63\u51c6\u5907\u53d1\u9001\uff0c\u7531\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u4f4d\u4e8e\u7f8e\u56fd\uff0c\u53ef\u80fd\u6bd4\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...(\u7ffb\u8bd1\u529f\u80fd\u5185\u7f6e\u95f4\u9694\u4e3a 2\u79d2","top_center"),l=[],e.prev=10,e.next=13,_e.translateByLangKey(n,a,i);case 13:l=e.sent,e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(10),console.log(e.t0),nn.done(),De.notify("\u7ffb\u8bd1\u5931\u8d25","top_center","warning"),e.abrupt("return");case 22:if(console.log("\u5f97\u5230\u7684\u7ffb\u8bd1\u6587\u672c\u6570\u7ec4\uff1a",l),l&&l!==[]){e.next=26;break}return nn.done(),e.abrupt("return",De.notify("\u7ffb\u8bd1\u7ed3\u679c\u4e3a\u7a7a","top_center","warning"));case 26:if(l===[]||l.length===r.length){e.next=29;break}return nn.done(),e.abrupt("return",De.notify("\u672a\u5e94\u7528\u7ffb\u8bd1\u7ed3\u679c\uff0c\u7ffb\u8bd1\u524d\u8bf7\u4e0d\u8981\u5728\u5b57\u5e55\u91cc\u51fa\u73b0\u6362\u884c\uff0c\u4e5f\u53ef\u80fd\u662f\u539f\u6587\u672c\u65e0\u9700\u7ffb\u8bd1","top_center","warning"));case 29:c=r.map((function(e,n){return Object(b.a)({},e,{content:l[n]})})),nn.inc(20),t.storageSubs(r,!0),t.updateSubArray(c,!0),nn.done(),De.notify("\u7ffb\u8bd1\u5b8c\u6210","top_center");case 35:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(n,t){return e.apply(this,arguments)}}(),t.handleAllSubTranslateDebounce=E.a.debounce(t.handleAllSubTranslate,2e3,{leading:!0,trailing:!1}),t.handleSubArrayBackupReset=Object(x.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getSubArray(!0);case 2:if(0!==(n=e.sent).length){e.next=6;break}return De.notify("\u65e0\u5907\u4efd","top_center"),e.abrupt("return");case 6:t.updateSubArray(n,!1),De.notify("\u5df2\u56de\u9000\u5230\u5907\u4efd\u7684\u7248\u672c\uff0c\u5982\u679c\u60f3\u5c06\u5b83\u4fdd\u5b58\u4e3a\u6b63\u5f0f\u7248\u672c\uff0c\u8bf7\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\u6216\u5220\u9664\u3002\u5982\u679c\u4e0d\u60f3\u4f7f\u7528\u6b64\u7248\u672c\uff0c\u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u3002","top_center");case 8:case"end":return e.stop()}}),e)}))),t.handleVideoControlActions=function(e){var n=t.state.player;if(n&&n.video)if(e&&"number"===typeof e){var a=t.state.currentTime,r=Math.round(10*(a+e))/10;t.playerSeekTo(r)}else{if(!n.video.duration)return;n.video.paused?n.play():n.pause()}},t.createEditorState=function(){var e=t.state,n=e.subArray,a=e.currentTime,r=Object(g.a)(n).map((function(e){return Object(b.a)({},e,{startTime:e.startTime,endTime:e.endTime,length:e.length})}));return new Jn(r,a)},t.editorStateRollBack=function(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Pe.pop,r=Pe.unPop;try{e=n?a():r()}catch(o){console.error(o)}"undefined"!==typeof e&&(t.WillMemorize=!1,t.updateSubArray(e.subArray,!0),t.playerSeekTo(e.currentTime),t.WillMemorize=!0)},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.resizeContainer(),this.addResizeListener(),this.addKeyboardListener(),this.initSubTable(),this.subUrlWorker=fe.createSubUrlWorker((function(n){e.updateSubUrl(n,!0)}))}},{key:"componentDidUpdate",value:function(e,n){if(this.WillMemorize&&n.subArray!==this.state.subArray){var t=this.createEditorState();Pe.push(t);var a=Pe.getHistory();console.log(a.length,a)}}},{key:"componentWillUnmount",value:function(){this.removeKeyboardListener()}},{key:"render",value:function(){var e=this.state,n=e.videoUrl,t=e.subUrl,a=e.subArray,o=e.picUrl,i=e.container,l=e.scrollIndex,c=e.player,s=e.currentTime,u=e.duration,d=e.playerPaused,p={updateOneState:this.updateOneState,updateSubArray:this.updateSubArray,updateSubUrl:this.updateSubUrl,storageSubs:this.storageSubs,cleanStorageSubs:this.cleanStorageSubs,onDownload:this.handleSubDownload,onClean:this.handleSubClean,onRemove:this.handleSubRemove,onClick:this.handleSubClick,onCommit:this.handleSubCommit,onInsert:this.handleSubInsert,onSwitch:this.handleVideoSwitch,initPlayer:this.handlePlayerInit,onVideoCanPlay:this.handleVideoCanPlay,updateCurrentTime:this.handleCurrentTime,onVideoPlayerPausedSwitch:this.handlePlayerPaused,onVideoPlaying:this.handleVideoPlaying,onWaveClick:this.handleWaveClick,onWaveContextmenu:this.handleWaveContextmenu,onSubBlockMove:this.handleSubBlockMove,onSubBlockMoveError:this.handleSubBlockMoveError,onSubBlockResize:this.handleSubBlockResize,onSubBlockClick:this.handleSubBlockClick,onDurationChange:this.handleDurationChange,onAllSubTranslate:this.handleAllSubTranslateDebounce,onSubArrayBackupReset:this.handleSubArrayBackupReset,onVideoControlAction:this.handleVideoControlActions};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement("title",null,j.subeditor_title)),r.a.createElement(et,null),r.a.createElement(sn,p),r.a.createElement(nt,{id:"mainContainer"},r.a.createElement(tt,null,r.a.createElement(hn,Object.assign({},p,{picUrl:o,videoUrl:n,subUrl:t,player:c})),r.a.createElement(Wn,Object.assign({duration:u,videoUrl:n,subUrl:t,playerPaused:d},p))),r.a.createElement(at,null,r.a.createElement(Bn,Object.assign({},p,{container:i,subArray:a,scrollIndex:l})))),r.a.createElement(Yn,Object.assign({},p,{currentTime:s,videoUrl:n,subArray:a,duration:u})))}}]),n}(a.Component),it=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(f.a,null,r.a.createElement("title",null,j.test_title)),r.a.createElement("video",{id:"video",controls:!0,width:"900px",src:"".concat(tn.home,"friday.mp4")},r.a.createElement("track",{default:!0,kind:"subtitles",srcLang:"en",src:"".concat(tn.home,"friday.vtt")})))},lt=t(145),ct=t.n(lt),st=(t(259),function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={},t}return Object(p.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return De.notify("hello","top_left"),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"SH - SubEditor App"),r.a.createElement("link",{rel:"icon",href:ct.a})),r.a.createElement(m.d,{autoClose:3e3,closeOnClick:!1,draggable:!1,position:m.f.POSITION.TOP_LEFT,className:"toastContainerClass"}),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:tn.trackTest,component:it}),r.a.createElement(h.a,{path:tn.subEditorPath,component:ot})))}}]),n}(a.Component));function ut(){var e=Object(w.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100vw;\n  .messageBox {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-image: url(",");\n    background-position: top center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    .message {\n      color: #fff;\n      position: relative;\n      top: -15%;\n      white-space: pre-wrap;\n    }\n  }\n"]);return ut=function(){return e},e}var dt=S.b.div(ut(),t(94)),pt=function(){return r.a.createElement(dt,null,r.a.createElement(f.a,null,r.a.createElement("title",null,j.subeditor_title)),r.a.createElement("div",{className:"messageBox"},r.a.createElement("div",{className:"message"},"Sorry,\n\u6682\u4e0d\u652f\u6301\u79fb\u52a8\u8bbe\u5907\uff0c\u8bf7\u4f7f\u7528PC\u7aef\u6d4f\u89c8\u5668")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(261),t(262),t(129),t(263),t(264),t(265);var ft=tn.isMobile();i.a.render(ft?r.a.createElement(pt,null):r.a.createElement(l.a,null,r.a.createElement(st,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},27:function(e){e.exports=JSON.parse('{"mode":"dev","log":"on","sub_storage_key":"Subs","sub_storage_backup_key":"SubsBackup","subeditor_title":"SubEditor - \u5728\u7ebf\u5b57\u5e55\u7f16\u8f91","test_title":"SH - SubEditor Test","translate_arr_separator":"\\n"}')},94:function(e,n,t){e.exports=t.p+"static/media/subEditor.d0e3de75.png"}},[[148,1,2]]]);
//# sourceMappingURL=main.25ce4c57.chunk.js.map
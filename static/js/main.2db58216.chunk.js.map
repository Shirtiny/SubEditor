{"version":3,"sources":["serviceWorker.js","utils/logger.js","model/sub.js","utils/timeFormatter.js","services/validateService.js","services/subService.js","components/common/bootstrapToast.jsx","utils/notifier.js","services/guideService.js","services/videoService.js","utils/progressor.js","components/header.jsx","components/videoPlayer.jsx","components/common/input.jsx","components/subRow.jsx","components/subHeaderRow.jsx","components/subTable.jsx","components/tools.jsx","components/waveLine.jsx","components/subEditor.jsx","components/test.jsx","App.js","index.js"],"names":["Boolean","window","location","hostname","match","displayLogOff","config","log","logger","clog","console","Sub","start","end","content","this","Number","toFixed","editing","subService","toTime","timeFormatter","number2Time","number","fixedNum","DT","d2t","time2Number","time","t2d","getTimeLength","startTime","endTime","timeRegx","schema","Joi","string","regex","required","min","label","max","length","greater","errorSchema","labelSchema","defaultOption","abortEarly","allowUnknown","skipFunctions","validateProperty","name","value","sigleSchema","obj","option","validate","error","validateService","getEditingSubSchema","getEditingErrorSchema","result","errorPaths","details","map","d","push","path","_","uniq","errors2messages","errors","errorMessages","Object","keys","key","validateTime","subArrayKey","sub_storage_key","toNumber","readAsTextPE","resolve","reject","file","reader","FileReader","readAsText","onerror","onload","subFile","a","text","Promise","message","analyseSubPE","subUrl","$video","document","createElement","$track","appendChild","default","kind","src","track","cues","subCues","VTTCues","Array","from","subArray","c","fullSubArray","sub","mapSubToFullModel","createVttSubBlobUrl","vttText","vttBlob","Blob","type","URL","createObjectURL","fStartTime","formateTime","fEndTime","getSubArray","subsJson","localStorage","getItem","JSON","parse","e","getParseSubArrayPE","validatedTime","found","str","mapSubArray2Text","index","join","downloadFromUrl","url","fileName","aLink","style","display","href","download","body","click","removeChild","createSubArrayUrl","readSubFileAsText","createSubArray","saveSubArray","subs","json","stringify","setItem","storageSubsPE","cleanSubArray","removeItem","getSubLength","downloadSubFile","getDefaultSub","defaultStart","defaultEnd","startIsErr","endIsErr","createSubUrlWorker","receiveUrl","workBlob","subUrlWorker","Worker","onmessage","event","data","sortSubArray","sortedArray","sort","pre","next","BootstrapToast","head","small","dataArray","className","role","aria-live","aria-atomic","border","boxShadow","width","height","xmlns","preserveAspectRatio","focusable","fill","primary","warning","transitions","slide","Slide","zoom","Zoom","flip","Flip","bounce","Bounce","notify","positionStr","typeStr","transition","postionStrUpper","toUpperCase","typeStrUpper","toastConfig","position","toast","POSITION","TYPE","notifier","bootstrapToast","strArray","isActive","toastId","done","guideService","home","protocol","host","subEditorPath","trackTest","videoService","createVideoType","fileType","videoType","getDefaultPicUrl","NProgress","configure","minimum","progressor","set","inc","HeaderWrap","styled","header","LogoYa","BtnYbutton","div","BtnYbuttonDanger","FileYinput","input","Header","handleSubFile","currentTarget","files","props","updateSubArray","updateSubUrl","vttStr","autoClose","handleVideoFile","canPlayType","videoUrl","onSwitch","handleSubFileDownload","onDownload","handleSubClean","onClean","title","SubEditorPackage","version","aria-hidden","onChange","onClick","alt","PureComponent","VideoWrapper","VideoPlayer","load","player","initPlayer","getElementById","classList","add","canPlay","onVideoCanPlay","notice","remove","playing","onVideoPlaying","fullscreen","$playerContainer","resize","fullscreenCancel","nextProps","nextState","picUrl","id","options","video","pic","customType","flvCustom","videoElement","flvjs","isSupported","flvPlayer","createPlayer","hasAudio","attachMediaElement","subtitle","fontSize","bottom","color","contextmenu","indexOf","theme","loop","onLoad","onError","onCanplay","onPlaying","onFullscreen","onFullscreenCancel","Component","InputYinput","Input","disabled","RowWrap","clickCount","SubRow","rowData","onRowRemove","onRowEdit","onRowClick","onRowCommit","onRowCancel","onRowInsert","editingSub","onInputValueChange","displayIndex","scrollIndex","displayOnEditing","setTimeout","stopPropagation","flex","HeaderRowWrap","SubHeaderRow","onDisplayIndexSwitch","subArrayLenIsZero","onInsert","TableWrapper","SubTable","$tableRef","React","createRef","state","toastId_validate","toastId_validatePropertys","setState","toast_validate","flag","toast_validateProperty","errorMessage","currentId","ids","values","splice","hideProgressBar","handleInputValue","handleRowEdit","onEdit","handleRowClick","handleRowCommit","onCommit","handleRowRemove","onRemove","handleRowCancel","onCancel","tableBackGroundColor","$table","backgroundColor","handleDisplayIndexSwitch","boolean","handleRowInsert","scrollToButtom","scrollWrap","getElementsByClassName","scrollTop","scrollHeight","clientHeight","container","containerHeight","containerWidth","ref","headerHeight","gridClassName","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","rowRenderer","rowProps","ToolsWrapper","memo","duration","onDurationChange","step","LineWrapper","WaveLine","currentTime","onWaveClick","onWaveContextmenu","onSubBlockMove","onSubBlockMoveError","onSubBlockResize","onSubBlockClick","throttleWait","waveColor","alterWaveColor","waveScale","onSubMove","onSubMoveError","ErrorThrottleWait","onSubResize","onSubClick","GlobalStyle","createGlobalStyle","Main","Left","Right","requestAnimationFrameCom","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","SubEditor","resizeContainer","clientWidth","addResizeListener","timeOutResize","func","wait","timeout","clearTimeout","debounce","addEventListener","updateOneState","stateObject","willStorage","storageSubs","postMessage","willLoadTrack","revokeObjectURL","loadTrack","cleanSubP","firstElementChild","subtitleDiv","p","firstChild","cleanStorageSubs","initSubTable","handleSubRemove","handleSubEdit","handleSubClick","playerSeekTo","handleSubCancel","handleSubCommit","handleSubInsert","Math","abs","dSub","handleSubDownload","isSuccess","confirm","handlePlayerInit","frameWork","handleCurrentTime","second","action","seek","handleVideoSwitch","switchVideo","handleVideoCanPlay","navigator","userAgent","toLowerCase","opacity","handleScrollIndexFrame","findIndex","handleVideoPlaying","handleWaveClick","handleWaveContextmenu","handleSubBlockMove","originSub","translateSecond","tempSub","toastId_subBlockMoveError","handleSubBlockMoveError","toastId_subMoveError","justifyContent","alignItems","canClose","handleSubBlockResize","handleSubBlockClick","handleDurationChange","funcProps","updateCurrentTime","Fragment","Helmet","subeditor_title","Test","test_title","controls","srcLang","App","charSet","rel","closeOnClick","draggable","TOP_LEFT","component","ReactDOM","render","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2db58216.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import config from \"../config/config.json\";\r\n\r\n//当配置项是off时，关闭log。当不为off或者为空时 显示log\r\nlet displayLogOff = config.log === \"off\" ? true : false;\r\n\r\nexport function clog(...rest) {\r\n  if (displayLogOff) return;\r\n  console.log(...rest);\r\n}\r\n\r\nconst logger = {\r\n  clog\r\n};\r\n\r\nexport default logger;\r\n","import subService from \"../services/subService\";\r\n\r\nclass Sub {\r\n  //start是秒数 如32秒 startTime是时间轴的形式 如 00:00:32\r\n  constructor(start, end, content) {\r\n    // number number string\r\n    this.start = Number(start.toFixed(3));\r\n    this.end = Number(end.toFixed(3));\r\n    this.content = content;\r\n    this.editing = false;\r\n  }\r\n\r\n  get startTime() {\r\n    return subService.toTime(this.start);\r\n  }\r\n\r\n  get endTime() {\r\n    return subService.toTime(this.end);\r\n  }\r\n\r\n  get length() {\r\n    return Number((this.end - this.start).toFixed(3));\r\n  }\r\n}\r\n\r\nexport default Sub;\r\n","import DT from \"duration-time-conversion\";\r\n// import logger from \"./logger\";\r\n\r\nexport function number2Time(number) {\r\n  const fixedNum = number.toFixed(3);\r\n  const time = DT.d2t(fixedNum);\r\n  //   logger.clog(\"转换为时间轴的值：\", time);\r\n  return time;\r\n}\r\n\r\nexport function time2Number(time) {\r\n  // logger.clog(time, DT.t2d(time).toFixed(3));\r\n  return DT.t2d(time).toFixed(3);\r\n}\r\n\r\nexport function getTimeLength(startTime, endTime) {\r\n  return (DT.t2d(endTime) - DT.t2d(startTime)).toFixed(3);\r\n}\r\n\r\nconst timeFormatter = {\r\n  number2Time,\r\n  time2Number,\r\n  getTimeLength\r\n};\r\n\r\nexport default timeFormatter;\r\n","import Joi from \"joi-browser\";\r\nimport _ from \"lodash\";\r\nimport logger from \"../utils/logger\";\r\n\r\n// 00:00:29 或 00:00:29.320\r\nconst timeRegx = /^\\d+:[0-5][0-9]:[0-5][0-9](\\.[0-9]{1,3})?$/;\r\n\r\nexport const schema = {\r\n  startTime: Joi.string()\r\n    .regex(timeRegx)\r\n    .required()\r\n    .min(8)\r\n    .label(\"开始时间\"),\r\n  endTime: Joi.string()\r\n    .regex(timeRegx)\r\n    .required()\r\n    .min(8)\r\n    .label(\"结束时间\"),\r\n  content: Joi.string()\r\n    .required()\r\n    .max(100)\r\n    .min(1)\r\n    .label(\"文本内容\"),\r\n  start: Joi.number(),\r\n  end: Joi.number(),\r\n  length: Joi.number().greater(0)\r\n};\r\n\r\n//错误提示 模版\r\nconst errorSchema = {\r\n  startTime: \"格式如 00:00:29.320格式，可以不带小数，最少8个字符\",\r\n  endTime: \"格式如 00:00:29.320，可以不带小数，最少8个字符\",\r\n  content: \"需要在1-100个字符之间，不能为空\",\r\n  start: \"必须为数字\",\r\n  end: \"必须为数字\",\r\n  length: \"不能为负值或0，开始时间要大于结束时间\"\r\n};\r\n\r\n//全局 变量 和 变量名 的对应\r\nconst labelSchema = {\r\n  startTime: \"开始时间\",\r\n  endTime: \"结束时间\",\r\n  content: \"字幕文本内容\",\r\n  start: \"起始秒数\",\r\n  end: \"结束秒数\",\r\n  length: \"时长\"\r\n};\r\n\r\nexport function getEditingSubSchema() {\r\n  return {\r\n    startTime: schema.startTime,\r\n    endTime: schema.endTime,\r\n    content: schema.content,\r\n    start: schema.start,\r\n    end: schema.end,\r\n    length: schema.length\r\n  };\r\n}\r\n\r\nexport function getEditingErrorSchema() {\r\n  return {\r\n    startTime: errorSchema.startTime,\r\n    endTime: errorSchema.endTime,\r\n    content: errorSchema.content,\r\n    start: errorSchema.start,\r\n    end: errorSchema.end,\r\n    length: errorSchema.length\r\n  };\r\n}\r\n\r\nconst defaultOption = {\r\n  //配置项 关闭提前中断 收集所有错误\r\n  abortEarly: false,\r\n  //允许对象拥有其他的未知属性\r\n  allowUnknown: true,\r\n  //忽略具有函数值的未知键\r\n  skipFunctions: true\r\n};\r\n\r\n//全属性校验\r\nexport function validate(obj, schema, config) {\r\n  // https://www.jianshu.com/p/e6e277c1fda2\r\n  const option = {\r\n    ...defaultOption,\r\n    ...config\r\n  };\r\n  const result = Joi.validate(obj, schema, option).error;\r\n  //无错误 暂时返回false 表示通过校验 无错误\r\n  if (!result) return false;\r\n  //有错误 则返回一个出错的属性path数组\r\n  logger.clog(\"editingSub校验结果，出现的错误：\", result);\r\n  let errorPaths = [];\r\n  result.details.map(d => errorPaths.push(d.path[0]));\r\n  //去除重复的值\r\n  return _.uniq(errorPaths);\r\n}\r\n\r\n//单属性校验\r\nexport function validateProperty(name, value, sigleSchema, config) {\r\n  const obj = { [name]: value };\r\n  const option = {\r\n    ...defaultOption,\r\n    abortEarly: true,\r\n    ...config\r\n  };\r\n  const result = Joi.validate(obj, sigleSchema, option).error;\r\n  //有错误 则返回true\r\n  return result ? true : false;\r\n}\r\n\r\n//将errors对象 转为errorMessages 可读的数组\r\nexport function errors2messages(errors) {\r\n  if (!errors) return [];\r\n  const keys = Object.keys(errors);\r\n  const errorMessages = keys.map(key => {\r\n    return labelSchema[key] + \": \" + errors[key];\r\n  });\r\n  if (errorMessages.length === 0) {\r\n    errorMessages.push(\" \");\r\n  }\r\n  //返回消息数组\r\n  return errorMessages;\r\n}\r\n\r\n//校验time类型 00:00:29.320\r\nexport function validateTime(time) {\r\n  //有错误返回true 无错误返回false\r\n  return validateProperty(\"startTime\", time, {\r\n    startTime: schema[\"startTime\"]\r\n  });\r\n}\r\n\r\nconst validateService = {\r\n  schema,\r\n  getEditingSubSchema,\r\n  getEditingErrorSchema,\r\n  validate,\r\n  validateProperty,\r\n  errors2messages,\r\n  validateTime\r\n};\r\n\r\nexport default validateService;\r\n","import Sub from \"../model/sub\";\r\nimport timeFormatter from \"../utils/timeFormatter\";\r\nimport logger from \"../utils/logger\";\r\nimport config from \"../config/config.json\";\r\nimport validateService from \"./validateService\";\r\n\r\n//sub数组 存在localstorage的key\r\nconst subArrayKey = config.sub_storage_key || \"DefaultSubs\";\r\n\r\n//将字幕的秒数 转为 时:分:秒 的时间轴格式\r\nexport function toTime(number) {\r\n  return timeFormatter.number2Time(number);\r\n}\r\n\r\n//将时:分:秒 的时间轴格式 转为秒数\r\nexport function toNumber(time) {\r\n  return Number(timeFormatter.time2Number(time));\r\n}\r\n\r\n//计算两个time的时长\r\nexport function getTimeLength(startTime, endTime) {\r\n  return Number(timeFormatter.getTimeLength(startTime, endTime));\r\n}\r\n\r\n//PromiseExecutor 将字幕文件读取为字符串\r\nfunction readAsTextPE(resolve, reject, file) {\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n  //出错时触发\r\n  reader.onerror = (error) => {\r\n    reject(error);\r\n  };\r\n  //读取完成时 成功或失败 触发\r\n  reader.onload = () => {\r\n    //读取失败时 result为null\r\n    resolve(reader.result);\r\n  };\r\n}\r\n\r\n//将字幕文件读取为字符串\r\nexport async function readSubFileAsText(subFile) {\r\n  let text = \"\";\r\n  try {\r\n    text = await new Promise((resolve, reject) =>\r\n      readAsTextPE(resolve, reject, subFile)\r\n    );\r\n  } catch (e) {\r\n    logger.clog(\"字幕文件读取失败；\", e);\r\n    e.message = \"字幕文件读取失败；\";\r\n    throw e;\r\n  }\r\n  return text;\r\n}\r\n\r\n//PromiseExecutor 使用track分析vtt字幕 返回完成后的cues对象\r\nfunction analyseSubPE(resolve, reject, subUrl) {\r\n  const $video = document.createElement(\"video\");\r\n  const $track = document.createElement(\"track\");\r\n  $video.appendChild($track);\r\n  $track.default = true;\r\n  $track.kind = \"metadata\";\r\n  //这里需要执行很长时间\r\n  $track.src = subUrl;\r\n  //执行中出错\r\n  $track.onerror = (error) => {\r\n    reject(error);\r\n  };\r\n  //执行完成后 成功或失败\r\n  $track.onload = () => {\r\n    //返回cues对象\r\n    resolve($track.track.cues);\r\n  };\r\n}\r\n\r\n//创建字幕数组 参数是一个vtt字幕文件的url\r\nexport async function createSubArray(subUrl) {\r\n  let subCues = null;\r\n  try {\r\n    subCues = await new Promise((resolve, reject) =>\r\n      analyseSubPE(resolve, reject, subUrl)\r\n    );\r\n  } catch (e) {\r\n    logger.clog(\"字幕装载失败：\", e);\r\n    e.message = \"字幕装载失败\";\r\n    throw e;\r\n  }\r\n  const VTTCues = Array.from(subCues || {});\r\n  logger.clog(\"得到VTTCues数组：\", VTTCues);\r\n  const subArray = VTTCues.map((c) => {\r\n    return new Sub(c.startTime, c.endTime, c.text);\r\n  });\r\n  const fullSubArray = subArray.map((sub) => mapSubToFullModel(sub));\r\n  logger.clog(\"得到字幕数组：\", fullSubArray);\r\n  return fullSubArray;\r\n}\r\n\r\n//创建vtt字幕的Blob对象 方便track分析 参数为vtt格式的字符串 返回该对象的url\r\nexport function createVttSubBlobUrl(vttText) {\r\n  const vttBlob = new Blob([vttText], {\r\n    type: \"text/vtt\",\r\n  });\r\n  logger.clog(\"vtt字幕Blob对象\", vttBlob);\r\n  return URL.createObjectURL(vttBlob);\r\n}\r\n\r\n//规范化 将sub对象的time时间轴类型转为秒数分别拿出来 映射成localstorage的存储模型\r\nexport function mapSubToFullModel(sub) {\r\n  //小数点后补零 没有小数点则不补\r\n  const fStartTime = formateTime(sub.startTime);\r\n  const fEndTime = formateTime(sub.endTime);\r\n  return {\r\n    start: toNumber(fStartTime),\r\n    startTime: fStartTime,\r\n    end: toNumber(fEndTime),\r\n    endTime: fEndTime,\r\n    length: getTimeLength(fStartTime, fEndTime),\r\n    content: sub.content,\r\n  };\r\n}\r\n\r\n//PromiseExecutor 将字幕数组存入localStorage\r\nfunction storageSubsPE(resolve, reject, subArray) {\r\n  try {\r\n    const subs = subArray.map((sub) => mapSubToFullModel(sub));\r\n    const json = JSON.stringify(subs);\r\n    localStorage.setItem(subArrayKey, json);\r\n    resolve(json);\r\n  } catch (e) {\r\n    logger.clog(\"subs存入local时出错\", e);\r\n    reject(e);\r\n  }\r\n}\r\n\r\n//把sub数组存入localstorage\r\nexport function saveSubArray(subArray) {\r\n  //将sub对象的秒数转为time时间轴类型 并存入localStorage\r\n  return new Promise((resolve, reject) =>\r\n    storageSubsPE(resolve, reject, subArray)\r\n  );\r\n}\r\n\r\n//把sub数组从localstorage中删除\r\nexport function cleanSubArray() {\r\n  localStorage.removeItem(subArrayKey);\r\n}\r\n\r\n//PromiseExecutor 从localStorage中读取sub数组 可能会解析出错以及得到null 这里对null返回空数组\r\nfunction getParseSubArrayPE(resolve, reject) {\r\n  const subsJson = localStorage.getItem(subArrayKey);\r\n  try {\r\n    const subArray = JSON.parse(subsJson);\r\n    resolve(subArray || []);\r\n  } catch (e) {\r\n    logger.clog(\"读取local后，Json解析出错\", e);\r\n    reject(e);\r\n  }\r\n}\r\n\r\n//从localStorage中读取sub数组\r\nexport function getSubArray() {\r\n  return new Promise((resolve, reject) => getParseSubArrayPE(resolve, reject));\r\n}\r\n\r\n//处理开始时间 和 结束时间的 格式， 需要一个已经受过输入校验的time\r\nfunction formateTime(validatedTime) {\r\n  //针对开始和结束时间 小数点后补零 正则表达式捕获\r\n  const timeRegx = /^(\\d+:[0-5][0-9]:[0-5][0-9])(\\.[0-9]{1,3})?$/;\r\n  const found = validatedTime.match(timeRegx);\r\n  //有小数点\r\n  if (found && found[2]) {\r\n    let str = found[2];\r\n    while (str.length < 4) {\r\n      str += \"0\";\r\n    }\r\n    return found[1] + str;\r\n  }\r\n  //无小数点\r\n  if (found && found[1]) {\r\n    return found[1];\r\n  }\r\n  //未找到 说明time不符合规范 暂时这么处理\r\n  return \"00:00:00\";\r\n}\r\n\r\n//得到字幕的时间长度\r\nexport function getSubLength(sub) {\r\n  //需要先校验startTime和endTime的格式是否正确\r\n  const schema = {\r\n    startTime: validateService.schema[\"startTime\"],\r\n    endTime: validateService.schema[\"endTime\"],\r\n  };\r\n  const error = validateService.validate(sub, schema, { abortEarly: true });\r\n  if (error) {\r\n    return sub.length;\r\n  } else {\r\n    return getTimeLength(formateTime(sub.startTime), formateTime(sub.endTime));\r\n  }\r\n}\r\n\r\n//将字幕数组 转为 vtt格式的字符串， 即text文本\r\nexport function mapSubArray2Text(subArray) {\r\n  // subArray的格式必须符合存储规范\r\n  const vttCueStrArray = subArray.map(\r\n    (sub, index) =>\r\n      `${index + 1}\r\n${sub.startTime} --> ${sub.endTime}\r\n${sub.content}\r\n`\r\n  );\r\n  const vttText = \"WEBVTT\\n\\n\" + vttCueStrArray.join(\"\\n\");\r\n  logger.clog(vttText);\r\n  return vttText;\r\n}\r\n\r\n//通过url 下载文件\r\nexport function downloadFromUrl(url, fileName) {\r\n  //创建一个a标签\r\n  const aLink = document.createElement(\"a\");\r\n  //设为不可见\r\n  aLink.style.display = \"none\";\r\n  //将a标签的href设为url\r\n  aLink.href = url;\r\n  //a标签的download属性 设置文件名 ，浏览器将自动检测正确的文件类型\r\n  aLink.download = fileName;\r\n  //放入body里\r\n  document.body.appendChild(aLink);\r\n  //点击a标签\r\n  aLink.click();\r\n  //从body中移除a标签\r\n  document.body.removeChild(aLink);\r\n}\r\n\r\n//加工出字幕数组的url\r\nexport function createSubArrayUrl(subArray) {\r\n  if (!subArray || subArray.length === 0) return \"\";\r\n  //将数组转为vtt格式的字符串\r\n  const vttText = mapSubArray2Text(subArray);\r\n  //由字符串 转为vtt Blob文件对象 然后创建url\r\n  return createVttSubBlobUrl(vttText);\r\n}\r\n\r\n//下载编辑好的字幕文件 从存储中读取\r\nexport async function downloadSubFile() {\r\n  try {\r\n    //从存储中拿到字幕数组\r\n    const subArray = await getSubArray();\r\n    //当读取到的subArray是null 或者为空数组时 返回false\r\n    if (!subArray || subArray.length === 0) return false;\r\n    //加工出字幕数组的url\r\n    const url = createSubArrayUrl(subArray);\r\n    //设置文件名 通过url 下载字幕文件\r\n    downloadFromUrl(url, \"字幕.vtt\");\r\n    //返回true 表示下载事件响应成功\r\n    return true;\r\n  } catch (e) {\r\n    logger.clog(\"下载字幕出错：\", e);\r\n    //下载失败 抛出异常\r\n    throw e;\r\n  }\r\n}\r\n\r\n//返回一个默认的初始字幕 给定开始和结束时间 时长根据条件变化\r\nexport function getDefaultSub(startTime, endTime) {\r\n  logger.clog(\"插入参数：\", startTime, endTime, typeof (startTime + endTime));\r\n  //默认文本\r\n  const defaultContent = \"默认文本\";\r\n  //默认的开始 结束 的秒数\r\n  let defaultStart = 0;\r\n  let defaultEnd = 0.001;\r\n  //当发现传入的两个参数都是Number时\r\n  if (typeof (startTime + endTime) === \"number\") {\r\n    defaultStart = Number(startTime.toFixed(3));\r\n    defaultEnd = Number(endTime.toFixed(3));\r\n    return new Sub(defaultStart, defaultEnd, defaultContent);\r\n  }\r\n  //不是number，则为字符串 校验传入的 时间轴类型\r\n  const startIsErr = validateService.validateTime(startTime);\r\n  const endIsErr = validateService.validateTime(endTime);\r\n  //如果通过校验\r\n  if (!startIsErr && !endIsErr) {\r\n    //格式化后 转为秒数\r\n    defaultStart = toNumber(formateTime(startTime));\r\n    defaultEnd = toNumber(formateTime(endTime));\r\n  }\r\n  //不是number 可能通过校验\r\n  return new Sub(defaultStart, defaultEnd, defaultContent);\r\n}\r\n\r\n// 交给worker前 需要将字幕数组转为规范模式\r\n//把subArray加工成url的worker 的工作内容 封装为blob\r\nfunction getSubToUrlWorkBlob() {\r\n  const workContent = `this.addEventListener('message', function (e) {\r\n    //转为文本\r\n    // subArray的格式必须符合存储规范\r\n    const subArray = e.data;\r\n    const vttCueStrArray = subArray.map(\r\n    (sub, index) =>\r\n      \\`\\${index + 1}\r\n\\${sub.startTime} --> \\${sub.endTime}\r\n\\${sub.content}\r\n\\`\r\n  );\r\n    const vttText = \"WEBVTT\\\\n\\\\n\" + vttCueStrArray.join(\"\\\\n\");\r\n    const vttBlob = new Blob([vttText], {\r\n      type: \"text/vtt\"\r\n    });\r\n    const subUrl = URL.createObjectURL(vttBlob);\r\n    this.postMessage(subUrl);\r\n  }, false);`;\r\n  return new Blob([workContent]);\r\n}\r\n\r\n//创建一个worker （进程） ， 用于加工出subArray的 url\r\nexport function createSubUrlWorker(receiveUrl) {\r\n  const workBlob = getSubToUrlWorkBlob();\r\n  const subUrlWorker = new Worker(URL.createObjectURL(workBlob));\r\n  //设置 收到worker回复时的处理\r\n  subUrlWorker.onmessage = (event) => {\r\n    //subUrlworker 回复的为最新的字幕url\r\n    const subUrl = event.data;\r\n    //接收worker回复的url\r\n    receiveUrl(subUrl);\r\n  };\r\n  return subUrlWorker;\r\n}\r\n\r\n//将字幕按照开始时间排序\r\nexport function sortSubArray(subArray) {\r\n  const sortedArray = [...subArray];\r\n  sortedArray.sort((pre, next) => {\r\n    return pre.start - next.start;\r\n  });\r\n  return sortedArray;\r\n}\r\n\r\nconst subService = {\r\n  readSubFileAsText,\r\n  createSubArray,\r\n  createVttSubBlobUrl,\r\n  mapSubToFullModel,\r\n  saveSubArray,\r\n  cleanSubArray,\r\n  getSubArray,\r\n  getSubLength,\r\n  mapSubArray2Text,\r\n  createSubArrayUrl,\r\n  downloadFromUrl,\r\n  downloadSubFile,\r\n  getDefaultSub,\r\n  toTime,\r\n  toNumber,\r\n  getTimeLength,\r\n  createSubUrlWorker,\r\n  sortSubArray,\r\n};\r\n\r\nexport default subService;\r\n","import React from \"react\";\r\n\r\nconst BootstrapToast = ({ head, small, dataArray, type }) => {\r\n  const typeList = {\r\n    primary: \"#007aff\",\r\n    warning: \"#ff8300\"\r\n  };\r\n  return (\r\n    <div\r\n      className=\"toast show\"\r\n      role=\"alert\"\r\n      aria-live=\"assertive\"\r\n      aria-atomic=\"true\"\r\n      style={{\r\n        border: \"none\",\r\n        boxShadow: \"none\"\r\n      }}\r\n    >\r\n      <div className=\"toast-header\">\r\n        <svg\r\n          className=\"rounded mr-2\"\r\n          width=\"15\"\r\n          height=\"15\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          preserveAspectRatio=\"xMidYMid slice\"\r\n          focusable=\"false\"\r\n          role=\"img\"\r\n        >\r\n          <rect width=\"100%\" height=\"100%\" fill={typeList[type]}></rect>\r\n        </svg>\r\n        <strong className=\"mr-auto\">{head}</strong>\r\n        <small>{small || '提示'}</small>\r\n      </div>\r\n      <div className=\"toast-body\">\r\n        <ul className=\"list-group list-group-flush\">\r\n          {dataArray.map(value => (\r\n            <li className=\"list-group-item\" key={value}>\r\n              {value}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BootstrapToast;\r\n","import React from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Slide, Zoom, Flip, Bounce } from \"react-toastify\";\r\nimport BootstrapToast from \"../components/common/bootstrapToast\";\r\n\r\nexport const transitions = {\r\n  slide: Slide,\r\n  zoom: Zoom,\r\n  flip: Flip,\r\n  bounce: Bounce\r\n};\r\n\r\nexport function notify(\r\n  content,\r\n  positionStr = \"top_left\",\r\n  typeStr = \"DEFAULT\",\r\n  config = null,\r\n  transition = \"bounce\"\r\n) {\r\n  const postionStrUpper = (positionStr + \"\").toUpperCase();\r\n  const typeStrUpper = (typeStr + \"\").toUpperCase();\r\n  const toastConfig = {\r\n    position: toast.POSITION[postionStrUpper],\r\n    type: toast.TYPE[typeStrUpper],\r\n    // hideProgressBar: true,\r\n    transition: transitions[transition],\r\n    ...config\r\n  };\r\n  return toast(content, toastConfig);\r\n}\r\n\r\n//bootstrap样式的toast 需要一个字符串数组\r\nexport function bootstrapToast(\r\n  strArray,\r\n  type = \"warning\",\r\n  position = \"top_left\",\r\n  config,\r\n  transition = \"zoom\"\r\n) {\r\n  return notify(\r\n    <BootstrapToast head=\"请检查输入格式\" dataArray={strArray} type={type} />,\r\n    position,\r\n    \"default\",\r\n    config,\r\n    transition\r\n  );\r\n}\r\n\r\n//对应id的toast正在工作 则返回true 否则返回false\r\nexport function isActive(toastId) {\r\n  return toast.isActive(toastId);\r\n}\r\n\r\n//关闭一个提示\r\nexport function done(toastId) {\r\n  return toast.done(toastId);\r\n}\r\n\r\nconst notifier = {\r\n  notify,\r\n  bootstrapToast,\r\n  isActive,\r\n  done\r\n};\r\n\r\nexport default notifier;\r\n","const subEditorPath = \"/\";\r\nconst trackTest = \"/test\";\r\n// http://localhost:2020\r\nconst home = `${window.location.protocol}//${window.location.host}/`;\r\n\r\nconst guideService = {\r\n  home,\r\n  subEditorPath,\r\n  trackTest\r\n};\r\n\r\nexport default guideService;\r\n","import logger from \"../utils/logger\";\r\nimport guideService from \"./guideService\";\r\n\r\nexport function createVideoType(fileType) {\r\n  if (typeof fileType !== \"string\") return \"\";\r\n  //video/x-flv video/mp4\r\n  const videoRegx = /^video\\/(mp4|x-(flv))+$/;\r\n  const found = fileType.match(videoRegx);\r\n  logger.clog(\"匹配视频类型\", found);\r\n  const videoType =\r\n    found && found[2] ? found[2] + \"Custom\" : found ? found[1] : \"\";\r\n  logger.clog(\"匹配和拼接的结果\", videoType);\r\n  return videoType;\r\n}\r\n\r\n//返回默认的视频封面\r\nexport function getDefaultPicUrl() {\r\n  return `${guideService.home}subEditor.png`;\r\n}\r\n\r\nconst videoService = {\r\n  createVideoType,\r\n  getDefaultPicUrl,\r\n};\r\n\r\nexport default videoService;\r\n","import NProgress from \"nprogress\";\r\n\r\n//默认配置\r\nconst defaultConfig = {\r\n  minimum: 0.1\r\n};\r\n//初始化默认配置\r\nNProgress.configure(defaultConfig);\r\n\r\nfunction start(number) {\r\n  return number ? NProgress.start().set(number) : NProgress.start();\r\n}\r\n\r\nfunction set(number) {\r\n  return number && NProgress.set(number);\r\n}\r\n\r\nfunction inc(number) {\r\n  return number && NProgress.inc(number);\r\n}\r\n\r\nfunction done() {\r\n  NProgress.done();\r\n}\r\n\r\nconst progressor = {\r\n  start,\r\n  set,\r\n  inc,\r\n  done\r\n};\r\n\r\nexport default progressor;\r\n","import React, { PureComponent } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport guideService from \"../services/guideService\";\r\nimport progressor from \"../utils/progressor\";\r\nimport notifier from \"../utils/notifier\";\r\nimport subService from \"../services/subService\";\r\nimport logger from \"../utils/logger\";\r\nimport SubEditorPackage from \"../../package.json\";\r\n\r\nconst HeaderWrap = styled.header`\r\n  //导航栏固定50px\r\n  height: 50px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: hsla(0, 0%, 100%, 0.8);\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);\r\n\r\n  .band {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    padding-left: 30px;\r\n    flex-grow: 6;\r\n  }\r\n\r\n  .body {\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    flex-grow: 1;\r\n\r\n    .buttons {\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .links {\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-around;\r\n\r\n      margin-right: 40px;\r\n      i {\r\n        margin-right: 5px;\r\n      }\r\n      a {\r\n        color: #4c7b7b;\r\n        text-decoration: none;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        padding: 0 10px 0 10px;\r\n\r\n        &:hover {\r\n          color: #66cccc;\r\n          //   text-decoration: underline;\r\n        }\r\n      }\r\n\r\n      .avatar {\r\n        border-radius: 50%;\r\n        height: 40px;\r\n        border: 1px solid #ddd;\r\n        padding: 4px;\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst LogoYa = styled.a`\r\n  text-decoration: none;\r\n  font-size: 22px;\r\n  font-style: italic;\r\n  font-weight: 400;\r\n  color: #66cccc;\r\n\r\n  :hover {\r\n    text-decoration: none;\r\n    color: #66cccc;\r\n  }\r\n\r\n  .version {\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n    margin-left: 20px;\r\n    opacity: 0.4;\r\n    font-style: italic;\r\n    color: #262a3e;\r\n  }\r\n`;\r\n\r\nconst BtnYbutton = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 30px;\r\n  // height: 100%;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  color: #ccc;\r\n  background: #529393;\r\n  border-style: none;\r\n  border-radius: 20px;\r\n  padding: 9px 16px;\r\n  margin-right: 10px;\r\n  // outline: none;\r\n  transition: all 300ms linear 0s;\r\n\r\n  span {\r\n    display: none;\r\n  }\r\n\r\n  &:hover {\r\n    color: #fff;\r\n    background-color: #43d7d7;\r\n    height: 40px;\r\n    span {\r\n      display: block;\r\n    }\r\n    i {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  i {\r\n    margin-right: 0px;\r\n  }\r\n`;\r\n\r\nconst BtnYbuttonDanger = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 30px;\r\n  // height: 100%;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  color: #ccc;\r\n  background: #ec6464;\r\n  border-style: none;\r\n  border-radius: 20px;\r\n  padding: 9px 16px;\r\n  margin-right: 10px;\r\n  // outline: none;\r\n  transition: all 300ms linear 0s;\r\n\r\n  span {\r\n    display: none;\r\n  }\r\n\r\n  &:hover {\r\n    color: #ec6464;\r\n    background-color: #e1e1e1;\r\n    height: 40px;\r\n    span {\r\n      display: block;\r\n    }\r\n    i {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  i {\r\n    margin-right: 0px;\r\n  }\r\n`;\r\n\r\n//利用了绝对定位 绝对定位可以让元素脱离正常的文档流，实现更灵活的布局方式\r\nconst FileYinput = styled.input`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n`;\r\n\r\nclass Header extends PureComponent {\r\n  handleSubFile = async (e) => {\r\n    progressor.start();\r\n    const file = e.currentTarget.files[0];\r\n    const { updateSubArray, updateSubUrl } = this.props;\r\n    try {\r\n      const vttStr = await subService.readSubFileAsText(file);\r\n      //开一个预览字幕的提示\r\n      notifier.notify(<p>{vttStr}</p>, \"top_center\", \"default\", {\r\n        autoClose: false,\r\n        className: \"textReader\",\r\n      });\r\n      const subUrl = subService.createVttSubBlobUrl(vttStr);\r\n      updateSubUrl(subUrl, true);\r\n      //从url中读取字幕数组\r\n      const subArray = await subService.createSubArray(subUrl);\r\n      updateSubArray(subArray, true);\r\n      //释放url资源\r\n      // URL.revokeObjectURL(subUrl);\r\n      // logger.clog(\"读入完成，释放url资源：\", subUrl);\r\n    } catch (e) {\r\n      notifier.notify(`<Header>${e.message}`, \"top_center\", \"warning\");\r\n    }\r\n    progressor.done();\r\n  };\r\n\r\n  //拿到上传的视频\r\n  handleVideoFile = (e) => {\r\n    progressor.start();\r\n    const file = e.currentTarget.files[0];\r\n    const $video = document.createElement(\"video\");\r\n    logger.clog(\"创建元素：\", $video, $video.canPlayType(file.type));\r\n    const videoUrl = URL.createObjectURL(file);\r\n    logger.clog(\"视频url\", videoUrl);\r\n    const { onSwitch } = this.props;\r\n    onSwitch(file.type, videoUrl);\r\n    progressor.done();\r\n  };\r\n\r\n  //下载字幕\r\n  handleSubFileDownload = () => {\r\n    const { onDownload } = this.props;\r\n    onDownload();\r\n  };\r\n\r\n  //清空字幕\r\n  handleSubClean = () => {\r\n    const { onClean } = this.props;\r\n    onClean();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <HeaderWrap>\r\n        <div className=\"band\">\r\n          <LogoYa href={guideService.subEditorPath} title=\"Copyright © 2020 SH\">\r\n            SubEditor\r\n            <span className=\"version\">version {SubEditorPackage.version}</span>\r\n          </LogoYa>\r\n        </div>\r\n\r\n        <div className=\"body\">\r\n          <div className=\"buttons\">\r\n            <BtnYbutton>\r\n              <i className=\"fa fa-folder-open\" aria-hidden=\"true\"></i>\r\n              <FileYinput\r\n                className=\"uploadSubtitle\"\r\n                type=\"file\"\r\n                name=\"file\"\r\n                onChange={this.handleSubFile}\r\n              />\r\n              <span>打开字幕</span>\r\n            </BtnYbutton>\r\n            <BtnYbutton>\r\n              <i className=\"fa fa-play-circle\" aria-hidden=\"true\"></i>\r\n              <FileYinput\r\n                className=\"uploadVideo\"\r\n                type=\"file\"\r\n                name=\"file\"\r\n                onChange={this.handleVideoFile}\r\n              />\r\n              <span>打开视频</span>\r\n            </BtnYbutton>\r\n            <BtnYbutton onClick={this.handleSubFileDownload}>\r\n              <i className=\"fa fa-cloud-download\" aria-hidden=\"true\"></i>\r\n              <span>下载字幕</span>\r\n            </BtnYbutton>\r\n            <BtnYbuttonDanger onClick={this.handleSubClean}>\r\n              <i className=\"fa fa-trash\" aria-hidden=\"true\"></i>\r\n              <span>清空字幕</span>\r\n            </BtnYbuttonDanger>\r\n          </div>\r\n          <div className=\"links\">\r\n            <a href=\"https://github.com/Shirtiny/SubEditor\" title=\"前往Github\">\r\n              <i className=\"fa fa-github\" aria-hidden=\"true\"></i>Github\r\n            </a>\r\n            <a href=\"http://bbs.vcb-s.com/\" title=\"用户\">\r\n              <img\r\n                className=\"avatar\"\r\n                alt=\"avatar\"\r\n                src=\"http://bbs.vcb-s.com/data/attachment/common/d6/common_39_icon.png\"\r\n              />\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </HeaderWrap>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport DPlayer from \"react-dplayer\";\r\nimport flvjs from \"flv.js\";\r\nimport logger from \"../utils/logger\";\r\n\r\nconst VideoWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 70%;\r\n  padding: 15px;\r\n  // border-bottom: 1px solid rgb(10, 10, 10);\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\r\n\r\n  .dplayer_DefaultSize {\r\n    width: 90%;\r\n    height: 90%;\r\n  }\r\n\r\n  .dplayer {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n  }\r\n\r\n  .dplayer_disable {\r\n    pointer-events: none;\r\n  }\r\n\r\n  .playerBorder {\r\n    border: 4px solid #529393;\r\n    border-radius: 0.5em;\r\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);\r\n  }\r\n\r\n  .hiddenSubs {\r\n    ::cue {\r\n      opacity: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nclass VideoPlayer extends Component {\r\n  //组件是否需要更新 可以使用PureComponent来代替手写shouldComponentUpdate 它会自动浅比较前后的props有没有变化 这里不需要，因为VideoPlayer的props并不需要变化\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return false;\r\n  }\r\n\r\n  //设置播放器\r\n  load = (player) => {\r\n    const { initPlayer } = this.props;\r\n    initPlayer(player);\r\n  };\r\n\r\n  error = () => {\r\n    const $playerContainer = document.getElementById(\"player\");\r\n    //错误时 将播放器设为默认大小  无法点击\r\n    $playerContainer.classList.add(\"dplayer_DefaultSize\", \"dplayer_disable\");\r\n  };\r\n\r\n  //视频可以播放\r\n  canPlay = () => {\r\n    const { player, onVideoCanPlay } = this.props;\r\n    //提示可播放 不然会有加载失败的提示残留\r\n    player.notice(\"√\", 1500, 0.8);\r\n    //将subArray 交给worker生成subUrl\r\n    onVideoCanPlay();\r\n    const $playerContainer = document.getElementById(\"player\");\r\n    //可以播放时 移除 无法点击\r\n    $playerContainer.classList.remove(\"dplayer_disable\");\r\n  };\r\n\r\n  //播放中\r\n  playing = () => {\r\n    const { onVideoPlaying } = this.props;\r\n    onVideoPlaying();\r\n  };\r\n\r\n  //全屏时\r\n  fullscreen = () => {\r\n    const $playerContainer = document.getElementById(\"player\");\r\n    $playerContainer.classList.remove(\"playerBorder\");\r\n    $playerContainer.style.resize = \"\";\r\n  };\r\n\r\n  //全屏取消时\r\n  fullscreenCancel = () => {\r\n    const $playerContainer = document.getElementById(\"player\");\r\n    $playerContainer.classList.add(\"playerBorder\");\r\n    $playerContainer.style.resize = \"both\";\r\n  };\r\n\r\n  render() {\r\n    const { videoUrl, picUrl, subUrl } = this.props;\r\n    return (\r\n      <VideoWrapper id=\"playerBox\">\r\n        <DPlayer\r\n          id=\"player\"\r\n          className={\r\n            \"playerBorder dplayer_disable \" +\r\n            (picUrl ? \"\" : \"dplayer_DefaultSize\")\r\n          }\r\n          style={{ resize: \"both\" }}\r\n          options={{\r\n            video: {\r\n              url: videoUrl,\r\n              pic: picUrl,\r\n              customType: {\r\n                flvCustom: function (videoElement, player) {\r\n                  logger.clog(\"支持flv\");\r\n                  if (flvjs.isSupported()) {\r\n                    const flvPlayer = flvjs.createPlayer({\r\n                      type: \"flv\",\r\n                      url: videoElement.src,\r\n                      hasAudio: true,\r\n                    });\r\n                    flvPlayer.attachMediaElement(videoElement);\r\n                    flvPlayer.load();\r\n                  }\r\n                },\r\n              },\r\n            },\r\n            subtitle: {\r\n              url: subUrl,\r\n              type: \"webvtt\",\r\n              fontSize: \"25px\",\r\n              bottom: \"3%\",\r\n              color: \"rgb(37, 211, 211)\",\r\n            },\r\n            contextmenu: [\r\n              {\r\n                text: \"SubEditor\",\r\n                // link: \"https://github.com/DIYgod/DPlayer\",\r\n              },\r\n              {\r\n                text: \"使内容的高度适应于宽度\",\r\n                click: (player) => {\r\n                  const $playerContainer = document.getElementById(\"player\");\r\n                  $playerContainer.style.height = \"\";\r\n                },\r\n              },\r\n              {\r\n                text: \"默认宽度和高度\",\r\n                click: (player) => {\r\n                  const $playerContainer = document.getElementById(\"player\");\r\n                  $playerContainer.style.height = \"\";\r\n                  $playerContainer.style.width = \"90%\";\r\n                },\r\n              },\r\n              {\r\n                text: \"chrome字幕隐藏/显示\",\r\n                click: (player) => {\r\n                  const video = player.video;\r\n                  const index = video.className.indexOf(\"hiddenSubs\");\r\n                  if (index > 0) {\r\n                    video.classList.remove(\"hiddenSubs\");\r\n                  } else {\r\n                    video.classList.add(\"hiddenSubs\");\r\n                  }\r\n                },\r\n              },\r\n            ],\r\n            theme: \"#ccc\",\r\n            loop: true,\r\n          }}\r\n          onLoad={this.load}\r\n          onError={this.error}\r\n          onCanplay={this.canPlay}\r\n          onPlaying={this.playing}\r\n          onFullscreen={this.fullscreen}\r\n          onFullscreenCancel={this.fullscreenCancel}\r\n        />\r\n      </VideoWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoPlayer;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst InputYinput = styled.input`\r\n  font-size: 14px;\r\n  color: #495057;\r\n  background-color: #fff;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 0.25rem;\r\n  background-clip: padding-box;\r\n\r\n  height: calc(1.5em + 0.5rem + 2px);\r\n  padding: 0.25rem 0.25rem;\r\n  font-size: 0.875rem;\r\n  line-height: 1.5;\r\n  border-radius: 0.2rem;\r\n\r\n  &.input_success {\r\n    :focus {\r\n      border-color: #28a745;\r\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\r\n    }\r\n  }\r\n  &.input_error {\r\n    border-color: #dc3545;\r\n    :focus {\r\n      border-color: #28a745;\r\n      box-shadow: 0 0 0 0.2rem rgba(232, 43, 43, 0.3);\r\n    }\r\n  }\r\n`;\r\n\r\nconst Input = ({\r\n  className,\r\n  type,\r\n  name,\r\n  value,\r\n  onChange,\r\n  disabled,\r\n  style,\r\n  errors\r\n}) => {\r\n  return (\r\n    <InputYinput\r\n      disabled={disabled}\r\n      className={[...className, errors[name] ? \"input_error\" : \"input_success\"]}\r\n      type={type}\r\n      value={value}\r\n      onChange={event => onChange(name, event.currentTarget.value)}\r\n      style={{ ...style }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Input from \"./common/input\";\r\n\r\nconst RowWrap = styled.div`\r\n  .rowClasses {\r\n    background-color: #f2f2f2;\r\n    // border-bottom: 1px solid rgb(36, 41, 45);\r\n    min-width: 650px;\r\n    transition: all 0.15s ease;\r\n\r\n    //取消浏览器的双击选中\r\n    -moz-user-select: none; /*火狐*/\r\n    -webkit-user-select: none; /*webkit浏览器*/\r\n    -ms-user-select: none; /*IE10*/\r\n    -khtml-user-select: none; /*早期浏览器*/\r\n    user-select: none;\r\n\r\n    &.odd {\r\n      background-color: #fff;\r\n    }\r\n\r\n    &.highlight {\r\n      background-color: #2196f3;\r\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\r\n    }\r\n\r\n    &.illegal {\r\n      background-color: #c75123;\r\n      text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\r\n    }\r\n\r\n    .rowT {\r\n      padding: 10px 5px;\r\n      text-align: center;\r\n    }\r\n\r\n    &: hover {\r\n      background-color: #529393;\r\n      color: #fff;\r\n      //字稍微大些\r\n      font-size: 14px;\r\n    }\r\n\r\n    &.onEditing {\r\n      background-color: #66cccc;\r\n\r\n      //编辑时返回隐藏 非编辑状态返回显示\r\n      .display_onEditing {\r\n        display: block !important;\r\n      }\r\n      .hidden_onEditing {\r\n        display: none !important;\r\n      }\r\n    }\r\n\r\n    .editing_default_hidden {\r\n      //默认隐藏\r\n      display: none;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n\r\n    .operation {\r\n      display: flex;\r\n      justify-content: center;\r\n\r\n      i {\r\n        width: 25px;\r\n        cursor: pointer;\r\n        font-size: 16px;\r\n        &: hover {\r\n          //图标粗些\r\n          font-weight: 600;\r\n          // color: #ccc;\r\n          color: #82a8b7;\r\n          &.deleteIcon {\r\n            color: #f5f239;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .lineBox {\r\n    display: none;\r\n    height: 0;\r\n    width: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0px;\r\n    border-bottom: 0px dashed #529393;\r\n    box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n    transition: color, border-color 0.3s ease-in-out;\r\n    &:hover {\r\n      display: block;\r\n      bottom: -5px;\r\n      border-bottom: 10px solid #02c0ff;\r\n      .insertBtn {\r\n        color: #02c0ff !important;\r\n        bottom: 10px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .insertBtn {\r\n    position: absolute;\r\n    right: 4px;\r\n    width: 20px;\r\n    height: 20px;\r\n    bottom: 15px;\r\n  }\r\n\r\n  //当scroll滚到当前row row的动画\r\n  .scrollToRowAnimation {\r\n    animation: scrollToRowAnimation 3s;\r\n    //播放次数无限制\r\n    // animation-iteration-count: infinite;\r\n  }\r\n\r\n  .scrollIndexBackColor {\r\n    transition: background-color 0.5s ease-in;\r\n    background-color: #04e8e8 !important;\r\n    &:hover {\r\n      color: black;\r\n    }\r\n  }\r\n`;\r\n//单击次数 用来区分双击和单击 解决onDoubleClick时触发onclick的问题\r\nlet clickCount = 0;\r\n\r\nconst SubRow = ({\r\n  index,\r\n  style,\r\n  className,\r\n  rowData: sub,\r\n  onRowRemove,\r\n  onRowEdit,\r\n  onRowClick,\r\n  onRowCommit,\r\n  onRowCancel,\r\n  onRowInsert,\r\n  editingSub,\r\n  errors,\r\n  onInputValueChange,\r\n  displayIndex,\r\n  scrollIndex,\r\n}) => {\r\n  const hiddenOnEditing = \"hidden_onEditing\";\r\n  const displayOnEditing = [\"editing_default_hidden\", \"display_onEditing\"].join(\r\n    \" \"\r\n  );\r\n  //取消浏览器的双击选中 使用了css代替\r\n  // document.onselectstart = function() {\r\n  //   return false;\r\n  // };\r\n  return (\r\n    <RowWrap>\r\n      <div\r\n        key={index}\r\n        style={style}\r\n        className={[\r\n          className,\r\n          \"rowClasses\",\r\n          index % 2 ? \"odd\" : \"\",\r\n          sub.editing ? \"onEditing\" : \"\",\r\n          scrollIndex === index ? \"scrollIndexBackColor\" : \"\",\r\n        ].join(\" \")}\r\n        onClick={() => {\r\n          clickCount += 1;\r\n          setTimeout(() => {\r\n            if (clickCount === 1) {\r\n              onRowClick(sub);\r\n            } else if (clickCount === 2) {\r\n              onRowEdit(sub);\r\n            }\r\n            //重置count\r\n            clickCount = 0;\r\n          }, 200);\r\n        }}\r\n      >\r\n        {/* 操作按钮 */}\r\n        <div className=\"rowT operation\" style={{ width: 90 }}>\r\n          <i\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onRowEdit(sub);\r\n            }}\r\n            className={`fa fa-pencil ${hiddenOnEditing}`}\r\n            title=\"编辑\"\r\n          ></i>\r\n          <i\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onRowCommit(sub);\r\n            }}\r\n            className={`fa fa-check-circle-o ${displayOnEditing}`}\r\n            title=\"保存\"\r\n          ></i>\r\n          <i\r\n            className=\"fa fa-times deleteIcon\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onRowRemove(sub);\r\n            }}\r\n            title=\"删除\"\r\n          ></i>\r\n        </div>\r\n        {/* 开始时间 */}\r\n        <div className=\"rowT\" style={{ width: 100 }}>\r\n          <span className={`${hiddenOnEditing}`}>{sub.startTime}</span>\r\n          <Input\r\n            className={[displayOnEditing]}\r\n            type=\"text\"\r\n            name=\"startTime\"\r\n            value={editingSub.startTime}\r\n            onChange={onInputValueChange}\r\n            errors={errors}\r\n          />\r\n        </div>\r\n        {/* 结束时间 */}\r\n        <div className=\"rowT\" style={{ width: 100 }}>\r\n          <span className={`${hiddenOnEditing}`}>{sub.endTime}</span>\r\n          <Input\r\n            className={[displayOnEditing]}\r\n            type=\"text\"\r\n            name=\"endTime\"\r\n            value={editingSub.endTime}\r\n            onChange={onInputValueChange}\r\n            errors={errors}\r\n          />\r\n        </div>\r\n        {/* 时长 */}\r\n        <div className=\"rowT\" style={{ width: 100 }}>\r\n          <span className={`${hiddenOnEditing}`}>{sub.length}</span>\r\n          <span className={`${displayOnEditing}`}>{editingSub.length}</span>\r\n        </div>\r\n        {/* 文本内容 */}\r\n        <div className=\"rowT\" style={{ flex: 1 }}>\r\n          <span className={`${hiddenOnEditing}`}>{sub.content}</span>\r\n          <Input\r\n            className={[displayOnEditing]}\r\n            type=\"text\"\r\n            name=\"content\"\r\n            value={editingSub.content}\r\n            onChange={onInputValueChange}\r\n            errors={errors}\r\n          />\r\n        </div>\r\n        {/* 序号 ， 取消按钮 ， 插入按钮*/}\r\n        <div className=\"rowT operation\" style={{ width: 50 }}>\r\n          <span\r\n            style={{ display: displayIndex ? \"block\" : \"none\" }}\r\n            className={`${hiddenOnEditing}`}\r\n          >\r\n            {index}\r\n          </span>\r\n          <i\r\n            onClick={(e) => {\r\n              //阻止事件传播 （阻止传给父元素\r\n              e.stopPropagation();\r\n              onRowCancel(sub);\r\n            }}\r\n            className={`fa fa-reply ${displayOnEditing}`}\r\n            title=\"取消编辑\"\r\n          ></i>\r\n          <div\r\n            className={`${hiddenOnEditing} lineBox `}\r\n            style={{ display: displayIndex ? \"none\" : \"block\" }}\r\n          >\r\n            <i\r\n              className={`fa fa-plus-square  insertBtn`}\r\n              title=\"插入字幕\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onRowInsert(sub);\r\n              }}\r\n            ></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </RowWrap>\r\n  );\r\n};\r\n\r\nexport default SubRow;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst HeaderRowWrap = styled.div`\r\n  background: #c0d9d9;\r\n  display: flex;\r\n  min-width: 650px;\r\n\r\n  .rowT {\r\n    padding: 10px 5px;\r\n    font-style: normal;\r\n    font-weight: normal;\r\n    font-size: 14px;\r\n    text-align: center;\r\n    text-transform: none;\r\n  }\r\n\r\n  .buttonLike {\r\n    position: relative;\r\n    background: #ffffff;\r\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 30px;\r\n    // margin-right: 10px;\r\n    padding: 9px 16px;\r\n    border-style: none;\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n    transition: all 200ms linear 0s;\r\n\r\n    i {\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n\r\n  .switchButton {\r\n    cursor: pointer;\r\n    &:hover {\r\n      color: #fff;\r\n      background-color: #43d7d7;\r\n      span {\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n\r\n  .stayButton {\r\n    height: 100%;\r\n    width: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0px;\r\n    cursor: pointer;\r\n    span {\r\n      position: relative;\r\n      top: 4px;\r\n    }\r\n    transition: all 0.3s ease;\r\n    &:hover {\r\n      color: #fff;\r\n      background-color: #43d7d7;\r\n    }\r\n  }\r\n`;\r\n\r\nconst SubHeaderRow = props => {\r\n  const {\r\n    displayIndex,\r\n    onDisplayIndexSwitch,\r\n    subArrayLenIsZero,\r\n    onInsert\r\n  } = props;\r\n  return (\r\n    <HeaderRowWrap>\r\n      <div className=\"rowT\" style={{ width: 100 }}>\r\n        <div className=\"buttonLike\">\r\n          <span style={{ display: subArrayLenIsZero ? \"none\" : \"block\" }}>\r\n            <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>编辑\r\n          </span>\r\n          <div\r\n            onClick={() => onInsert()}\r\n            className=\"stayButton\"\r\n            style={{ display: subArrayLenIsZero ? \"block\" : \"none\" }}\r\n          >\r\n            <span>\r\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>新建\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"rowT\" style={{ width: 100 }}>\r\n        <span className=\"buttonLike\">\r\n          <i className=\"fa fa-step-backward\" aria-hidden=\"true\"></i>\r\n          开始\r\n        </span>\r\n      </div>\r\n      <div className=\"rowT\" style={{ width: 100 }}>\r\n        <span className=\"buttonLike\">\r\n          <i className=\"fa fa-step-forward\" aria-hidden=\"true\"></i>\r\n          结束\r\n        </span>\r\n      </div>\r\n      <div className=\"rowT\" style={{ width: 100 }}>\r\n        <span className=\"buttonLike\">\r\n          <i className=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\r\n          时长\r\n        </span>\r\n      </div>\r\n      <div className=\"rowT\" style={{ flex: 1 }}>\r\n        <span className=\"buttonLike \">\r\n          <i className=\"fa fa-text-width\" aria-hidden=\"true\"></i>内容\r\n        </span>\r\n      </div>\r\n      <div className=\"rowT\" style={{ width: 50 }}>\r\n        <div\r\n          className=\"buttonLike switchButton\"\r\n          onClick={() => onDisplayIndexSwitch(!displayIndex)}\r\n        >\r\n          <span\r\n            style={{ display: displayIndex ? \"block\" : \"none\" }}\r\n            className=\" fa fa-sort-amount-asc\"\r\n            title=\"切换到功能\"\r\n          ></span>\r\n          <span\r\n            style={{ display: displayIndex ? \"none\" : \"block\" }}\r\n            className=\" fa fa-sliders\"\r\n            title=\"切换到序号\"\r\n          ></span>\r\n        </div>\r\n      </div>\r\n    </HeaderRowWrap>\r\n  );\r\n};\r\n\r\nexport default SubHeaderRow;\r\n","import React, { PureComponent } from \"react\";\r\nimport { Table } from \"react-virtualized\";\r\nimport styled from \"styled-components\";\r\nimport SubRow from \"./subRow\";\r\nimport SubHeaderRow from \"./subHeaderRow\";\r\nimport subService from \"../services/subService\";\r\nimport validateService from \"../services/validateService\";\r\nimport logger from \"../utils/logger\";\r\nimport notifier from \"../utils/notifier\";\r\n\r\nconst TableWrapper = styled.div`\r\n  .ReactVirtualized__Table {\r\n    font-size: 12px;\r\n    background: #e3eeee;\r\n    // background: #c0d9d9; root背景色\r\n\r\n    .ReactVirtualized__Table__Grid {\r\n      outline: none;\r\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);\r\n      border-radius: 0.5rem;\r\n      min-width: 650px;\r\n\r\n      .ReactVirtualized__Grid__innerScrollContainer {\r\n        min-width: 650px;\r\n      }\r\n    }\r\n\r\n    .gridScrollWrap {\r\n      overflow: hidden !important;\r\n      :hover {\r\n        overflow-y: scroll !important;\r\n\r\n        // fireFox\r\n        scrollbar-color: #6fd1d8 #fff;\r\n        // scrollbar-color: light;\r\n        scrollbar-width: thin;\r\n        // scrollbar-width: none;\r\n\r\n        //Safari and Chrome\r\n        ::-webkit-scrollbar {\r\n          // display: none;\r\n          width: 5px; /*高宽分别对应横竖滚动条的尺寸*/\r\n        }\r\n        ::-webkit-scrollbar-thumb {\r\n          /*滚动条里面小方块*/\r\n          border-radius: 10px;\r\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n          background: #6fd1d8;\r\n          height: 10px;\r\n        }\r\n\r\n        ::-webkit-scrollbar-track {\r\n          /*滚动条里面轨道*/\r\n          box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n          border-radius: 10px;\r\n          background: #fff;\r\n        }\r\n      }\r\n    }\r\n\r\n    .input,\r\n    .textarea {\r\n      border: none;\r\n      padding: 5px;\r\n      min-height: 30px;\r\n      font-size: 12px;\r\n      text-align: center;\r\n      background-color: #3a3a3a;\r\n    }\r\n\r\n    .textarea {\r\n      resize: vertical;\r\n    }\r\n\r\n    p {\r\n      line-height: 1.5;\r\n      margin: 0;\r\n    }\r\n  }\r\n`;\r\n\r\n//PureComponent要注意它是浅比较 https://react.docschina.org/docs/optimizing-performance.html\r\nclass SubTable extends PureComponent {\r\n  //没用到\r\n  $tableRef = React.createRef();\r\n\r\n  state = {\r\n    //当前正在编辑的字幕信息\r\n    editingSub: {\r\n      start: 0,\r\n      startTime: \"\",\r\n      end: 0,\r\n      endTime: \"\",\r\n      length: 0,\r\n      content: \"\",\r\n    },\r\n    errors: {},\r\n    //是否显示index true：显示序号  false: 显示插入按钮\r\n    displayIndex: true,\r\n  };\r\n\r\n  //校验规则\r\n  schema = {};\r\n\r\n  //错误信息模版\r\n  errorSchema = {};\r\n\r\n  //toastId 全属性校验 提交时提示\r\n  toastId_validate = null;\r\n\r\n  //toastId 单属性校验 输入时提示\r\n  toastId_validatePropertys = {\r\n    startTime: null,\r\n    endTime: null,\r\n    content: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    //初始化校验规则 、 错误信息模版 、变量名\r\n    this.schema = validateService.getEditingSubSchema();\r\n    this.errorSchema = validateService.getEditingErrorSchema();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // this.scrollToButtom();\r\n  }\r\n\r\n  //使用PureComponent 来代替手写shouldComponentUpdate\r\n  // shouldComponentUpdate(nextProps, nextState) {\r\n  //   return true;\r\n  // }\r\n\r\n  //全表单校验\r\n  validate = () => {\r\n    //执行校验\r\n    const errorPaths = validateService.validate(\r\n      this.state.editingSub,\r\n      this.schema\r\n    );\r\n    //定义错误对象\r\n    let errors = {};\r\n    //如果数据格式的校验有错误\r\n    if (errorPaths) {\r\n      errorPaths.map((path) => (errors[path] = this.errorSchema[path]));\r\n    }\r\n    //特殊校验\r\n    // ...\r\n    //无错误 返回false 表示通过校验 无错误对象\r\n    if (Object.keys(errors).length === 0) {\r\n      //更新state为空\r\n      this.setState({ errors: {} });\r\n      return false;\r\n    } else {\r\n      //更新state\r\n      this.setState({ errors });\r\n      //返回错误对象\r\n      return errors;\r\n    }\r\n  };\r\n\r\n  //全校验提示\r\n  toast_validate = (errorMessages) => {\r\n    //关闭之前的提示\r\n    notifier.done(this.toastId_validate);\r\n    this.toastId_validate = notifier.bootstrapToast(\r\n      errorMessages,\r\n      \"warning\",\r\n      \"top_left\",\r\n      { autoClose: 10000 },\r\n      \"flip\"\r\n    );\r\n  };\r\n\r\n  //单属性校验\r\n  validateProperty = (name, value) => {\r\n    const schema = {\r\n      [name]: this.schema[name],\r\n    };\r\n    // 校验无错返回false 有错返回true\r\n    const flag = validateService.validateProperty(name, value, schema);\r\n    //拿到原errors的值\r\n    let errors = { ...this.state.errors };\r\n    // 有错  添加或修改errors的属性 返回新建errors, 无错 删除errors的属性 返回false\r\n    if (flag) {\r\n      errors[name] = this.errorSchema[name];\r\n      //更新 state\r\n      this.setState({ errors });\r\n      //返回错误对象\r\n      let error = { [name]: this.errorSchema[name] };\r\n      return error;\r\n    } else {\r\n      //无错 则清掉原state里errors对象的相应属性\r\n      delete errors[name];\r\n      //更新 state\r\n      this.setState({ errors });\r\n      //返回false\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // 单属性校验提示\r\n  toast_validateProperty = (name, errorMessage) => {\r\n    //把除了自己以外的单属性提示关闭\r\n    //先得到自己的id\r\n    const currentId = this.toastId_validatePropertys[name];\r\n    //得到对象内所有属性的值 返回数组\r\n    const ids = Object.values(this.toastId_validatePropertys);\r\n    //把currentId从 ids数组中删除\r\n    const index = ids.indexOf(currentId);\r\n    ids.splice(index, 1);\r\n    //关闭 ids数组的所有值\r\n    ids.map((id) => notifier.done(id));\r\n    //当 currentId 没有在工作时 弹出新的提示\r\n    if (!notifier.isActive(currentId)) {\r\n      this.toastId_validatePropertys[name] = notifier.notify(\r\n        errorMessage.length > 0 && errorMessage[0],\r\n        \"bottom_left\",\r\n        \"default\",\r\n        {\r\n          hideProgressBar: true,\r\n          autoClose: 5000,\r\n        },\r\n        \"flip\"\r\n      );\r\n    }\r\n  };\r\n\r\n  //得到input的值 更新state.editingSub\r\n  handleInputValue = (name, value) => {\r\n    const editingSub = { ...this.state.editingSub };\r\n    editingSub[name] = value;\r\n    //单属性错误校验\r\n    const error = this.validateProperty(name, value);\r\n    //有错 则提示\r\n    if (error) {\r\n      let errorMessage = validateService.errors2messages(error);\r\n      this.toast_validateProperty(name, errorMessage);\r\n    } else {\r\n      //无错 则关闭提示\r\n      notifier.done(this.toastId_validatePropertys[name]);\r\n      //更新长度\r\n      editingSub.length = subService.getSubLength(editingSub);\r\n    }\r\n    //更新state\r\n    this.setState({ editingSub }, () => {\r\n      // logger.clog(\"更新input：\", name, value, this.state.editingSub);\r\n    });\r\n  };\r\n\r\n  //在编辑时 回显表单数据 校验数据以更新errors\r\n  handleRowEdit = (sub) => {\r\n    const { onEdit } = this.props;\r\n    const editingSub = subService.mapSubToFullModel(sub);\r\n    this.setState({ editingSub }, () => {\r\n      //校验数据 更新errors\r\n      this.validate();\r\n      logger.clog(\"表单回显：\", this.state.editingSub);\r\n    });\r\n    onEdit(sub);\r\n  };\r\n\r\n  handleRowClick = (sub) => {\r\n    const { onClick } = this.props;\r\n    onClick(sub);\r\n  };\r\n\r\n  //提交前\r\n  handleRowCommit = (sub) => {\r\n    const { onCommit } = this.props;\r\n    //校验全表单数据\r\n    const errors = this.validate();\r\n    //有错误 则不提交\r\n    if (errors) {\r\n      const errorMessages = validateService.errors2messages(errors);\r\n      //打出提示\r\n      this.toast_validate(errorMessages);\r\n      return;\r\n    } else {\r\n      //无错 则关闭提示\r\n      notifier.done(this.toast_validate);\r\n      //提交 传入原sub 和 填写的sub， 传值前将填写的sub格式化\r\n      onCommit(sub, subService.mapSubToFullModel(this.state.editingSub));\r\n    }\r\n  };\r\n\r\n  handleRowRemove = (sub) => {\r\n    const { onRemove } = this.props;\r\n    logger.clog(\"删除一行：\", sub);\r\n    onRemove(sub);\r\n  };\r\n\r\n  //取消编辑\r\n  handleRowCancel = (sub) => {\r\n    const { onCancel } = this.props;\r\n    logger.clog(\"取消编辑：\", sub);\r\n    onCancel(sub);\r\n  };\r\n\r\n  //改变table的背景色 ，ps： table被header 和 grid覆盖\r\n  tableBackGroundColor = (subArray) => {\r\n    const color = subArray && subArray.length === 0 ? \"#e3eeee\" : \"#c0d9d9\";\r\n    let $table = document.getElementById(\"vSubTable\");\r\n    if ($table) {\r\n      $table.style.backgroundColor = color;\r\n    }\r\n  };\r\n\r\n  //序号显示 的切换\r\n  handleDisplayIndexSwitch = (boolean) => {\r\n    const displayIndex = boolean ? true : false;\r\n    this.setState({ displayIndex });\r\n  };\r\n\r\n  //插入\r\n  handleRowInsert = (sub) => {\r\n    const { onInsert } = this.props;\r\n    onInsert(sub);\r\n  };\r\n\r\n  //将grid的滚动条 滚到底部\r\n  scrollToButtom = () => {\r\n    //移动滚条到底部 固定移动一格更好？\r\n    const scrollWrap = document.getElementsByClassName(\"gridScrollWrap\")[0];\r\n    let scrollTop = scrollWrap.scrollTop;\r\n    let scrollHeight = scrollWrap.scrollHeight;\r\n    let clientHeight = scrollWrap.clientHeight;\r\n    console.log(\r\n      scrollWrap,\r\n      \"scrollHeight:\",\r\n      scrollHeight,\r\n      \";scrollTop:\",\r\n      scrollTop,\r\n      \";clientHeight:\",\r\n      clientHeight,\r\n      \";scrollHeight - scrollTop - clientHeight:\",\r\n      scrollHeight - scrollTop - clientHeight\r\n    );\r\n    //开始移动\r\n    scrollWrap.scrollTop =\r\n      scrollWrap.scrollTop + (scrollHeight - scrollTop - clientHeight);\r\n  };\r\n\r\n  render() {\r\n    const { subArray, scrollIndex, container, onInsert } = this.props;\r\n    const { containerHeight, containerWidth } = container;\r\n    //table背景色 无内容时为银色 有内容和root背景一样\r\n    this.tableBackGroundColor(subArray);\r\n    return (\r\n      <TableWrapper>\r\n        <Table\r\n          id=\"vSubTable\"\r\n          ref={this.$tableRef}\r\n          headerHeight={35}\r\n          width={containerWidth / 2}\r\n          height={containerHeight}\r\n          gridClassName={\"gridScrollWrap\"}\r\n          rowHeight={60}\r\n          scrollToIndex={scrollIndex}\r\n          rowCount={subArray.length}\r\n          rowGetter={({ index }) => subArray[index]}\r\n          headerRowRenderer={() => (\r\n            <SubHeaderRow\r\n              {...this.state}\r\n              subArrayLenIsZero={subArray && subArray.length === 0}\r\n              onInsert={onInsert}\r\n              onDisplayIndexSwitch={this.handleDisplayIndexSwitch}\r\n            />\r\n          )}\r\n          rowRenderer={(rowProps) => (\r\n            <SubRow\r\n              {...rowProps}\r\n              onRowRemove={this.handleRowRemove}\r\n              onRowEdit={this.handleRowEdit}\r\n              onRowClick={this.handleRowClick}\r\n              onRowCommit={this.handleRowCommit}\r\n              onRowCancel={this.handleRowCancel}\r\n              onRowInsert={this.handleRowInsert}\r\n              onInputValueChange={this.handleInputValue}\r\n              {...this.state}\r\n              scrollIndex={scrollIndex}\r\n            />\r\n          )}\r\n        ></Table>\r\n      </TableWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SubTable;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ToolsWrapper = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  padding: 15px;\r\n  .clearBox {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n  }\r\n  .toolsBox {\r\n    flex: 1;\r\n    // border: 1px solid;\r\n  }\r\n\r\n  //滑块样式\r\n  input[type=\"range\"] {\r\n    appearance: none;\r\n    height: 3px;\r\n    width: 200px;\r\n    outline: none;\r\n    background-color: #529393;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  //chorme\r\n  input[type=\"range\"]::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    height: 15px;\r\n    width: 15px;\r\n    background: #ffffff;\r\n    border-radius: 50%;\r\n  }\r\n`;\r\n\r\nconst Tools = ({ duration, onDurationChange }) => {\r\n  return (\r\n    <ToolsWrapper>\r\n      <div className=\"clearBox\">\r\n        <input\r\n          type=\"range\"\r\n          title={duration}\r\n          value={duration}\r\n          min=\"10\"\r\n          max=\"20\"\r\n          step=\"1\"\r\n          onChange={(e) => {\r\n            onDurationChange(Number(e.currentTarget.value));\r\n          }}\r\n        />\r\n      </div>\r\n      {/* <div className=\"toolsBox\">工具区</div> */}\r\n    </ToolsWrapper>\r\n  );\r\n};\r\n\r\nexport default React.memo(Tools);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { ShWave } from \"shwave\";\r\n\r\nconst LineWrapper = styled.div`\r\n  //底部时间轴 固定150px\r\n  height: 150px;\r\n  position: relative;\r\n  display: flex;\r\n  width: 100%;\r\n  background-color: #c0d9d9;\r\n  // border-top: 1px solid rgb(10, 10, 10);\r\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst WaveLine = ({\r\n  currentTime,\r\n  videoUrl,\r\n  onWaveClick,\r\n  onWaveContextmenu,\r\n  subArray,\r\n  onSubBlockMove,\r\n  onSubBlockMoveError,\r\n  onSubBlockResize,\r\n  onSubBlockClick,\r\n  duration\r\n}) => {\r\n  return (\r\n    <LineWrapper>\r\n      <ShWave\r\n        duration={duration}\r\n        backgroundColor={\"#529393\"}\r\n        currentTime={currentTime}\r\n        throttleWait={1}\r\n        url={videoUrl}\r\n        waveColor={\"#fbf8f86b\"}\r\n        alterWaveColor={\"#57e3e3\"}\r\n        waveScale={0.8}\r\n        click={onWaveClick}\r\n        contextmenu={onWaveContextmenu}\r\n        subArray={subArray}\r\n        onSubMove={onSubBlockMove}\r\n        onSubMoveError={onSubBlockMoveError}\r\n        ErrorThrottleWait={1200}\r\n        onSubResize={onSubBlockResize}\r\n        onSubClick={onSubBlockClick}\r\n      />\r\n    </LineWrapper>\r\n  );\r\n};\r\n\r\nexport default WaveLine;\r\n","import React, { Component } from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport styled, { createGlobalStyle } from \"styled-components\";\r\nimport logger from \"../utils/logger\";\r\nimport subService from \"../services/subService\";\r\nimport notifier from \"../utils/notifier\";\r\nimport videoService from \"../services/videoService\";\r\nimport config from \"../config/config.json\"\r\nimport Header from \"./header\";\r\nimport VideoPlayer from \"./videoPlayer\";\r\nimport SubTable from \"./subTable\";\r\nimport Tools from \"./tools\";\r\nimport WaveLine from \"./waveLine\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    html,\r\n    body,\r\n    #root {\r\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\r\n        line-height: 1.5;\r\n        height: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    *, *::before, *::after {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    #root {\r\n        display: flex;\r\n        flex-direction: column;\r\n        font-size: 14px;\r\n        // color: #ccc; 白字\r\n        background: #C0D9D9;\r\n        // background: #66CCCC;\r\n    }\r\n\r\n    #nprogress .bar {\r\n        top: 50px !important;\r\n\r\n        .peg {\r\n            display: none !important;\r\n        }\r\n    }\r\n\r\n    ::-webkit-scrollbar {\r\n        width: 10px;\r\n    }\r\n    \r\n    ::-webkit-scrollbar-thumb {\r\n        background-color: #666;\r\n    }\r\n    \r\n    ::-webkit-scrollbar-thumb:hover {\r\n        background-color: #ccc;\r\n    }\r\n`;\r\n\r\nconst Main = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex: 1;\r\n`;\r\n\r\nconst Left = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Right = styled.div`\r\n  flex: 1;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst requestAnimationFrameCom =\r\n  window.requestAnimationFrame ||\r\n  window.mozRequestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame ||\r\n  window.msRequestAnimationFrame;\r\n\r\n//导航栏50px 底部时间轴150px\r\nclass SubEditor extends Component {\r\n  state = {\r\n    // https://sh-rep.oss-cn-hongkong.aliyuncs.com/mll.mp4   /friday.mp4\r\n    videoUrl: \"\",\r\n    subUrl: \"\",\r\n    subArray: [],\r\n    picUrl: videoService.getDefaultPicUrl(),\r\n    //容器 装着SubTab 和 VideoPlayer\r\n    container: {\r\n      containerHeight: 10,\r\n      containerWidth: 10,\r\n    },\r\n    //字幕表滚动到的index\r\n    scrollIndex: -1,\r\n    //播放器\r\n    player: null,\r\n    //当前时间\r\n    currentTime: 0,\r\n    //时间轴长度\r\n    duration: 15,\r\n  };\r\n\r\n  //用来加工字幕url的worker\r\n  subUrlWorker = null;\r\n\r\n  //组件装载并渲染完成后\r\n  componentDidMount() {\r\n    //首次调整container的宽高\r\n    this.resizeContainer();\r\n    //添加resize的事件监听\r\n    this.addResizeListener();\r\n    //初始化字幕表\r\n    this.initSubTable();\r\n    //设置 收到worker回复时的处理\r\n    this.subUrlWorker = subService.createSubUrlWorker((subUrl) => {\r\n      //拿到url后 更新并装载\r\n      this.updateSubUrl(subUrl, true);\r\n    });\r\n  }\r\n\r\n  //卸载组件前\r\n  componentWillUnmount() {\r\n    //移除添加的事件监听 不然页面切换多了会可能卡顿 ??\r\n    // window.removeEventListener(\"resize\", this.resizeContainer);\r\n    // logger.clog(\"移除resize事件监听\");\r\n  }\r\n\r\n  //调整container的宽高\r\n  resizeContainer = () => {\r\n    //减去导航栏的50 底部时间轴的150\r\n    const containerHeight = document.body.clientHeight - 200;\r\n    const containerWidth = document.body.clientWidth;\r\n    logger.clog(\"更新container的宽高\", containerWidth, containerHeight);\r\n    this.setState({ container: { containerHeight, containerWidth } });\r\n  };\r\n\r\n  //添加resize事件监听\r\n  addResizeListener = () => {\r\n    //把this.resizeContainer的引用作为参数 传到匿名函数内的setTimeout内\r\n    function debounce(func, wait) {\r\n      let timeout;\r\n      return () => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(func, wait);\r\n      };\r\n    }\r\n    //300ms内只执行一次的调整\r\n    const timeOutResize = debounce(this.resizeContainer, 300);\r\n    //添加resize事件监听 窗口大小变化时自动执行this.resizeContainer\r\n    window.addEventListener(\"resize\", timeOutResize);\r\n    logger.clog(\"添加resize事件监听\");\r\n  };\r\n\r\n  //更新一个属性 供子组件回调\r\n  updateOneState = (stateObject) => {\r\n    this.setState(stateObject);\r\n    logger.clog(\"更新state：\", stateObject);\r\n  };\r\n\r\n  /**@description 更新字幕数组\r\n   * @param {array} subArray 字幕数组\r\n   * @param {boolean} willStorage 是否存储\r\n   */\r\n  updateSubArray = (subArray, willStorage = false) => {\r\n    // 将字幕数组转为规范模式\r\n    subArray.map((sub) => subService.mapSubToFullModel(sub));\r\n    //排序\r\n    const sortedArray = subService.sortSubArray(subArray);\r\n    //重置scrollIndex (需要先重置scrollIndex 再更新数组 更新数组会使wavleLine重新计算scrollIndex)\r\n    this.setState({ scrollIndex: -1 });\r\n    //更新subArray\r\n    this.setState({ subArray: sortedArray }, () => {\r\n      // 回调函数 ()=>{}回调函数里的this.state是更新后的state 函数无参\r\n      //如果不需要存储的更新 则结束\r\n      if (!willStorage) return;\r\n      //存储字幕\r\n      this.storageSubs(this.state.subArray);\r\n      // 交给worker前 需要将字幕数组转为规范模式 前面已经转过了\r\n      this.subUrlWorker.postMessage(this.state.subArray);\r\n    });\r\n  };\r\n\r\n  /**@description 更新字幕url\r\n   * @param {string} subUrl 字幕url\r\n   * @param {boolean} willLoadTrack 是否载入字幕给track\r\n   */\r\n  updateSubUrl = (subUrl, willLoadTrack = false) => {\r\n    //释放上一个url资源\r\n    URL.revokeObjectURL(this.state.subUrl);\r\n    logger.clog(\"释放：\", this.state.subUrl);\r\n    this.setState({ subUrl }, () => {\r\n      //如果需要载入字幕\r\n      if (willLoadTrack) {\r\n        logger.clog(\"装载：\", this.state.subUrl);\r\n        //装载字幕\r\n        this.loadTrack(this.state.subUrl);\r\n      }\r\n    });\r\n  };\r\n\r\n  //为播放器装载字幕\r\n  loadTrack = (subUrl) => {\r\n    //清除播放器中已经渲染的p标签字幕 只会渲染一行\r\n    this.cleanSubP();\r\n    if (!this.state.player || !this.state.player.video) return;\r\n    //没找到dbplayer切换字幕的函数\r\n    const track = this.state.player.video.firstElementChild;\r\n    track.default = true;\r\n    track.kind = \"subtitles\";\r\n    track.src = subUrl;\r\n  };\r\n\r\n  //清除播放器残留的字幕 已经被渲染在p标签里的字幕 只会渲染一行 也只有一行\r\n  cleanSubP = () => {\r\n    const subtitleDiv = document.getElementsByClassName(\"dplayer-subtitle\")[0];\r\n    const p = subtitleDiv.firstChild;\r\n    if (p) {\r\n      subtitleDiv.removeChild(p);\r\n      logger.clog(\"清除字幕残留\", p);\r\n    }\r\n  };\r\n\r\n  //存储字幕数组到本地\r\n  storageSubs = (subArray) => {\r\n    subService.saveSubArray(subArray);\r\n  };\r\n\r\n  //清空存储里的字幕\r\n  cleanStorageSubs = () => {\r\n    subService.cleanSubArray();\r\n    logger.clog(\"清空存储的字幕\");\r\n  };\r\n\r\n  //初始化字幕表\r\n  initSubTable = async () => {\r\n    try {\r\n      const subArray = await subService.getSubArray();\r\n      logger.clog(\"从存储中，初始化字幕\", subArray);\r\n      //不需要存储\r\n      this.updateSubArray(subArray);\r\n      const subUrl = subService.createSubArrayUrl(subArray);\r\n      //更新记录的字幕url 并载入字幕 这样就不需要在初始化数组的时候 再去存一遍了\r\n      this.updateSubUrl(subUrl, true);\r\n    } catch (e) {\r\n      notifier.notify(\"读取字幕失败，请尝试清除缓存\", \"top_center\", \"info\");\r\n    }\r\n  };\r\n\r\n  //删除一行字幕\r\n  handleSubRemove = (sub) => {\r\n    const subArray = [...this.state.subArray];\r\n    const index = subArray.indexOf(sub);\r\n    subArray.splice(index, 1);\r\n    //更新state 并存储 每次存储都会更新url\r\n    this.updateSubArray(subArray, true);\r\n    logger.clog(\"删除\", sub, index);\r\n  };\r\n\r\n  //编辑时\r\n  handleSubEdit = (sub) => {\r\n    const subArray = [...this.state.subArray];\r\n    //将数组内每个sub的editing重置\r\n    subArray.map((sub) => (sub.editing = false));\r\n    const index = subArray.indexOf(sub);\r\n    subArray[index].editing = true;\r\n    this.updateSubArray(subArray);\r\n    logger.clog(\"handleEdit\", sub, index);\r\n  };\r\n\r\n  //点击时\r\n  handleSubClick = (sub) => {\r\n    if (!sub || !sub.start) return;\r\n    const time = sub.start;\r\n    //暂停视频 然后跳转到对应time\r\n    this.playerSeekTo(time);\r\n  };\r\n\r\n  //取消时\r\n  handleSubCancel = (sub) => {\r\n    //取消编辑状态\r\n    const subArray = [...this.state.subArray];\r\n    const index = subArray.indexOf(sub);\r\n    subArray[index].editing = false;\r\n    this.updateSubArray(subArray);\r\n  };\r\n\r\n  //提交时\r\n  handleSubCommit = (sub, editingSub) => {\r\n    const subArray = [...this.state.subArray];\r\n    //找到原sub的index\r\n    const index = subArray.indexOf(sub);\r\n    //覆盖原来的sub\r\n    subArray[index] = editingSub;\r\n    //取消编辑状态\r\n    subArray[index].editing = false;\r\n    //提交\r\n    //更新state 并存储 如果存储 则会更新url\r\n    this.updateSubArray(subArray, true);\r\n    logger.clog(\"提交：\", sub, editingSub, subArray);\r\n  };\r\n\r\n  //插入默认字幕\r\n  handleSubInsert = (sub) => {\r\n    // 要对字幕排序\r\n    //起始时间 有参考的sub 就是 sub的结束时间 +0.001 ， 没有sub 就是0\r\n    let start = sub ? sub.end + 0.001 : 0;\r\n    //复制字幕数组\r\n    const subArray = [...this.state.subArray];\r\n    //如果sub为空 index为-1\r\n    let index = subArray.indexOf(sub);\r\n    //sub的下一个sub对象 next\r\n    const next = subArray[index + 1];\r\n    //结束时间 有next元素就是next元素的起始时间 -0.001 ， 没有next 就是起始时间+5\r\n    let end = next ? Math.abs(next.start - 0.001) : start + 5;\r\n    //判断得到的时长是否合理\r\n    if (Number((end - start).toFixed(3)) < 0.001) {\r\n      notifier.notify(\"空间不足，前后字幕相隔至少需要0.03秒\");\r\n      return;\r\n    }\r\n    //根据开始和结束时间 获得一个默认字幕\r\n    const dSub = subService.getDefaultSub(Number(start), Number(end));\r\n    //将字幕插入到指定位置\r\n    subArray.splice(index + 1, 0, dSub);\r\n    //更新\r\n    this.updateSubArray(subArray);\r\n    //将滚条滚到刚刚的位置\r\n    const scrollIndex = index + 1;\r\n    this.setState({ scrollIndex });\r\n    logger.clog(\"插入：\", dSub);\r\n  };\r\n\r\n  //下载字幕\r\n  handleSubDownload = async () => {\r\n    try {\r\n      const isSuccess = await subService.downloadSubFile();\r\n      logger.clog(isSuccess);\r\n      if (!isSuccess) notifier.notify(\"无字幕文件，请先制作您的字幕。\");\r\n    } catch (e) {\r\n      notifier.notify(\"下载出错\", \"top_center\", \"warning\");\r\n    }\r\n  };\r\n\r\n  //清空字幕 删除存储的字幕 清空内存里的字幕\r\n  handleSubClean = () => {\r\n    //确认框\r\n    const isConfirm = window.confirm(\"是否要删除所有字幕？\");\r\n    if (isConfirm) {\r\n      //从存储中移除\r\n      this.cleanStorageSubs();\r\n      //字幕url置空 并载入给track（每次更新 都会释放上一个url资源\r\n      this.updateSubUrl(\"\", true);\r\n      //重置为空数组\r\n      const subArray = [];\r\n      this.updateSubArray(subArray);\r\n    }\r\n  };\r\n\r\n  //初始化视频播放器对象\r\n  handlePlayerInit = (player) => {\r\n    logger.clog(\"初始化播放器\");\r\n    this.setState({ player });\r\n    //1秒60帧 根据屏幕刷新虑有所变化，time为时间戳 ，每一帧的工作内容为：\r\n    const frameWork = () => {\r\n      const { video } = player;\r\n      //更新当前时间\r\n      this.handleCurrentTime(video.currentTime);\r\n      requestAnimationFrameCom(frameWork);\r\n    };\r\n    //启动时间更新\r\n    requestAnimationFrameCom(frameWork);\r\n  };\r\n\r\n  //视频seek\r\n  playerSeekTo = (second, action = \"pause\") => {\r\n    const player = this.state.player;\r\n    if (!player || !player.video) return;\r\n    const duration = player.video.duration;\r\n    player[action]();\r\n    //不能超过视频总时长\r\n    const time = second > duration ? duration : second;\r\n    console.log(second, duration, time);\r\n    player.seek(time);\r\n  };\r\n\r\n  //切换视频\r\n  handleVideoSwitch = (fileType, videoUrl) => {\r\n    const videoType = videoService.createVideoType(fileType);\r\n    //释放前一个视频资源\r\n    URL.revokeObjectURL(this.state.videoUrl);\r\n    //更新视频url\r\n    this.setState({ videoUrl });\r\n    this.state.player.switchVideo({\r\n      url: videoUrl,\r\n      type: videoType,\r\n    });\r\n  };\r\n\r\n  //视频可播放时 视频准备就绪后\r\n  handleVideoCanPlay = () => {\r\n    logger.clog(\"视频已经就绪\");\r\n    const isChrome = navigator.userAgent.toLowerCase().indexOf(\"chrome\") > 0;\r\n    //如果是chrome 则把字幕改为透明 避免双字幕\r\n    if (isChrome) {\r\n      const subtitleDiv = document.getElementsByClassName(\r\n        \"dplayer-subtitle\"\r\n      )[0];\r\n      if (subtitleDiv) {\r\n        subtitleDiv.style.opacity = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  //处理scrollIndex的高频率更新\r\n  handleScrollIndexFrame = (index) => {\r\n    if (this.state.scrollIndex === index) return;\r\n    this.setState({ scrollIndex: index });\r\n  };\r\n\r\n  //更新当前时间 如果和当前保存的当前时间相等 则不更新\r\n  handleCurrentTime = (currentTime) => {\r\n    if (this.state.currentTime === currentTime) return;\r\n    this.setState({ currentTime }, () => {\r\n      //更新ScrollIndex （高頻率\r\n      //对于空数组，findIndex是不会执行的 沒找到则返回-1\r\n      const index = this.state.subArray.findIndex(\r\n        (sub) => sub.start <= currentTime && sub.end > currentTime\r\n      );\r\n      if (index === -1) return;\r\n      this.handleScrollIndexFrame(index);\r\n    });\r\n  };\r\n\r\n  //在视频播放时\r\n  handleVideoPlaying = () => {};\r\n\r\n  //底部waveLine左键单击时 url为空时 不会执行\r\n  handleWaveClick = (time, event) => {\r\n    //暂停视频 然后跳转到对应time\r\n    this.playerSeekTo(time);\r\n  };\r\n\r\n  //底部waveLine右键单击时 url为空时 不会执行\r\n  handleWaveContextmenu = (time, event) => {\r\n    //播放视频 然后跳转到对应time\r\n    this.playerSeekTo(time, \"play\");\r\n  };\r\n\r\n  //当timeLine的字幕块移动时\r\n  handleSubBlockMove = (originSub, translateSecond) => {\r\n    //这里是浅拷贝 数组内元素的引用并没有变化\r\n    const subArray = [...this.state.subArray];\r\n    const index = subArray.indexOf(originSub);\r\n    const sub = subArray[index];\r\n    const start = Number(Number(sub.start + translateSecond).toFixed(3));\r\n    const end = Number(Number(sub.end + translateSecond).toFixed(3));\r\n    //非法值 则不更新subArray\r\n    if (start < 0 || end <= 0) return;\r\n    //这里的拷贝是因为 如startTime可能为只读属性\r\n    const tempSub = { ...sub };\r\n    tempSub.startTime = subService.toTime(start);\r\n    tempSub.endTime = subService.toTime(end);\r\n    //这里返回了一个新的对象 改变了subArray[index]的内存地址 因为subTable使用的PureComponent是浅比较 所以必须要改数组内元素的内存地址\r\n    subArray[index] = subService.mapSubToFullModel(tempSub);\r\n    this.updateSubArray(subArray, true);\r\n  };\r\n\r\n  //字幕块移动的错误提示id\r\n  toastId_subBlockMoveError = null;\r\n  //当字幕块移动有警告时\r\n  handleSubBlockMoveError = () => {\r\n    if (!notifier.isActive(this.toastId_subMoveError)) {\r\n      this.toastId_subBlockMoveError = notifier.notify(\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <div>无效的位置，松开鼠标以修复</div>\r\n        </div>,\r\n        \"bottom_left\",\r\n        \"warning\",\r\n        {\r\n          hideProgressBar: true,\r\n          autoClose: 1200,\r\n          canClose: true,\r\n        },\r\n        \"flip\"\r\n      );\r\n    }\r\n  };\r\n\r\n  //字幕块resize 改变字幕长度时\r\n  handleSubBlockResize = (originSub, translateSecond, type) => {\r\n    //这里是浅拷贝 数组内元素的引用并没有变化\r\n    const subArray = [...this.state.subArray];\r\n    const index = subArray.indexOf(originSub);\r\n    const sub = subArray[index];\r\n    //这里的拷贝是因为 如startTime可能为只读属性\r\n    const tempSub = { ...sub };\r\n    let start = null;\r\n    let end = 0;\r\n    if (type === \"start\") {\r\n      start = Number(Number(sub.start + translateSecond).toFixed(3));\r\n      //非法值 则不更新subArray\r\n      if (start === null || start < 0) return;\r\n      tempSub.startTime = subService.toTime(start);\r\n    } else {\r\n      end = Number(Number(sub.end + translateSecond).toFixed(3));\r\n      //非法值 则不更新subArray\r\n      if (end <= 0 || end <= sub.start) return;\r\n      tempSub.endTime = subService.toTime(end);\r\n    }\r\n    subArray[index] = subService.mapSubToFullModel(tempSub);\r\n    this.updateSubArray(subArray, true);\r\n  };\r\n\r\n  //字幕块点击事件\r\n  handleSubBlockClick = (sub) => {\r\n    const subArray = [...this.state.subArray];\r\n    const scrollIndex = subArray.indexOf(sub);\r\n    this.setState({ scrollIndex });\r\n  };\r\n\r\n  //当duration调整时\r\n  handleDurationChange = (duration) => {\r\n    this.setState({ duration });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      videoUrl,\r\n      subUrl,\r\n      subArray,\r\n      picUrl,\r\n      container,\r\n      scrollIndex,\r\n      player,\r\n      currentTime,\r\n      duration,\r\n    } = this.state;\r\n    const funcProps = {\r\n      updateOneState: this.updateOneState,\r\n      updateSubArray: this.updateSubArray,\r\n      updateSubUrl: this.updateSubUrl,\r\n      storageSubs: this.storageSubs,\r\n      cleanStorageSubs: this.cleanStorageSubs,\r\n      onDownload: this.handleSubDownload,\r\n      onClean: this.handleSubClean,\r\n      onRemove: this.handleSubRemove,\r\n      onEdit: this.handleSubEdit,\r\n      onClick: this.handleSubClick,\r\n      onCommit: this.handleSubCommit,\r\n      onCancel: this.handleSubCancel,\r\n      onInsert: this.handleSubInsert,\r\n      onSwitch: this.handleVideoSwitch,\r\n      initPlayer: this.handlePlayerInit,\r\n      onVideoCanPlay: this.handleVideoCanPlay,\r\n      updateCurrentTime: this.handleCurrentTime,\r\n      onVideoPlaying: this.handleVideoPlaying,\r\n      onWaveClick: this.handleWaveClick,\r\n      onWaveContextmenu: this.handleWaveContextmenu,\r\n      onSubBlockMove: this.handleSubBlockMove,\r\n      onSubBlockMoveError: this.handleSubBlockMoveError,\r\n      onSubBlockResize: this.handleSubBlockResize,\r\n      onSubBlockClick: this.handleSubBlockClick,\r\n      onDurationChange: this.handleDurationChange,\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Helmet>\r\n          <title>{config.subeditor_title}</title>\r\n        </Helmet>\r\n        <GlobalStyle />\r\n        <Header {...funcProps} />\r\n        <Main>\r\n          <Left>\r\n            <VideoPlayer\r\n              {...funcProps}\r\n              picUrl={picUrl}\r\n              videoUrl={videoUrl}\r\n              subUrl={subUrl}\r\n              player={player}\r\n            />\r\n            <Tools duration={duration} {...funcProps} />\r\n          </Left>\r\n          <Right>\r\n            <SubTable\r\n              {...funcProps}\r\n              container={container}\r\n              subArray={subArray}\r\n              scrollIndex={scrollIndex}\r\n            />\r\n          </Right>\r\n        </Main>\r\n        {/* <Timeline {...funcProps}/> */}\r\n        <WaveLine\r\n          {...funcProps}\r\n          currentTime={currentTime}\r\n          videoUrl={videoUrl}\r\n          subArray={subArray}\r\n          duration={duration}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SubEditor;\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport config from \"../config/config.json\"\r\nimport guideService from \"../services/guideService\"\r\n\r\nconst Test = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <Helmet>\r\n        <title>{config.test_title}</title>\r\n      </Helmet>\r\n      <video\r\n        id=\"video\"\r\n        controls\r\n        width=\"900px\"\r\n        src={`${guideService.home}friday.mp4`}\r\n      >\r\n        <track\r\n          default\r\n          kind=\"subtitles\"\r\n          srcLang=\"en\"\r\n          src={`${guideService.home}friday.vtt`}\r\n        />\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Test;\r\n","import React, { Component } from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport SubEditor from \"./components/subEditor\";\r\nimport Test from \"./components/test\";\r\nimport notifier from \"./utils/notifier\";\r\nimport guideService from \"./services/guideService\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nclass App extends Component {\r\n  state = {};\r\n  render() {\r\n    notifier.notify(\"hello\", \"top_left\");\r\n    return (\r\n      <React.Fragment>\r\n        <Helmet>\r\n          <meta charSet=\"utf-8\" />\r\n          <title>SH - SubEditor App</title>\r\n          <link rel=\"icon\" href={`${guideService.home}sh.ico`} />\r\n        </Helmet>\r\n        <ToastContainer\r\n          autoClose={3000}\r\n          closeOnClick={false}\r\n          draggable={false}\r\n          position={toast.POSITION.TOP_LEFT}\r\n          className=\"toastContainerClass\"\r\n        />\r\n        <Switch>\r\n          <Route path={guideService.trackTest} component={Test} />\r\n          <Route path={guideService.subEditorPath} component={SubEditor} />\r\n        </Switch>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// import { BrowserRouter } from \"react-router-dom\";\r\n// 为了使用github的pages服务 改用HashRouter\r\nimport { HashRouter  } from \"react-router-dom\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport \"normalize.css\";\r\nimport \"font-awesome/css/font-awesome.css\";\r\nimport \"nprogress/nprogress.css\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"react-virtualized/styles.css\";\r\n\r\nReactDOM.render(\r\n  <HashRouter >\r\n    <App />\r\n  </HashRouter >,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}